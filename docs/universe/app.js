!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);n(2);window.OpenSeadragon=n(3),n(4),n(5),window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.loadHidden=!1,window.mountJalava=function(e,t){var r=n(10),i=n(11),o=r.Elm.Main.init({node:e,flags:Object.assign({rootUrl:"http://ryanfb.github.io/iiif-universe/iiif-universe.json",uriMapper:{inflaters:[],deflaters:[]}},t||{})}),a=null;o.ports.outPortOsdCmd.subscribe(function(e){var t=e.for,n=$("#"+t),r=n.data("osdviewer");r||((r=OpenSeadragon({id:t,prefixUrl:"osd/",preserveOverlays:!0})).addOverlay({element:document.getElementById("annotation_overlay_wrapper"),location:new OpenSeadragon.Rect(0,0,1,1),checkResize:!0}),a=i.Elm.AnnotationOverlay.init({node:document.getElementById("annotation_overlay"),flags:null}),o.ports.outPortSetAnnotationsCmd.subscribe(function(e){a.ports.inPortSetAnnotations.send(e)}),a.ports.outPortShowAnnotation.subscribe(function(e){o.ports.inPortShowAnnotation.send(e)}),n.data("osdviewer",r)),"setSource"==e.type&&(""==e.value?r.close():r.open(e.value))}),o.ports.outPortScrollToView.subscribe(function(e){requestAnimationFrame(function(){var t=$(e.container),n=t.find(e.item);if(n.length>0)if("x"==e.axis){var r=n.offset().left+t.scrollLeft()-t.width()/2+n.width()/2;e.animate?t.animate({scrollLeft:r}):t.scrollLeft(r)}else{r=n.offset().top+t.scrollTop()-t.height()/2+n.height()/2;e.animate?t.animate({scrollTop:r}):t.scrollTop(r)}})}),document.addEventListener("lazybeforeunveil",function(e){var t=$(e.target);if(t.hasClass("manifest_lazyload")){var n=t.data("manifest-uri");n&&o.ports.inPortLazyLoadManifest.send(n)}})}},function(e,t,n){!function(t,n){var r=function(e,t){"use strict";if(!t.getElementsByClassName)return;var n,r,i=t.documentElement,o=e.Date,a=e.HTMLPictureElement,s=e.addEventListener,u=e.setTimeout,c=e.requestAnimationFrame||u,l=e.requestIdleCallback,h=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],d={},g=Array.prototype.forEach,p=function(e,t){return d[t]||(d[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),d[t].test(e.getAttribute("class")||"")&&d[t]},v=function(e,t){p(e,t)||e.setAttribute("class",(e.getAttribute("class")||"").trim()+" "+t)},m=function(e,t){var n;(n=p(e,t))&&e.setAttribute("class",(e.getAttribute("class")||"").replace(n," "))},b=function(e,t,n){var r=n?"addEventListener":"removeEventListener";n&&b(e,t),f.forEach(function(n){e[r](n,t)})},w=function(e,r,i,o,a){var s=t.createEvent("Event");return i||(i={}),i.instance=n,s.initEvent(r,!o,!a),s.detail=i,e.dispatchEvent(s),s},y=function(t,n){var i;!a&&(i=e.picturefill||r.pf)?(n&&n.src&&!t.getAttribute("srcset")&&t.setAttribute("srcset",n.src),i({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},x=function(e,t){return(getComputedStyle(e,null)||{})[t]},T=function(e,t,n){for(n=n||e.offsetWidth;n<r.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},S=function(){var e,n,r=[],i=[],o=r,a=function(){var t=o;for(o=r.length?i:r,e=!0,n=!1;t.length;)t.shift()();e=!1},s=function(r,i){e&&!i?r.apply(this,arguments):(o.push(r),n||(n=!0,(t.hidden?u:c)(a)))};return s._lsFlush=a,s}(),E=function(e,t){return t?function(){S(e)}:function(){var t=this,n=arguments;S(function(){e.apply(t,n)})}},_=function(e){var t,n,r=function(){t=null,e()},i=function(){var e=o.now()-n;e<99?u(i,99-e):(l||r)(r)};return function(){n=o.now(),t||(t=u(i,99))}};!function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in r=e.lazySizesConfig||e.lazysizesConfig||{},n)t in r||(r[t]=n[t]);e.lazySizesConfig=r,u(function(){r.init&&R()})}();var C=function(){var a,c,f,d,T,C,R,k,O,$,M,D,H,L,I=/^img$/i,A=/^iframe$/i,B="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),z=0,N=0,F=-1,W=function(e){N--,e&&e.target&&b(e.target,W),(!e||N<0||!e.target)&&(N=0)},j=function(e,n){var r,o=e,a="hidden"==x(t.body,"visibility")||"hidden"!=x(e.parentNode,"visibility")&&"hidden"!=x(e,"visibility");for(k-=n,M+=n,O-=n,$+=n;a&&(o=o.offsetParent)&&o!=t.body&&o!=i;)(a=(x(o,"opacity")||1)>0)&&"visible"!=x(o,"overflow")&&(r=o.getBoundingClientRect(),a=$>r.left&&O<r.right&&M>r.top-1&&k<r.bottom+1);return a},V=function(){var e,o,s,u,l,h,f,g,p,v=n.elements;if((d=r.loadMode)&&N<8&&(e=v.length)){o=0,F++,null==H&&("expand"in r||(r.expand=i.clientHeight>500&&i.clientWidth>500?500:370),D=r.expand,H=D*r.expFactor),z<H&&N<1&&F>2&&d>2&&!t.hidden?(z=H,F=0):z=d>1&&F>1&&N<6?D:0;for(;o<e;o++)if(v[o]&&!v[o]._lazyRace)if(B)if((g=v[o].getAttribute("data-expand"))&&(h=1*g)||(h=z),p!==h&&(C=innerWidth+h*L,R=innerHeight+h,f=-1*h,p=h),s=v[o].getBoundingClientRect(),(M=s.bottom)>=f&&(k=s.top)<=R&&($=s.right)>=f*L&&(O=s.left)<=C&&(M||$||O||k)&&(r.loadHidden||"hidden"!=x(v[o],"visibility"))&&(c&&N<3&&!g&&(d<3||F<4)||j(v[o],h))){if(Y(v[o]),l=!0,N>9)break}else!l&&c&&!u&&N<4&&F<4&&d>2&&(a[0]||r.preloadAfterLoad)&&(a[0]||!g&&(M||$||O||k||"auto"!=v[o].getAttribute(r.sizesAttr)))&&(u=a[0]||v[o]);else Y(v[o]);u&&!l&&Y(u)}},U=function(e){var t,n=0,i=r.throttleDelay,a=r.ricTimeout,s=function(){t=!1,n=o.now(),e()},c=l&&a>49?function(){l(s,{timeout:a}),a!==r.ricTimeout&&(a=r.ricTimeout)}:E(function(){u(s)},!0);return function(e){var r;(e=!0===e)&&(a=33),t||(t=!0,(r=i-(o.now()-n))<0&&(r=0),e||r<9?c():u(c,r))}}(V),q=function(e){v(e.target,r.loadedClass),m(e.target,r.loadingClass),b(e.target,Z),w(e.target,"lazyloaded")},G=E(q),Z=function(e){G({target:e.target})},J=function(e){var t,n=e.getAttribute(r.srcsetAttr);(t=r.customMedia[e.getAttribute("data-media")||e.getAttribute("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},X=E(function(e,t,n,i,o){var a,s,c,l,d,p;(d=w(e,"lazybeforeunveil",t)).defaultPrevented||(i&&(n?v(e,r.autosizesClass):e.setAttribute("sizes",i)),s=e.getAttribute(r.srcsetAttr),a=e.getAttribute(r.srcAttr),o&&(c=e.parentNode,l=c&&h.test(c.nodeName||"")),p=t.firesLoad||"src"in e&&(s||a||l),d={target:e},p&&(b(e,W,!0),clearTimeout(f),f=u(W,2500),v(e,r.loadingClass),b(e,Z,!0)),l&&g.call(c.getElementsByTagName("source"),J),s?e.setAttribute("srcset",s):a&&!l&&(A.test(e.nodeName)?function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}}(e,a):e.src=a),o&&(s||l)&&y(e,{src:a})),e._lazyRace&&delete e._lazyRace,m(e,r.lazyClass),S(function(){(!p||e.complete&&e.naturalWidth>1)&&(p?W(d):N--,q(d))},!0)}),Y=function(e){var t,n=I.test(e.nodeName),i=n&&(e.getAttribute(r.sizesAttr)||e.getAttribute("sizes")),o="auto"==i;(!o&&c||!n||!e.getAttribute("src")&&!e.srcset||e.complete||p(e,r.errorClass)||!p(e,r.lazyClass))&&(t=w(e,"lazyunveilread").detail,o&&P.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,N++,X(e,t,o,i,n))},K=function(){if(!c)if(o.now()-T<999)u(K,999);else{var e=_(function(){r.loadMode=3,U()});c=!0,r.loadMode=3,U(),s("scroll",function(){3==r.loadMode&&(r.loadMode=2),e()},!0)}};return{_:function(){T=o.now(),n.elements=t.getElementsByClassName(r.lazyClass),a=t.getElementsByClassName(r.lazyClass+" "+r.preloadClass),L=r.hFac,s("scroll",U,!0),s("resize",U,!0),e.MutationObserver?new MutationObserver(U).observe(i,{childList:!0,subtree:!0,attributes:!0}):(i.addEventListener("DOMNodeInserted",U,!0),i.addEventListener("DOMAttrModified",U,!0),setInterval(U,999)),s("hashchange",U,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t.addEventListener(e,U,!0)}),/d$|^c/.test(t.readyState)?K():(s("load",K),t.addEventListener("DOMContentLoaded",U),u(K,2e4)),n.elements.length?(V(),S._lsFlush()):U()},checkElems:U,unveil:Y}}(),P=function(){var e,n=E(function(e,t,n,r){var i,o,a;if(e._lazysizesWidth=r,r+="px",e.setAttribute("sizes",r),h.test(t.nodeName||""))for(i=t.getElementsByTagName("source"),o=0,a=i.length;o<a;o++)i[o].setAttribute("sizes",r);n.detail.dataAttr||y(e,n.detail)}),i=function(e,t,r){var i,o=e.parentNode;o&&(r=T(e,o,r),(i=w(e,"lazybeforesizes",{width:r,dataAttr:!!t})).defaultPrevented||(r=i.detail.width)&&r!==e._lazysizesWidth&&n(e,o,i,r))},o=_(function(){var t,n=e.length;if(n)for(t=0;t<n;t++)i(e[t])});return{_:function(){e=t.getElementsByClassName(r.autosizesClass),s("resize",o)},checkElems:o,updateElem:i}}(),R=function(){R.i||(R.i=!0,P._(),C._())};return n={cfg:r,autoSizer:P,loader:C,init:R,uP:y,aC:v,rC:m,hC:p,fire:w,gW:T,rAF:S}}(t,t.document);t.lazySizes=r,e.exports&&(e.exports=r)}(window)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;//! openseadragon 2.4.0
//! Built on 2018-07-20
//! Git commit: v2.4.0-0-446af4d
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}!function(e){e.version={versionStr:"2.4.0",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("0",10)};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,r=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null===e||void 0===e?String(e):t[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!r.call(t,"constructor")&&!r.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var i in t)n=i;return void 0===n||r.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=function(){var t=document.createElement("canvas");return!(!e.isFunction(t.getContext)||!t.getContext("2d"))}(),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(n,1)/r}return 1}()}(OpenSeadragon),function($){$.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=arguments.length,u=!1,c=1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},c=2),"object"==typeof a||OpenSeadragon.isFunction(a)||(a={}),s===c&&(a=this,--c);c<s;c++)if(null!==(e=arguments[c])||void 0!==e)for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(OpenSeadragon.isPlainObject(r)||(i=OpenSeadragon.isArray(r)))?(i?(i=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},a[t]=OpenSeadragon.extend(u,o,r)):void 0!==r&&(a[t]=r));return a};var isIOSDevice=function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,r=new $.Point;for(n=getOffsetParent(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position);n;)r.x+=e.offsetLeft,r.y+=e.offsetTop,t&&(r=r.plus($.getPageScroll())),n=getOffsetParent(e=n,t="fixed"==$.getElementStyle(e).position);return r},getElementOffset:function(e){var t,n,r=(e=$.getElement(e))&&e.ownerDocument,i={top:0,left:0};return r?(t=r.documentElement,void 0!==e.getBoundingClientRect&&(i=e.getBoundingClientRect()),n=r==r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new $.Point(i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return(e=$.getElement(e)).currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var t={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==t[e])return t[e];var n=document.createElement("div").style,r=null;if(void 0!==n[e])r=e;else for(var i=["Webkit","Moz","MS","O","webkit","moz","ms","o"],o=$.capitalizeFirstLetter(e),a=0;a<i.length;a++){var s=i[a]+o;if(void 0!==n[s]){r=s;break}}return t[e]=r,r},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),r=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+r.x&&t.y<n.y+r.y&&t.y>=n.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if(void 0!==window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,(n=$.getPageScroll()).x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return(n=$.makeNeutralElement("span")).style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var r;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(r="alpha(opacity="+Math.round(100*t)+")",e.style.filter=r):e.style.filter=""},setElementTouchActionNone:function(e){void 0!==(e=$.getElement(e)).style.touchAction?e.style.touchAction="none":void 0!==e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){(e=$.getElement(e)).className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var r,i,o=n||0;if(!e)throw new TypeError;if(0===(i=e.length)||o>=i)return-1;for(o<0&&(o=i-Math.abs(o)),r=o;r<i;r++)if(e[r]===t)return r;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,r,i=[];for(n=(e=$.getElement(e)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==t&&i.push(n[r]);e.className=i.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,r){(e=$.getElement(e)).addEventListener(t,n,r)};if(window.attachEvent)return function(e,t,n,r){(e=$.getElement(e)).attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,r){(e=$.getElement(e)).removeEventListener(t,n,r)};if(window.detachEvent)return function(e,t,n,r){(e=$.getElement(e)).detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){(e=$.getEvent(e)).preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){(e=$.getEvent(e)).cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){(e=$.getEvent(e)).stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){(e=$.getEvent(e)).cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var n,r=[];for(n=2;n<arguments.length;n++)r.push(arguments[n]);return function(){var n,i=r.concat([]);for(n=0;n<arguments.length;n++)i.push(arguments[n]);return t.apply(e,i)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,n){var r,i,o;$.isPlainObject(e)&&(t=e.success,n=e.error,r=e.withCredentials,i=e.headers,o=e.responseType||null,e=e.url);var a=$.getUrlProtocol(e),s=$.createAjaxRequest("file:"===a);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=function(){},s.status>=200&&s.status<300||0===s.status&&"http:"!==a&&"https:"!==a?t(s):($.console.log("AJAX request returned %d: %s",s.status,e),$.isFunction(n)&&n(s)))};try{if(s.open("GET",e,!0),o&&(s.responseType=o),i)for(var u in i)i.hasOwnProperty(u)&&i[u]&&s.setRequestHeader(u,i[u]);r&&(s.withCredentials=!0),s.send(null)}catch(r){var c=r.message;if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10&&void 0!==r.number&&-2147024891==r.number&&(c+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",r.name,c),s.onreadystatechange=function(){},window.XDomainRequest){var l=new XDomainRequest;if(l){l.onload=function(e){$.isFunction(t)&&t({responseText:l.responseText,status:200,statusText:"OK"})},l.onerror=function(e){$.isFunction(n)&&n({responseText:l.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{l.open("GET",e),l.send()}catch(e){$.isFunction(n)&&n(s,r)}}}else $.isFunction(n)&&n(s,r)}return s},jsonp:function(e){var t,n=e.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=e.callbackName||"openseadragon"+$.now(),o=window[i],a="$1"+i+"$2",s=e.param||"callback",u=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,a),n+=(/\?/.test(n)?"&":"?")+s+"="+i,window[i]=function(e){if(o)window[i]=o;else try{delete window[i]}catch(e){}u&&$.isFunction(u)&&u(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=n,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,r&&t.parentNode&&r.removeChild(t),t=void 0)},r.insertBefore(t,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return!!FILEFORMATS[(e=e||"").toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var e=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(t.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):t.indexOf("Safari")>=0?($.Browser.vendor=t.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var n,r,i,o=window.location.search.substring(1).split("&");for(i=0;i<o.length;i++)(r=(n=o[i]).indexOf("="))>0&&(URLPARAMS[n.substring(0,r)]=decodeURIComponent(n.substring(r+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(e){};function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var r,i=[],o=[],a=0;$.requestAnimationFrame=function(e){return i.push([++a,e]),r||(r=setInterval(function(){if(i.length){var e=$.now(),t=o;for(o=i,i=t;o.length;)o.shift()[1](e)}else clearInterval(r),r=void 0},20)),a},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=i.length;t<n;t+=1)if(i[t][0]===e)return void i.splice(t,1);for(t=0,n=o.length;t<n;t+=1)if(o[t][0]===e)return void o.splice(t,1)}}}(window)}(OpenSeadragon),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return OpenSeadragon})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(e){return e.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,n,r){var i=this;r=r||1;var o=0,a=function(n){++o===r&&i.removeHandler(e,a),t(n)};this.addHandler(e,a,n)},addHandler:function(t,n,r){var i=this.events[t];i||(this.events[t]=i=[]),n&&e.isFunction(n)&&(i[i.length]={handler:n,userData:r||null})},removeHandler:function(t,n){var r,i=this.events[t],o=[];if(i&&e.isArray(i)){for(r=0;r<i.length;r++)i[r].handler!==n&&o.push(i[r]);this.events[t]=o}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var r,i=t.length;for(r=0;r<i;r++)t[r]&&(n.eventSource=e,n.userData=t[r].userData,t[r].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&(t||(t={}),n(this,t))}}}(OpenSeadragon),function(e){var t=[],n={};function r(t){var r,i=n[t.hash],o=i.activePointersLists.length;for(r=0;r<o;r++)i.activePointersLists[r].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",i.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",i.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",i.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",i.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",i.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",i.touchendcaptured,!0),i.activePointersLists[r].captureCount=0);for(r=0;r<o;r++)i.activePointersLists.pop()}function i(t){var i,o,a=n[t.hash];if(a.tracking){for(o=0;o<e.MouseTracker.subscribeEvents.length;o++)i=e.MouseTracker.subscribeEvents[o],e.removeEvent(t.element,i,a[i],!1);r(t),a.tracking=!1}}function o(t,r){var i=n[t.hash];if("pointerevent"===r)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:i.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:i.pointermovecaptured};if("mouse"===r)return{upName:"mouseup",upHandler:i.mouseupcaptured,moveName:"mousemove",moveHandler:i.mousemovecaptured};if("touch"===r)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function a(t,n,r){var i,a=t.getActivePointersListByType(n);a.captureCount+=r||1,1===a.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(i=o(t,e.MouseTracker.havePointerEvents?"pointerevent":n),z&&N(window.top)&&e.addEvent(window.top,i.upName,i.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,i.upName,i.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,i.moveName,i.moveHandler,!0)))}function s(t,n,r){var i,a=t.getActivePointersListByType(n);a.captureCount-=r||1,0===a.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(i=o(t,e.MouseTracker.havePointerEvents?"pointerevent":n),z&&N(window.top)&&e.removeEvent(window.top,i.upName,i.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,i.moveName,i.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,i.upName,i.upHandler,!0)))}function u(t){var n;if(e.MouseTracker.unprefixedPointerEvents)n=t.pointerType;else switch(t.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function c(t){return e.getMousePosition(t)}function l(e,t){return h(c(e),t)}function h(t,n){var r=e.getElementOffset(n);return t.minus(r)}function f(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function d(t,n){var r={target:(n=e.getEvent(n)).target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?r.deltaY=-n.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:r.deltaY=n.detail,g(t,r,n)}function g(t,n,r){var i;i=n.deltaY<0?1:-1,t.scrollHandler&&!1===t.scrollHandler({eventSource:t,pointerType:"mouse",position:l(n,t.element),scroll:i,shift:n.shiftKey,isTouchEvent:!1,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r)}function p(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function v(t,n){H(t,n,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:c(n),currentTime:e.now()}])}function m(t,n){L(t,n,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:c(n),currentTime:e.now()}])}function b(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function w(t,n){A(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:c(n),currentTime:e.now()}],b(n.button))&&s(t,"mouse")}function y(t,n){B(t,n=e.getEvent(n),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:c(n),currentTime:e.now()}])}function x(e,t,n){var r,i=n.getLength(),o=[];if("touch"===n.type||n.contacts>0){for(r=0;r<i;r++)o.push(n.getByIndex(r));o.length>0&&(A(e,t,o,0),n.captureCount=1,s(e,n.type),L(e,t,o))}}function T(n,r){var i,o,a,u,l=r.changedTouches.length,h=[];for(i=e.now(),o=0;o<l;o++)h.push({id:r.changedTouches[o].identifier,type:"touch",currentPos:c(r.changedTouches[o]),currentTime:i});for(A(n,r,h,0)&&s(n,"touch",l),L(n,r,h),o=0;o<t.length;o++)if(t[o]!==n&&t[o].isTracking()&&p(t[o].element,n.element)){for(u=[],a=0;a<l;a++)u.push({id:r.changedTouches[a].identifier,type:"touch",currentPos:c(r.changedTouches[a]),currentTime:i});L(t[o],r,u)}e.cancelEvent(r)}function S(t,n){var r,i=n.changedTouches.length,o=[];for(r=0;r<i;r++)o.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:c(n.changedTouches[r]),currentTime:e.now()});B(t,n,o),e.cancelEvent(n)}function E(t,n){n.currentTarget===n.relatedTarget||p(n.currentTarget,n.relatedTarget)||H(t,n,[{id:n.pointerId,type:u(n),isPrimary:n.isPrimary,currentPos:c(n),currentTime:e.now()}])}function _(t,n){n.currentTarget===n.relatedTarget||p(n.currentTarget,n.relatedTarget)||L(t,n,[{id:n.pointerId,type:u(n),isPrimary:n.isPrimary,currentPos:c(n),currentTime:e.now()}])}function C(t,n){var r;I(t,n,[r={id:n.pointerId,type:u(n),isPrimary:n.isPrimary,currentPos:c(n),currentTime:e.now()}],n.button)&&(e.stopEvent(n),a(t,r.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(n)}function P(e,t){R(e,t)}function R(t,n){var r;A(t,n,[r={id:n.pointerId,type:u(n),isPrimary:n.isPrimary,currentPos:c(n),currentTime:e.now()}],n.button)&&s(t,r.type)}function k(e,t){O(e,t)}function O(t,n){B(t,n,[{id:n.pointerId,type:u(n),isPrimary:n.isPrimary,currentPos:c(n),currentTime:e.now()}])}function $(e,t){!function(e,t,n){A(e,t,n,0),L(e,t,n)}(e,t,[{id:t.pointerId,type:u(t)}])}function M(e,t){return t.hasOwnProperty("isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function D(e,t){var n,r;return e.getById(t.id)?(n=e.removeById(t.id),t.hasOwnProperty("isPrimary")||(r=e.getPrimary())||(r=e.getByIndex(0))&&(r.isPrimary=!0)):n=e.getLength(),n}function H(t,n,r){var i,o,a,s=t.getActivePointersListByType(r[0].type),u=r.length;for(i=0;i<u;i++)o=r[i],(a=s.getById(o.id))?(a.insideElement=!0,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime,o=a):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,M(s,o)),t.enterHandler&&!1===t.enterHandler({eventSource:t,pointerType:o.type,position:h(o.currentPos,t.element),buttons:s.buttons,pointers:t.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function L(t,n,r){var i,o,a,s=t.getActivePointersListByType(r[0].type),u=r.length;for(i=0;i<u;i++)o=r[i],(a=s.getById(o.id))&&(a.captured?(a.insideElement=!1,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=o.currentPos,a.currentTime=o.currentTime):D(s,a),o=a),t.exitHandler&&!1===t.exitHandler({eventSource:t,pointerType:o.type,position:h(o.currentPos,t.element),buttons:s.buttons,pointers:t.getActivePointerCount(),insideElementPressed:!!a&&a.insideElementPressed,buttonDownAny:0!==s.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function I(t,r,i,o){var a,s,u,c=n[t.hash],l=t.getActivePointersListByType(i[0].type),d=i.length;void 0!==r.buttons?l.buttons=r.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?l.buttons+=1:1===o?l.buttons+=4:2===o?l.buttons+=2:3===o?l.buttons+=8:4===o?l.buttons+=16:5===o&&(l.buttons+=32):0===o?l.buttons|=1:1===o?l.buttons|=4:2===o?l.buttons|=2:3===o?l.buttons|=8:4===o?l.buttons|=16:5===o&&(l.buttons|=32);var g=t.getActivePointersListsExceptType(i[0].type);for(a=0;a<g.length;a++)x(t,r,g[a]);if(0!==o)return t.nonPrimaryPressHandler&&!1===t.nonPrimaryPressHandler({eventSource:t,pointerType:i[0].type,position:h(i[0].currentPos,t.element),button:o,buttons:l.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r),!1;for(a=0;a<d;a++)s=i[a],(u=l.getById(s.id))?(u.captured=!0,u.insideElementPressed=!0,u.insideElement=!0,u.contactPos=s.currentPos,u.contactTime=s.currentTime,u.lastPos=u.currentPos,u.lastTime=u.currentTime,u.currentPos=s.currentPos,u.currentTime=s.currentTime,s=u):(s.captured=!0,s.insideElementPressed=!0,s.insideElement=!0,M(l,s)),l.addContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,s),1===l.contacts?t.pressHandler&&!1===t.pressHandler({eventSource:t,pointerType:s.type,position:h(s.contactPos,t.element),buttons:l.buttons,isTouchEvent:"touch"===s.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r):2===l.contacts&&t.pinchHandler&&"touch"===s.type&&(c.pinchGPoints=l.asArray(),c.lastPinchDist=c.currentPinchDist=c.pinchGPoints[0].currentPos.distanceTo(c.pinchGPoints[1].currentPos),c.lastPinchCenter=c.currentPinchCenter=f(c.pinchGPoints[0].currentPos,c.pinchGPoints[1].currentPos));return!0}function A(t,r,i,o){var a,s,u,c,l,d,g=n[t.hash],p=t.getActivePointersListByType(i[0].type),v=i.length,m=!1,b=!1;if(void 0!==r.buttons?p.buttons=r.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?p.buttons-=1:1===o?p.buttons-=4:2===o?p.buttons-=2:3===o?p.buttons-=8:4===o?p.buttons-=16:5===o&&(p.buttons-=32):0===o?p.buttons^=-2:1===o?p.buttons^=-5:2===o?p.buttons^=-3:3===o?p.buttons^=-9:4===o?p.buttons^=-17:5===o&&(p.buttons^=-33),0!==o)return t.nonPrimaryReleaseHandler&&!1===t.nonPrimaryReleaseHandler({eventSource:t,pointerType:i[0].type,position:h(i[0].currentPos,t.element),button:o,buttons:p.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r),x(t,r,t.getActivePointersListByType("mouse")),!1;for(u=0;u<v;u++)c=i[u],(l=p.getById(c.id))&&(l.captured&&(l.captured=!1,m=!0,b=!0),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=c.currentPos,l.currentTime=c.currentTime,l.insideElement||D(p,l),a=l.currentPos,s=l.currentTime,b?(p.removeContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,l),0===p.contacts?(t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:l.type,position:h(a,t.element),buttons:p.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r),t.dragEndHandler&&!l.currentPos.equals(l.contactPos)&&!1===t.dragEndHandler({eventSource:t,pointerType:l.type,position:h(l.currentPos,t.element),speed:l.speed,direction:l.direction,shift:r.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r),(t.clickHandler||t.dblClickHandler)&&l.insideElement&&(d=s-l.contactTime<=t.clickTimeThreshold&&l.contactPos.distanceTo(a)<=t.clickDistThreshold,t.clickHandler&&!1===t.clickHandler({eventSource:t,pointerType:l.type,position:h(l.currentPos,t.element),quick:d,shift:r.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r),t.dblClickHandler&&d&&(p.clicks++,1===p.clicks?(g.lastClickPos=a,g.dblClickTimeOut=setTimeout(function(){p.clicks=0},t.dblClickTimeThreshold)):2===p.clicks&&(clearTimeout(g.dblClickTimeOut),p.clicks=0,g.lastClickPos.distanceTo(a)<=t.dblClickDistThreshold&&!1===t.dblClickHandler({eventSource:t,pointerType:l.type,position:h(l.currentPos,t.element),shift:r.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r),g.lastClickPos=null)))):2===p.contacts&&t.pinchHandler&&"touch"===l.type&&(g.pinchGPoints=p.asArray(),g.lastPinchDist=g.currentPinchDist=g.pinchGPoints[0].currentPos.distanceTo(g.pinchGPoints[1].currentPos),g.lastPinchCenter=g.currentPinchCenter=f(g.pinchGPoints[0].currentPos,g.pinchGPoints[1].currentPos))):t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:l.type,position:h(a,t.element),buttons:p.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r));return m}function B(t,r,i){var o,a,s,u,c,d=n[t.hash],g=t.getActivePointersListByType(i[0].type),p=i.length;for(void 0!==r.buttons&&(g.buttons=r.buttons),o=0;o<p;o++)a=i[o],(s=g.getById(a.id))?(a.hasOwnProperty("isPrimary")&&(s.isPrimary=a.isPrimary),s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=a.currentPos,s.currentTime=a.currentTime):(a.captured=!1,a.insideElementPressed=!1,a.insideElement=!0,M(g,a));t.stopHandler&&"mouse"===i[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout(function(){!function(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:l(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}(t,r,i[0].type)},t.stopDelay)),0===g.contacts?t.moveHandler&&!1===t.moveHandler({eventSource:t,pointerType:i[0].type,position:h(i[0].currentPos,t.element),buttons:g.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r):1===g.contacts?(t.moveHandler&&(s=g.asArray()[0],!1===t.moveHandler({eventSource:t,pointerType:s.type,position:h(s.currentPos,t.element),buttons:g.buttons,isTouchEvent:"touch"===s.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r)),t.dragHandler&&(c=(s=g.asArray()[0]).currentPos.minus(s.lastPos),!1===t.dragHandler({eventSource:t,pointerType:s.type,position:h(s.currentPos,t.element),buttons:g.buttons,delta:c,speed:s.speed,direction:s.direction,shift:r.shiftKey,isTouchEvent:"touch"===s.type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r))):2===g.contacts&&(t.moveHandler&&(u=g.asArray(),!1===t.moveHandler({eventSource:t,pointerType:u[0].type,position:h(f(u[0].currentPos,u[1].currentPos),t.element),buttons:g.buttons,isTouchEvent:"touch"===u[0].type,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r)),t.pinchHandler&&"touch"===i[0].type&&(c=d.pinchGPoints[0].currentPos.distanceTo(d.pinchGPoints[1].currentPos))!=d.currentPinchDist&&(d.lastPinchDist=d.currentPinchDist,d.currentPinchDist=c,d.lastPinchCenter=d.currentPinchCenter,d.currentPinchCenter=f(d.pinchGPoints[0].currentPos,d.pinchGPoints[1].currentPos),!1===t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:d.pinchGPoints,lastCenter:h(d.lastPinchCenter,t.element),center:h(d.currentPinchCenter,t.element),lastDistance:d.lastPinchDist,distance:d.currentPinchDist,shift:r.shiftKey,originalEvent:r,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(r)))}e.MouseTracker=function(r){t.push(this);var i=arguments;e.isPlainObject(r)||(r={element:i[0],clickTimeThreshold:i[1],clickDistThreshold:i[2]}),this.hash=Math.random(),this.element=e.getElement(r.element),this.clickTimeThreshold=r.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=r.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=r.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=r.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=r.userData||null,this.stopDelay=r.stopDelay||50,this.enterHandler=r.enterHandler||null,this.exitHandler=r.exitHandler||null,this.pressHandler=r.pressHandler||null,this.nonPrimaryPressHandler=r.nonPrimaryPressHandler||null,this.releaseHandler=r.releaseHandler||null,this.nonPrimaryReleaseHandler=r.nonPrimaryReleaseHandler||null,this.moveHandler=r.moveHandler||null,this.scrollHandler=r.scrollHandler||null,this.clickHandler=r.clickHandler||null,this.dblClickHandler=r.dblClickHandler||null,this.dragHandler=r.dragHandler||null,this.dragEndHandler=r.dragEndHandler||null,this.pinchHandler=r.pinchHandler||null,this.stopHandler=r.stopHandler||null,this.keyDownHandler=r.keyDownHandler||null,this.keyUpHandler=r.keyUpHandler||null,this.keyHandler=r.keyHandler||null,this.focusHandler=r.focusHandler||null,this.blurHandler=r.blurHandler||null;var o=this;n[this.hash]={click:function(t){!function(t,n){t.clickHandler&&e.cancelEvent(n)}(o,t)},dblclick:function(t){!function(t,n){t.dblClickHandler&&e.cancelEvent(n)}(o,t)},keydown:function(t){!function(t,n){t.keyDownHandler&&(n=e.getEvent(n),t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}(o,t)},keyup:function(t){!function(t,n){t.keyUpHandler&&(n=e.getEvent(n),t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}(o,t)},keypress:function(t){!function(t,n){t.keyHandler&&(n=e.getEvent(n),t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(n))}(o,t)},focus:function(t){!function(t,n){t.focusHandler&&(n=e.getEvent(n),!1===t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))}(o,t)},blur:function(t){!function(t,n){t.blurHandler&&(n=e.getEvent(n),!1===t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n))}(o,t)},wheel:function(e){!function(e,t){g(e,t,t)}(o,e)},mousewheel:function(e){d(o,e)},DOMMouseScroll:function(e){d(o,e)},MozMousePixelScroll:function(e){d(o,e)},mouseenter:function(t){!function(t,n){n=e.getEvent(n),v(t,n)}(o,t)},mouseleave:function(t){!function(t,n){n=e.getEvent(n),m(t,n)}(o,t)},mouseover:function(t){!function(t,n){if((n=e.getEvent(n)).currentTarget===n.relatedTarget||p(n.currentTarget,n.relatedTarget))return;v(t,n)}(o,t)},mouseout:function(t){!function(t,n){if((n=e.getEvent(n)).currentTarget===n.relatedTarget||p(n.currentTarget,n.relatedTarget))return;m(t,n)}(o,t)},mousedown:function(t){!function(t,n){var r;n=e.getEvent(n),r={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:c(n),currentTime:e.now()},I(t,n,[r],b(n.button))&&(e.stopEvent(n),a(t,"mouse"));(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(n)}(o,t)},mouseup:function(e){!function(e,t){w(e,t)}(o,e)},mouseupcaptured:function(t){!function(t,n){w(t,n),e.stopEvent(n)}(o,t)},mousemove:function(e){!function(e,t){y(e,t)}(o,e)},mousemovecaptured:function(t){!function(t,n){y(t,n),e.stopEvent(n)}(o,t)},touchstart:function(n){!function(n,r){var i,o,s,u,l=r.changedTouches.length,h=[],f=n.getActivePointersListByType("touch");i=e.now(),f.getLength()>r.touches.length-l&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),x(n,r,f));for(o=0;o<l;o++)h.push({id:r.changedTouches[o].identifier,type:"touch",currentPos:c(r.changedTouches[o]),currentTime:i});for(H(n,r,h),o=0;o<t.length;o++)if(t[o]!==n&&t[o].isTracking()&&p(t[o].element,n.element)){for(u=[],s=0;s<l;s++)u.push({id:r.changedTouches[s].identifier,type:"touch",currentPos:c(r.changedTouches[s]),currentTime:i});H(t[o],r,u)}I(n,r,h,0)&&(e.stopEvent(r),a(n,"touch",l));e.cancelEvent(r)}(o,n)},touchend:function(e){!function(e,t){T(e,t)}(o,e)},touchendcaptured:function(t){!function(t,n){T(t,n),e.stopEvent(n)}(o,t)},touchmove:function(e){!function(e,t){S(e,t)}(o,e)},touchmovecaptured:function(t){!function(t,n){S(t,n),e.stopEvent(n)}(o,t)},touchcancel:function(e){!function(e,t){var n=e.getActivePointersListByType("touch");x(e,t,n)}(o,e)},gesturestart:function(e){!function(e,t){t.stopPropagation(),t.preventDefault()}(0,e)},gesturechange:function(e){!function(e,t){t.stopPropagation(),t.preventDefault()}(0,e)},pointerover:function(e){E(o,e)},MSPointerOver:function(e){E(o,e)},pointerout:function(e){_(o,e)},MSPointerOut:function(e){_(o,e)},pointerdown:function(e){C(o,e)},MSPointerDown:function(e){C(o,e)},pointerup:function(e){P(o,e)},MSPointerUp:function(e){P(o,e)},pointermove:function(e){k(o,e)},MSPointerMove:function(e){k(o,e)},pointercancel:function(e){$(o,e)},MSPointerCancel:function(e){$(o,e)},pointerupcaptured:function(t){!function(t,n){t.getActivePointersListByType(u(n)).getById(n.pointerId)&&R(t,n);e.stopEvent(n)}(o,t)},pointermovecaptured:function(t){!function(t,n){t.getActivePointersListByType(u(n)).getById(n.pointerId)&&O(t,n);e.stopEvent(n)}(o,t)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},r.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(i(this),this.element=null,e=0;e<t.length;e++)if(t[e]===this){t.splice(e,1);break}n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(t){return t?function(t){var i,o,a=n[t.hash];if(!a.tracking){for(o=0;o<e.MouseTracker.subscribeEvents.length;o++)i=e.MouseTracker.subscribeEvents[o],e.addEvent(t.element,i,a[i],!1);r(t),a.tracking=!0}}(this):i(this),this},getActivePointersListsExceptType:function(e){for(var t=n[this.hash],r=[],i=0;i<t.activePointersLists.length;++i)t.activePointersLists[i].type!==e&&r.push(t.activePointersLists[i]);return r},getActivePointersListByType:function(t){var r,i,o=n[this.hash],a=o.activePointersLists.length;for(r=0;r<a;r++)if(o.activePointersLists[r].type===t)return o.activePointersLists[r];return i=new e.MouseTracker.GesturePointList(t),o.activePointersLists.push(i),i},getActivePointerCount:function(){var e,t=n[this.hash],r=t.activePointersLists.length,i=0;for(e=0;e<r;e++)i+=t.activePointersLists[e].getLength();return i},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<t.length;e++)t[e].isTracking()&&(t[e].setTracking(!1),t[e].setTracking(!0))},e.MouseTracker.gesturePointVelocityTracker=function(){var t=[],n=0,r=0,i=function(e,t){return e.hash.toString()+t.type+t.id.toString()},o=function(){var n,i,o,a,s,u,c=t.length,l=e.now();for(a=l-r,r=l,n=0;n<c;n++)(o=(i=t[n]).gPoint).direction=Math.atan2(o.currentPos.y-i.lastPos.y,o.currentPos.x-i.lastPos.x),s=i.lastPos.distanceTo(o.currentPos),i.lastPos=o.currentPos,u=1e3*s/(a+1),o.speed=.75*u+.25*o.speed};return{addPoint:function(a,s){var u=i(a,s);t.push({guid:u,gPoint:s,lastPos:s.currentPos}),1===t.length&&(r=e.now(),n=window.setInterval(o,50))},removePoint:function(e,r){var o,a=i(e,r),s=t.length;for(o=0;o<s;o++)if(t[o].guid===a){t.splice(o,1),0==--s&&window.clearInterval(n);break}}}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var z=function(){try{return window.self!==window.top}catch(e){return!0}}();function N(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,r){var i=t.parentNode;"number"==typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=void 0===n.attachToViewer||n.attachToViewer,this.autoFade=void 0===n.autoFade||n.autoFade,this.element=t,this.anchor=n.anchor,this.container=r,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):i.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var n,r=e.controls;for(n=r.length-1;n>=0;n--)if(r[n].element==t)return n;return-1}e.ControlDock=function(t){var n,r,i=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),r=0;r<i.length;r++)n=i[r],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,r){var i=null;if(!(t(this,n=e.getElement(n))>=0)){switch(r.anchor){case e.ControlAnchor.TOP_RIGHT:i=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:i=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:i=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:i=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:i=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:i=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,r,i)),n.style.display="inline-block"}},removeControl:function(n){var r=t(this,n=e.getElement(n));return r>=0&&(this.controls[r].destroy(),this.controls.splice(r,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(e){var t={},n=1;function r(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function i(t,n){if(n instanceof e.Overlay)return n;var r=null;if(n.element)r=e.getElement(n.element);else{var i=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(r=e.getElement(n.id))||((r=document.createElement("a")).href="#/overlay/"+i),r.id=i,e.addClass(r,n.className?n.className:"openseadragon-overlay")}var o=n.location,a=n.width,s=n.height;if(!o){var u=n.x,c=n.y;if(void 0!==n.px){var l=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,a||0,s||0));u=l.x,c=l.y,a=void 0!==a?l.width:void 0,s=void 0!==s?l.height:void 0}o=new e.Point(u,c)}var h=n.placement;return h&&"string"===e.type(h)&&(h=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:r,location:o,placement:h,onDraw:n.onDraw,checkResize:n.checkResize,width:a,height:s,rotationMode:n.rotationMode})}function o(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function a(t,n){return e.requestAnimationFrame(function(){n(t)})}function s(t){e.requestAnimationFrame(function(){!function(t){var n,r,i,o;if(t.controlsShouldFade){for(n=e.now(),r=n-t.controlsFadeBeginTime,i=1-r/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),o=t.controls.length-1;o>=0;o--)t.controls[o].autoFade&&t.controls[o].setOpacity(i);i>0&&s(t)}}(t)})}function u(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout(function(){s(t)},t.controlsFadeDelay))}function c(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function l(){c(this)}function h(){u(this)}function f(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function d(t){var n={originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction,preventVerticalPan:t.preventVerticalPan,preventHorizontalPan:t.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return n.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(this.viewport.degrees-90):this.viewport.setRotation(this.viewport.degrees+90),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(this.viewport.degrees+90):this.viewport.setRotation(this.viewport.degrees-90),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function g(e){var t;document.activeElement==this.canvas||this.canvas.focus(),this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",n),!n.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType)).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function p(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function v(e){var t,n={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var r=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=r.x,this.viewport.centerSpringY.target.value+=r.y;var i=this.viewport.getBounds(),o=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=r.x,this.viewport.centerSpringY.target.value-=r.y,i.x!=o.x&&(e.delta.x=0),i.y!=o.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function m(t){if(!t.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(t.pointerType);if(n.flickEnabled&&t.speed>=n.flickMinSpeed){var r=0;this.panHorizontal&&(r=n.flickMomentum*t.speed*Math.cos(t.direction));var i=0;this.panVertical&&(i=n.flickMomentum*t.speed*Math.sin(t.direction));var o=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),a=this.viewport.pointFromPixel(new e.Point(o.x-r,o.y-i));this.viewport.panTo(a,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function b(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(t){window.location!=window.parent.location&&e.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function y(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function x(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function T(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){var t,n,r;if(!e.preventDefaultAction&&this.viewport&&((t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),r=this.viewport.pointFromPixel(e.lastCenter,!0).minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),t.zoomToRefPoint&&this.viewport.panBy(r,!0),this.viewport.applyConstraints()),t.pinchRotate)){var i=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),o=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(i-o)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function _(t){var n,r,i;if((i=e.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=i,this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),!t.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(r,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),n&&n.scrollToZoom)return!1}else if((n=this.gestureSettingsByDeviceType(t.pointerType))&&n.scrollToZoom)return!1}function C(e){t[this.hash].mouseInside=!0,c(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function P(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||u(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function R(e){!function(e){if(e._opening)return;if(e.autoResize){var n=r(e.container),i=t[e.hash].prevContainerSize;if(!n.equals(i)){var o=e.viewport;if(e.preserveImageSizeOnResize){var a=i.x/n.x,s=o.getZoom()*a,l=o.getCenter();o.resize(n,!1),o.zoomTo(s,null,!0),o.panTo(l,!0)}else{var h=o.getBounds();o.resize(n,!0),o.fitBoundsWithConstraints(h,!0)}t[e.hash].prevContainerSize=n,t[e.hash].forceRedraw=!0}}var f=e.viewport.update(),d=e.world.update()||f;f&&e.raiseEvent("viewport-change");e.referenceStrip&&(d=e.referenceStrip.update(e.viewport)||d);!t[e.hash].animating&&d&&(e.raiseEvent("animation-start"),c(e));(d||t[e.hash].forceRedraw||e.world.needsDraw())&&(!function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),t[e.hash].forceRedraw=!1,d&&e.raiseEvent("animation"));t[e.hash].animating&&!d&&(e.raiseEvent("animation-finish"),t[e.hash].mouseInside||u(e));t[e.hash].animating=d}(e),e.isOpen()?e._updateRequestId=a(e,R):e._updateRequestId=!1}function k(e,t){return e?e+t:t}function O(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,D(this)}function $(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,D(this)}function M(){t[this.hash].zooming=!1}function D(t){e.requestAnimationFrame(e.delegate(t,H))}function H(){var n,r,i;t[this.hash].zooming&&this.viewport&&(r=(n=e.now())-t[this.hash].lastZoomTime,i=Math.pow(t[this.hash].zoomFactor,r/1e3),this.viewport.zoomBy(i),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=n,D(this))}function L(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function I(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function A(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function B(){this.viewport&&this.viewport.goHome()}function z(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function N(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t+90,360):e.positiveModulo(t-90,360),this.viewport.setRotation(t)}}function F(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t-90,360):e.positiveModulo(t+90,360),this.viewport.setRotation(t)}}function W(){this.viewport.toggleFlip()}function j(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function V(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}e.Viewer=function(i){var o,s=arguments,c=this;if(e.isPlainObject(i)||(i={id:s[0],xmlPath:s.length>1?s[1]:void 0,prefixUrl:s.length>2?s[2]:void 0,controls:s.length>3?s[3]:void 0,overlays:s.length>4?s[4]:void 0}),i.config&&(e.extend(!0,i,i.config),delete i.config),e.extend(!0,this,{id:i.id,hash:i.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,i),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);c._showMessage(n)}),e.ControlDock.call(this,i),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(e){e.width="100%",e.height="100%",e.overflow="hidden",e.position="absolute",e.top="0px",e.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),""!==i.tabIndex&&(this.canvas.tabIndex=void 0===i.tabIndex?0:i.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,f),keyHandler:e.delegate(this,d),clickHandler:e.delegate(this,g),dblClickHandler:e.delegate(this,p),dragHandler:e.delegate(this,v),dragEndHandler:e.delegate(this,m),enterHandler:e.delegate(this,b),exitHandler:e.delegate(this,w),pressHandler:e.delegate(this,y),releaseHandler:e.delegate(this,x),nonPrimaryPressHandler:e.delegate(this,T),nonPrimaryReleaseHandler:e.delegate(this,S),scrollHandler:e.delegate(this,_),pinchHandler:e.delegate(this,E)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,C),exitHandler:e.delegate(this,P)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=r(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(e){c.source=c.world.getItemAt(0).source,t[c.hash].forceRedraw=!0,c._updateRequestId||(c._updateRequestId=a(c,R))}),this.world.addHandler("remove-item",function(e){c.world.getItemCount()?c.source=c.world.getItemAt(0).source:c.source=null,t[c.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(e){c.viewport&&c.viewport._setContentBounds(c.world.getHomeBounds(),c.world.getContentFactor())}),this.world.addHandler("item-index-change",function(e){c.source=c.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:i.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(o=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(o,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(o=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(o,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),o=0;o<this.customControls.length;o++)this.addControl(this.customControls[o].id,{anchor:this.customControls[o].anchor});e.requestAnimationFrame(function(){u(c)})},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t,n){var r=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===n||isNaN(n)||(this.initialPage=n),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var o,a=t.length,s=0,u=0,c=function(){if(s+u===a)if(s){!r._firstOpen&&r.preserveViewport||(r.viewport.goHome(!0),r.viewport.update()),r._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),r.overlays&&!r.preserveOverlays)for(var n=0;n<r.overlays.length;n++)r.currentOverlays[n]=i(r,r.overlays[n]);r._drawOverlays(),r._opening=!1,r.raiseEvent("open",{source:e})}else r._opening=!1,r.raiseEvent("open-failed",o)},l=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var n=t.success;t.success=function(e){if(s++,t.tileSource.overlays)for(var i=0;i<t.tileSource.overlays.length;i++)r.addOverlay(t.tileSource.overlays[i]);n&&n(e),c()};var i=t.error;t.error=function(e){u++,o||(o=e),i&&i(e),c()},r.addTiledImage(t)},h=0;h<t.length;h++)l(t[h]);return this}}},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisibile();return t},setControlsEnabled:function(e){return e?c(this):u(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(n){var r,i,o=document.body,a=o.style,s=document.documentElement.style,u=this;if(n==this.isFullPage())return this;var c={fullPage:n,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",c),c.preventDefaultAction)return this;if(n){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=a.margin,this.docMargin=s.margin,a.margin="0",s.margin="0",this.bodyPadding=a.padding,this.docPadding=s.padding,a.padding="0",s.padding="0",this.bodyWidth=a.width,this.docWidth=s.width,a.width="100%",s.width="100%",this.bodyHeight=a.height,this.docHeight=s.height,a.height="100%",s.height="100%",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,r=o.childNodes.length,i=0;i<r;i++)this.previousBody.push(o.childNodes[0]),o.removeChild(o.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,o.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),o.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,C)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,a.margin=this.bodyMargin,s.margin=this.docMargin,a.padding=this.bodyPadding,s.padding=this.docPadding,a.width=this.bodyWidth,s.width=this.docWidth,a.height=this.bodyHeight,s.height=this.docHeight,o.removeChild(this.element),r=this.previousBody.length,i=0;i<r;i++)o.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(o.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var l=0,h=function(){e.setPageScroll(u.pageScroll);var t=e.getPageScroll();++l<10&&(t.x!==u.pageScroll.x||t.y!==u.pageScroll.y)&&e.requestAnimationFrame(h)};e.requestAnimationFrame(h),t[this.hash].fullPage=!1,e.delegate(this,P)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:n}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var r={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",r),r.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var i=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,i),e.removeEvent(document,e.fullScreenErrorEventName,i),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&n.navigator.update(n.viewport),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,i),e.addEvent(document,e.fullScreenErrorEventName,i),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var n=this;t.replace&&(t.replaceItem=n.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),void 0===t.ajaxHeaders||null===t.ajaxHeaders?t.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(t.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(t.ajaxHeaders=e.extend({},this.ajaxHeaders,t.ajaxHeaders));var r={options:t};function i(e){for(var i=0;i<n._loadQueue.length;i++)if(n._loadQueue[i]===r){n._loadQueue.splice(i,1);break}0===n._loadQueue.length&&o(r),n.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function o(e){n.collectionMode&&(n.world.arrange({immediately:e.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}function a(){for(var t,r,i;n._loadQueue.length&&(t=n._loadQueue[0]).tileSource;){if(n._loadQueue.splice(0,1),t.options.replace){var a=n.world.getIndexOfItem(t.options.replaceItem);-1!=a&&(t.options.index=a),n.world.removeItem(t.options.replaceItem)}r=new e.TiledImage({viewer:n,source:t.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,compositeOperation:t.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:n.debugMode}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.world.addItem(r,{index:t.options.index}),0===n._loadQueue.length&&o(t),1!==n.world.getItemCount()||n.preserveViewport||n.viewport.goHome(!0),n.navigator&&(i=e.extend({},t.options,{replace:!1,originalTiledImage:r,tileSource:t.tileSource}),n.navigator.addTiledImage(i)),t.options.success&&t.options.success({item:r})}}e.isArray(t.tileSource)?setTimeout(function(){i({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})}):(this._loadQueue.push(r),function(t,n,r,i,o){var a=t;if("string"==e.type(n))if(n.match(/^\s*<.*>\s*$/))n=e.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var s=e.parseJSON(n);n=s}catch(e){}function u(e,t){e.ready?i(e):(e.addHandler("ready",function(){i(e)}),e.addHandler("open-failed",function(e){o({message:e.message,source:t})}))}setTimeout(function(){if("string"==e.type(n))(n=new e.TileSource({url:n,crossOriginPolicy:void 0!==r.crossOriginPolicy?r.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:t.ajaxHeaders,useCanvas:t.useCanvas,success:function(e){i(e.tileSource)}})).addHandler("open-failed",function(e){o(e)});else if(e.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===r.crossOriginPolicy&&void 0===t.crossOriginPolicy||(n.crossOriginPolicy=void 0!==r.crossOriginPolicy?r.crossOriginPolicy:t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var s=new e.TileSource(n);s.getTileUrl=n.getTileUrl,i(s)}else{var c=e.TileSource.determineType(a,n);if(!c)return void o({message:"Unable to load TileSource",source:n});var l=c.prototype.configure.apply(a,[n]);u(new c(l),n)}else u(n,n)})}(this,t.tileSource,t,function(e){r.tileSource=e,a()},function(e){e.options=t,i(e),a()}))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var r=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(r),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,l),n=e.delegate(this,h),r=e.delegate(this,V),i=e.delegate(this,j),o=this.navImages,a=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(a=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:k(this.prefixUrl,o.previous.REST),srcGroup:k(this.prefixUrl,o.previous.GROUP),srcHover:k(this.prefixUrl,o.previous.HOVER),srcDown:k(this.prefixUrl,o.previous.DOWN),onRelease:i,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:k(this.prefixUrl,o.next.REST),srcGroup:k(this.prefixUrl,o.next.GROUP),srcHover:k(this.prefixUrl,o.next.HOVER),srcDown:k(this.prefixUrl,o.next.DOWN),onRelease:r,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),a&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,O),n=e.delegate(this,M),r=e.delegate(this,L),i=e.delegate(this,$),o=e.delegate(this,I),a=e.delegate(this,B),s=e.delegate(this,z),u=e.delegate(this,N),c=e.delegate(this,F),f=e.delegate(this,W),d=e.delegate(this,l),g=e.delegate(this,h),p=this.navImages,v=[],m=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(m=!1),this.showZoomControl&&(v.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:k(this.prefixUrl,p.zoomIn.REST),srcGroup:k(this.prefixUrl,p.zoomIn.GROUP),srcHover:k(this.prefixUrl,p.zoomIn.HOVER),srcDown:k(this.prefixUrl,p.zoomIn.DOWN),onPress:t,onRelease:n,onClick:r,onEnter:t,onExit:n,onFocus:d,onBlur:g})),v.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:k(this.prefixUrl,p.zoomOut.REST),srcGroup:k(this.prefixUrl,p.zoomOut.GROUP),srcHover:k(this.prefixUrl,p.zoomOut.HOVER),srcDown:k(this.prefixUrl,p.zoomOut.DOWN),onPress:i,onRelease:n,onClick:o,onEnter:i,onExit:n,onFocus:d,onBlur:g}))),this.showHomeControl&&v.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:k(this.prefixUrl,p.home.REST),srcGroup:k(this.prefixUrl,p.home.GROUP),srcHover:k(this.prefixUrl,p.home.HOVER),srcDown:k(this.prefixUrl,p.home.DOWN),onRelease:a,onFocus:d,onBlur:g})),this.showFullPageControl&&v.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:k(this.prefixUrl,p.fullpage.REST),srcGroup:k(this.prefixUrl,p.fullpage.GROUP),srcHover:k(this.prefixUrl,p.fullpage.HOVER),srcDown:k(this.prefixUrl,p.fullpage.DOWN),onRelease:s,onFocus:d,onBlur:g})),this.showRotationControl&&(v.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:k(this.prefixUrl,p.rotateleft.REST),srcGroup:k(this.prefixUrl,p.rotateleft.GROUP),srcHover:k(this.prefixUrl,p.rotateleft.HOVER),srcDown:k(this.prefixUrl,p.rotateleft.DOWN),onRelease:u,onFocus:d,onBlur:g})),v.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:k(this.prefixUrl,p.rotateright.REST),srcGroup:k(this.prefixUrl,p.rotateright.GROUP),srcHover:k(this.prefixUrl,p.rotateright.HOVER),srcDown:k(this.prefixUrl,p.rotateright.DOWN),onRelease:c,onFocus:d,onBlur:g}))),this.showFlipControl&&v.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:k(this.prefixUrl,p.flip.REST),srcGroup:k(this.prefixUrl,p.flip.GROUP),srcHover:k(this.prefixUrl,p.flip.HOVER),srcDown:k(this.prefixUrl,p.flip.DOWN),onRelease:f,onFocus:d,onBlur:g})),m&&(this.buttons=new e.ButtonGroup({buttons:v,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,A)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,n,r,a){var s;if(s=e.isPlainObject(t)?t:{element:t,location:n,placement:r,onDraw:a},t=e.getElement(s.element),o(this.currentOverlays,t)>=0)return this;var u=i(this,s);return this.currentOverlays.push(u),u.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:s.location,placement:s.placement}),this},updateOverlay:function(n,r,i){var a;return n=e.getElement(n),(a=o(this.currentOverlays,n))>=0&&(this.currentOverlays[a].update(r,i),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:n,location:r,placement:i})),this},removeOverlay:function(n){var r;return n=e.getElement(n),(r=o(this.currentOverlays,n))>=0&&(this.currentOverlays[r].destroy(),this.currentOverlays.splice(r,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:n})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),(n=o(this.currentOverlays,t))>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function n(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function r(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function i(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function o(e,t){a(e,"rotate("+t+"deg)")}function a(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(a){var s,u,c=a.viewer,l=this;function h(e){o(l.displayRegionContainer,e),o(l.displayRegion,-e),l.viewport.setRotation(e)}(a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"==a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=c.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!=e.ControlAnchor.NONE&&function(e,t){e.margin="0px",e.border=t+"px solid "+a.borderColor,e.padding="0px",e.background=a.background,e.opacity=a.opacity,e.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+a.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",c.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!=e.ControlAnchor.NONE,this._resizeWithViewer&&(a.width&&a.height?(this.element.style.height="number"==typeof a.height?a.height+"px":a.height,this.element.style.width="number"==typeof a.width?a.width+"px":a.width):(s=e.getElementSize(c.element),this.element.style.height=Math.round(s.y*a.sizeRatio)+"px",this.element.style.width=Math.round(s.x*a.sizeRatio)+"px",this.oldViewerSize=s),u=e.getElementSize(this.element),this.elementArea=u.x*u.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate)&&(h(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0),a.viewer.addHandler("rotate",function(e){h(e.degrees)}));this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,r),scrollHandler:e.delegate(this,i)}),this.addHandler("reset-size",function(){l.viewport&&l.viewport.goHome(!0)}),c.world.addHandler("item-index-change",function(e){window.setTimeout(function(){var t=l.world.getItemAt(e.previousIndex);l.world.setItemIndex(t,e.newIndex)},1)}),c.world.addHandler("remove-item",function(e){var t=e.item,n=l._getMatchingItem(t);n&&l.world.removeItem(n)}),this.update(c.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){a(this.displayRegion,e),a(this.canvas,e),a(this.element,e)},update:function(t){var n,r,i,o,a,s;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(r=n.x*this.sizeRatio,i=n.y*this.sizeRatio):(r=Math.sqrt(this.elementArea*(n.x/n.y)),i=this.elementArea/r),this.element.style.width=Math.round(r)+"px",this.element.style.height=Math.round(i)+"px",this.elementArea||(this.elementArea=r*i),this.updateSize()),t&&this.viewport){o=t.getBoundsNoRotate(!0),a=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!1),s=this.viewport.pixelFromPointNoRotate(o.getBottomRight(),!1).minus(this.totalBorderWidths);var u=this.displayRegion.style;u.display=this.world.getItemCount()?"block":"none",u.top=Math.round(a.y)+"px",u.left=Math.round(a.x)+"px";var c=Math.abs(a.x-s.x),l=Math.abs(a.y-s.y);u.width=Math.round(Math.max(c,0))+"px",u.height=Math.round(Math.max(l,0))+"px"}},addTiledImage:function(t){var n=this,r=t.originalTiledImage;delete t.original;var i=e.extend({},t,{success:function(e){var t=e.item;function i(){n._matchBounds(t,r)}t._originalForNavigator=r,n._matchBounds(t,r,!0),r.addHandler("bounds-change",i),r.addHandler("clip-change",i),r.addHandler("opacity-change",function(){n._matchOpacity(t,r)}),r.addHandler("composite-operation-change",function(){n._matchCompositeOperation(t,r)})}});return e.Viewer.prototype.addTiledImage.apply(this,[i])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),r=0;r<n;r++)if((t=this.world.getItemAt(r))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var r=t.getBoundsNoRotate();e.setPosition(r.getTopLeft(),n),e.setWidth(r.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var r,i=n.split("."),o=null,a=arguments,s=t;for(r=0;r<i.length-1;r++)s=s[i[r]]||{};return"string"!=typeof(o=s[i[r]])&&(e.console.log("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<a.length?a[t]:""})},setString:function(e,n){var r,i=e.split("."),o=t;for(r=0;r<i.length-1;r++)o[i[r]]||(o[i[r]]={}),o=o[i[r]];o[i[r]]=n}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){var r,i;if(n=n||new e.Point(0,0),t%90==0){switch(e.positiveModulo(t,360)){case 0:r=1,i=0;break;case 90:r=0,i=1;break;case 180:r=-1,i=0;break;case 270:r=0,i=-1}}else{var o=t*Math.PI/180;r=Math.cos(o),i=Math.sin(o)}var a=r*(this.x-n.x)-i*(this.y-n.y)+n.x,s=i*(this.x-n.x)+r*(this.y-n.y)+n.y;return new e.Point(a,s)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(t,n,r,i,o,a){var s,u,c=this,l=arguments;if(s=e.isPlainObject(t)?t:{width:l[0],height:l[1],tileSize:l[2],tileOverlap:l[3],minLevel:l[4],maxLevel:l[5]},e.EventSource.call(this),e.extend(!0,this,s),!this.success)for(u=0;u<arguments.length;u++)if(e.isFunction(arguments[u])){this.success=arguments[u];break}this.success&&this.addHandler("ready",function(e){c.success(e)}),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=s.width&&s.height?s.width/s.height:1,this.dimensions=new e.Point(s.width,s.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=s.tileOverlap?s.tileOverlap:0,this.minLevel=s.minLevel?s.minLevel:0,this.maxLevel=void 0!==s.maxLevel&&null!==s.maxLevel?s.maxLevel:s.width&&s.height?Math.ceil(Math.log(Math.max(s.width,s.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(t){var n=this.getLevelScale(t),r=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),i=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(r,i)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),r=1/n.x,i=1/n.y;return new e.Point(r,i)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,n){var r=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;e.console.assert(r,"[TileSource.getTileAtPoint] must be called with a valid point.");var i=this.dimensions.x*this.getLevelScale(t),o=n.x*i,a=n.y*i,s=Math.floor(o/this.getTileWidth(t)),u=Math.floor(a/this.getTileHeight(t));n.x>=1&&(s=this.getNumTiles(t).x-1);return n.y>=1/this.aspectRatio-1e-15&&(u=this.getNumTiles(t).y-1),new e.Point(s,u)},getTileBounds:function(t,n,r,i){var o=this.dimensions.times(this.getLevelScale(t)),a=this.getTileWidth(t),s=this.getTileHeight(t),u=0===n?0:a*n-this.tileOverlap,c=0===r?0:s*r-this.tileOverlap,l=a+(0===n?1:2)*this.tileOverlap,h=s+(0===r?1:2)*this.tileOverlap,f=1/o.x;return l=Math.min(l,o.x-u),h=Math.min(h,o.y-c),i?new e.Rect(0,0,l,h):new e.Rect(u*f,c*f,l*f,h*f)},getImageInfo:function(t){var n,r,i,o,a,s,u,c=this;t&&(u=(s=(a=t.split("/"))[a.length-1]).lastIndexOf("."))>-1&&(a[a.length-1]=s.slice(0,u)),r=function(n){"string"==typeof n&&(n=e.parseXml(n));var r=e.TileSource.determineType(c,n,t);r?(void 0===(o=r.prototype.configure.apply(c,[n,t])).ajaxWithCredentials&&(o.ajaxWithCredentials=c.ajaxWithCredentials),i=new r(o),c.ready=!0,c.raiseEvent("ready",{tileSource:i})):c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(n=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:n,callback:r})):e.makeAjaxRequest({url:t,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var n=function(t){var n,r,i=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw o=t.status,n=404==o?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,n));if(i.match(/\s*<.*/))try{r=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(i)}catch(e){r=t.responseText}else if(i.match(/\s*[\{\[].*/))try{r=e.parseJSON(i)}catch(e){r=i}else r=i;return r}(t);r(n)},error:function(e,n){var r;try{r="HTTP "+e.status+" attempting to load TileSource"}catch(e){r=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource"}c.raiseEvent("open-failed",{message:r,source:t})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(e,t,n){return{}},tileExists:function(e,t,n){var r=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<r.x&&n<r.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,r){var i;for(i in OpenSeadragon)if(i.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[i])&&e.isFunction(OpenSeadragon[i].prototype.supports)&&OpenSeadragon[i].prototype.supports.call(t,n,r))return OpenSeadragon[i];e.console.error("No TileSource was able to open %s %s",r,n)}}(OpenSeadragon),function(e){function t(t,n){var r,i,o=n.Image,a=o.Url,s=o.Format,u=o.Size,c=o.DisplayRect||[],l=parseInt(u.Width,10),h=parseInt(u.Height,10),f=parseInt(o.TileSize,10),d=parseInt(o.Overlap,10),g=[];for(i=0;i<c.length;i++)r=c[i].Rect,g.push(new e.DisplayRect(parseInt(r.X,10),parseInt(r.Y,10),parseInt(r.Width,10),parseInt(r.Height,10),parseInt(r.MinLevel,10),parseInt(r.MaxLevel,10)));return e.extend(!0,{width:l,height:h,tileSize:f,tileOverlap:d,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:s,displayRects:g},n)}e.DziTileSource=function(t,n,r,i,o,a,s,u,c){var l,h,f,d;if(d=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=d.tilesUrl,this.fileFormat=d.fileFormat,this.displayRects=d.displayRects,this.displayRects)for(l=this.displayRects.length-1;l>=0;l--)for(f=(h=this.displayRects[l]).minLevel;f<=h.maxLevel;f++)this._levelRects[f]||(this._levelRects[f]=[]),this._levelRects[f].push(h);e.TileSource.apply(this,[d])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(n=e.documentElement.namespaceURI)),-1!==(n=(n||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(n,r){var i;return i=e.isPlainObject(n)?t(this,n):function(n,r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var i,o,a,s,u,c=r.documentElement,l=c.localName||c.tagName,h=r.documentElement.namespaceURI,f=null,d=[];if("Image"==l)try{if(void 0===(s=c.getElementsByTagName("Size")[0])&&(s=c.getElementsByTagNameNS(h,"Size")[0]),f={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:c.getAttribute("Url"),Format:c.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(c.getAttribute("Overlap"),10),TileSize:parseInt(c.getAttribute("TileSize"),10),Size:{Height:parseInt(s.getAttribute("Height"),10),Width:parseInt(s.getAttribute("Width"),10)}}},!e.imageFormatSupported(f.Image.Format))throw new Error(e.getString("Errors.ImageFormat",f.Image.Format.toUpperCase()));for(void 0===(i=c.getElementsByTagName("DisplayRect"))&&(i=c.getElementsByTagNameNS(h,"DisplayRect")[0]),u=0;u<i.length;u++)o=i[u],void 0===(a=o.getElementsByTagName("Rect")[0])&&(a=o.getElementsByTagNameNS(h,"Rect")[0]),d.push({Rect:{X:parseInt(a.getAttribute("X"),10),Y:parseInt(a.getAttribute("Y"),10),Width:parseInt(a.getAttribute("Width"),10),Height:parseInt(a.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return d.length&&(f.Image.DisplayRect=d),t(n,f)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==l)throw new Error(e.getString("Errors.Dzc"));if("Error"==l){var g=c.getElementsByTagName("Message")[0],p=g.firstChild.nodeValue;throw new Error(p)}}throw new Error(e.getString("Errors.Dzi"))}(this,n),r&&!i.tilesUrl&&(i.tilesUrl=r.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?i.queryParams=r.match(/\?.*/):i.queryParams=""),i},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var r,i,o,a,s,u,c,l=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!l||!l.length)return!0;for(c=l.length-1;c>=0;c--)if(!(e<(r=l[c]).minLevel||e>r.maxLevel)&&(i=this.getLevelScale(e),o=r.x*i,a=r.y*i,s=o+r.width*i,u=a+r.height*i,o=Math.floor(o/this._tileWidth),a=Math.floor(a/this._tileWidth),s=Math.ceil(s/this._tileWidth),u=Math.ceil(u/this._tileWidth),o<=t&&t<s&&a<=n&&n<u))return!0;return!1}})}(OpenSeadragon),function(e){e.IIIFTileSource=function(t){if(e.extend(!0,this,t),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(t.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)t.tileWidth=this.tile_width,t.tileHeight=this.tile_height;else if(this.tile_width)t.tileSize=this.tile_width;else if(this.tile_height)t.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)t.tileWidth=this.tiles[0].width,t.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var n=0;n<this.tiles.length;n++)for(var r=0;r<this.tiles[n].scaleFactors.length;r++){var i=this.tiles[n].scaleFactors[r];this.scale_factors.push(i),t.tileSizePerScaleFactor[i]={width:this.tiles[n].width,height:this.tiles[n].height||this.tiles[n].width}}}else if(function(e){return!(-1!=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"].indexOf(e[0]))||-1!=e.indexOf("sizeByW")}(t.profile)){for(var o=Math.min(this.height,this.width),a=[256,512,1024],s=[],u=0;u<a.length;u++)a[u]<=o&&s.push(a[u]);s.length>0?t.tileSize=Math.max.apply(null,s):t.tileSize=o}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,t.levels=function(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e["@id"]+"/full/"+e.sizes[n].width+",/0/default.jpg",width:e.sizes[n].width,height:e.sizes[n].height});return t.sort(function(e,t){return e.width-t.width})}(this),e.extend(!0,t,{width:t.levels[t.levels.length-1].width,height:t.levels[t.levels.length-1].height,tileSize:Math.max(t.height,t.width),tileOverlap:0,minLevel:0,maxLevel:t.levels.length-1}),this.levels=t.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!t.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var c=Math.max.apply(null,this.scale_factors);t.maxLevel=Math.round(Math.log(c)*Math.LOG2E)}else t.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[t])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!(!e.protocol||"http://iiif.io/api/image"!=e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI))))},configure:function(t,n){if(e.isPlainObject(t))return t["@context"]?t:(t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=n.replace("/info.json",""),t);var r=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var n=t.documentElement,r=null;if("info"==n.tagName)try{return function t(n,r,i){var o,a;if(3==n.nodeType&&i)(a=n.nodeValue.trim()).match(/^\d*$/)&&(a=Number(a)),r[i]?(e.isArray(r[i])||(r[i]=[r[i]]),r[i].push(a)):r[i]=a;else if(1==n.nodeType)for(o=0;o<n.childNodes.length;o++)t(n.childNodes[o],r,n.nodeName)}(n,r={}),r}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(t);return r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=n.replace("/info.xml",""),r},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){return this.emulateLegacyImagePyramid?this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var r=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r}var i,o,a,s,u,c,l,h,f,d,g,p=Math.pow(.5,this.maxLevel-e),v=Math.ceil(this.width*p),m=Math.ceil(this.height*p);return i=this.getTileWidth(e),o=this.getTileHeight(e),a=Math.ceil(i/p),s=Math.ceil(o/p),g=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",v<i&&m<o?(d=v+",",u="full"):(c=t*a,l=n*s,h=Math.min(a,this.width-c),f=Math.min(s,this.height-l),d=Math.ceil(h*p)+",",u=[c,l,h,f].join(",")),[this["@id"],u,d,"0",g].join("/")}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,n,r,i,o){var a;(a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&a.height||(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,e.TileSource.apply(this,[a])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,n,r,i,o){var a;a=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var s,u=256*Math.ceil(a.width/256),c=256*Math.ceil(a.height/256);s=u>c?u/256:c/256,a.maxLevel=Math.ceil(Math.log(s)/Math.log(2))-1,a.tileSize=256,a.width=u,a.height=c,e.TileSource.apply(this,[a])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var r=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(r-n)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var r=0,i={},o=0;o<e;o++)r+=(i=this.gridSize[o]).x*i.y;return r+=(i=this.gridSize[e]).x*n+t},supports:function(e,t){return e.type&&"zoomifytileservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var r,i=this._calculateAbsoluteTileNumber(e,t,n);return r=Math.floor(i/256),this.tilesUrl+"TileGroup"+r+"/"+e+"-"+t+"-"+n+".jpg"}})}(OpenSeadragon),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var n,r,i;e.isArray(t)&&(n={type:"legacy-image-pyramid",levels:t}),n.levels=function(t){var n,r,i=[];for(r=0;r<t.length;r++)(n=t[r]).height&&n.width&&n.url?i.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return i.sort(function(e,t){return e.height-t.height})}(n.levels),n.levels.length>0?(r=n.levels[n.levels.length-1].width,i=n.levels[n.levels.length-1].height):(r=0,i=0,e.console.error("No supported image formats found")),e.extend(!0,n,{width:r,height:i,tileSize:Math.max(i,r),tileOverlap:0,minLevel:0,maxLevel:n.levels.length>0?n.levels.length-1:0}),e.TileSource.apply(this,[n]),this.levels=n.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(n,r){return e.isPlainObject(n)?t(this,n):function(n,r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var i,o,a=r.documentElement,s=a.tagName,u=null,c=[];if("image"==s)try{for(u={type:a.getAttribute("type"),levels:[]},c=a.getElementsByTagName("level"),o=0;o<c.length;o++)i=c[o],u.levels.push({url:i.getAttribute("url"),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10)});return t(n,u)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==s)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==s)throw new Error("Error: "+r)}throw new Error("Unknown element "+s)}(this,n)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var r=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var n=this._image=new Image,r=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",function(){r.width=Object.prototype.hasOwnProperty.call(n,"naturalWidth")?n.naturalWidth:n.width,r.height=Object.prototype.hasOwnProperty.call(n,"naturalHeight")?n.naturalHeight:n.height,r.aspectRatio=r.width/r.height,r.dimensions=new e.Point(r.width,r.height),r._tileWidth=r.width,r._tileHeight=r.height,r.tileOverlap=0,r.minLevel=0,r.levels=r._buildLevels(),r.maxLevel=r.levels.length-1,r.ready=!0,r.raiseEvent("ready",{tileSource:r})}),e.addEvent(n,"error",function(){r.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})}),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,n){var r=null;return e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r},getContext2D:function(e,t,n){var r=null;return e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].context2D),r},_buildLevels:function(){var t=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,r=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,i=document.createElement("canvas"),o=i.getContext("2d");if(i.width=n,i.height=r,o.drawImage(this._image,0,0,n,r),t[0].context2D=o,delete this._image,e.isCanvasTainted(i))return t;for(;n>=2&&r>=2;){n=Math.floor(n/2),r=Math.floor(r/2);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=n,a.height=r,s.drawImage(i,0,0,n,r),t.splice(0,0,{context2D:s,width:n,height:r}),i=a,o=s}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,n,r,i){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(n){e.requestAnimationFrame(function(){!function(n){var r,i,o;n.shouldFade&&(r=e.now(),i=r-n.fadeBeginTime,o=1-i/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&e.setElementOpacity(n.imgGroup,o,!0),o>0&&t(n))}(n)})}function n(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(!function(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function r(n,r){n.element.disabled||(r<=e.ButtonState.HOVER&&n.currentState==e.ButtonState.DOWN&&(n.imgDown&&(n.imgDown.style.visibility="hidden"),n.currentState=e.ButtonState.HOVER),r<=e.ButtonState.GROUP&&n.currentState==e.ButtonState.HOVER&&(n.imgHover&&(n.imgHover.style.visibility="hidden"),n.currentState=e.ButtonState.GROUP),r<=e.ButtonState.REST&&n.currentState==e.ButtonState.GROUP&&(!function(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout(function(){t(n)},n.fadeDelay)}(n),n.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var i=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(n(i,e.ButtonState.DOWN),i.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||n(i,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),i.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){r(i,e.ButtonState.GROUP),t.insideElementPressed&&i.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),i.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){n(i,e.ButtonState.DOWN),i.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(r(i,e.ButtonState.HOVER),i.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?r(i,e.ButtonState.GROUP):n(i,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&i.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(i.raiseEvent("click",{originalEvent:e.originalEvent}),i.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),r(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){n(this,e.ButtonState.GROUP)},notifyGroupExit:function(){r(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,r=this.buttons.concat([]),i=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.label=e.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;n<r.length;n++)this.element.appendChild(r[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<i.buttons.length;t++)i.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<i.buttons.length;t++)i.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(t,n,r,i,o){var a,s;this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.width="number"==typeof r?r:0,this.height="number"==typeof i?i:0,this.degrees="number"==typeof o?o:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(a=this.getTopRight(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=270):this.degrees>=180?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):this.degrees>=90&&(a=this.getBottomLeft(),this.x=a.x,this.y=a.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=90)},e.Rect.fromSummits=function(t,n,r){var i=t.distanceTo(n),o=t.distanceTo(r),a=n.minus(t),s=Math.atan(a.y/a.x);return a.x<0?s+=Math.PI:a.y<0&&(s+=2*Math.PI),new e.Rect(t.x,t.y,i,o,s/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),r=t.getBoundingBox(),i=Math.min(n.x,r.x),o=Math.min(n.y,r.y),a=Math.max(n.x+n.width,r.x+r.width),s=Math.max(n.y+n.height,r.y+r.height);return new e.Rect(i,o,a-i,s-o)},intersection:function(t){var n=1e-10,r=[],i=this.getTopLeft();t.containsPoint(i,n)&&r.push(i);var o=this.getTopRight();t.containsPoint(o,n)&&r.push(o);var a=this.getBottomLeft();t.containsPoint(a,n)&&r.push(a);var s=this.getBottomRight();t.containsPoint(s,n)&&r.push(s);var u=t.getTopLeft();this.containsPoint(u,n)&&r.push(u);var c=t.getTopRight();this.containsPoint(c,n)&&r.push(c);var l=t.getBottomLeft();this.containsPoint(l,n)&&r.push(l);var h=t.getBottomRight();this.containsPoint(h,n)&&r.push(h);for(var f=this._getSegments(),d=t._getSegments(),g=0;g<f.length;g++)for(var p=f[g],v=0;v<d.length;v++){var m=d[v],b=w(p[0],p[1],m[0],m[1]);b&&r.push(b)}function w(t,r,i,o){var a=r.minus(t),s=o.minus(i),u=-s.x*a.y+a.x*s.y;if(0===u)return null;var c=(a.x*(t.y-i.y)-a.y*(t.x-i.x))/u,l=(s.x*(t.y-i.y)-s.y*(t.x-i.x))/u;return-n<=c&&c<=1-n&&-n<=l&&l<=1-n?new e.Point(t.x+l*a.x,t.y+l*a.y):null}if(0===r.length)return null;for(var y=r[0].x,x=r[0].x,T=r[0].y,S=r[0].y,E=1;E<r.length;E++){var _=r[E];_.x<y&&(y=_.x),_.x>x&&(x=_.x),_.y<T&&(T=_.y),_.y>S&&(S=_.y)}return new e.Rect(y,T,x-y,S-T)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight();return[[e,t],[t,r],[r,n],[n,e]]},rotate:function(t,n){if(0===(t=e.positiveModulo(t,360)))return this.clone();n=n||this.getCenter();var r=this.getTopLeft().rotate(t,n),i=this.getTopRight().rotate(t,n).minus(r);i=i.apply(function(e){return Math.abs(e)<1e-15?0:e});var o=Math.atan(i.y/i.x);return i.x<0?o+=Math.PI:i.y<0&&(o+=2*Math.PI),new e.Rect(r.x,r.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),i=this.getBottomRight(),o=Math.min(t.x,n.x,r.x,i.x),a=Math.max(t.x,n.x,r.x,i.x),s=Math.min(t.y,n.y,r.y,i.y),u=Math.max(t.y,n.y,r.y,i.y);return new e.Rect(o,s,a-o,u-s)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),r=Math.floor(t.y),i=Math.ceil(t.width+t.x-n),o=Math.ceil(t.height+t.y-r);return new e.Rect(n,r,i,o)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),r=this.getTopRight(),i=this.getBottomLeft(),o=r.minus(n),a=i.minus(n);return(e.x-n.x)*o.x+(e.y-n.y)*o.y>=-t&&(e.x-r.x)*o.x+(e.y-r.y)*o.y<=t&&(e.x-n.x)*a.x+(e.y-n.y)*a.y>=-t&&(e.x-i.x)*a.x+(e.y-i.y)*a.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var t={};function n(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?n>-(o-s.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",i(this,s.x,n+2*t.delta.x)):-t.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*t.delta.x+"px",i(this,s.x,n+2*t.delta.x)):-t.delta.y>0?r>-(a-s.y)&&(this.element.style.marginTop=r+2*t.delta.y+"px",i(this,s.y,r+2*t.delta.y)):-t.delta.y<0&&r<0&&(this.element.style.marginTop=r+2*t.delta.y+"px",i(this,s.y,r+2*t.delta.y))),!1}function r(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),a=Number(this.element.style.height.replace("px","")),s=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?n>-(o-s.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",i(this,s.x,n-60*t.scroll)):t.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*t.scroll+"px",i(this,s.x,n-60*t.scroll)):t.scroll<0?r>s.y-a&&(this.element.style.marginTop=r+60*t.scroll+"px",i(this,s.y,r+60*t.scroll)):t.scroll>0&&r<0&&(this.element.style.marginTop=r+60*t.scroll+"px",i(this,s.y,r+60*t.scroll))),!1}function i(t,n,r){var i,o,a,s,u,c,l;for(i="horizontal"==t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(n/i)+5,c=o=(o=(a=Math.ceil((Math.abs(r)+n)/i)+1)-o)<0?0:o;c<a&&c<t.panels.length;c++)if(!(l=t.panels[c]).activePanel){var h,f=t.viewer.tileSources[c];h=f.referenceStripThumbnailUrl?{type:"image",url:f.referenceStripThumbnailUrl}:f,(s=new e.Viewer({id:l.id,tileSources:[h],element:l,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0})).displayRegion=e.makeNeutralElement("div"),s.displayRegion.id=l.id+"-displayregion",s.displayRegion.className="displayregion",(u=s.displayRegion.style).position="relative",u.top="0px",u.left="0px",u.fontSize="0px",u.overflow="hidden",u.float="left",u.cssFloat="left",u.styleFloat="left",u.zIndex=999999999,u.cursor="default",u.width=t.panelWidth-4+"px",u.height=t.panelHeight-4+"px",s.displayRegion.innerTracker=new e.MouseTracker({element:s.displayRegion,startDisabled:!0}),l.getElementsByTagName("div")[0].appendChild(s.displayRegion),t.miniViewers[l.id]=s,l.activePanel=!0}}function o(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function a(t){var n=t.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px",!1}function s(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function u(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}e.ReferenceStrip=function(c){var l,h,f,d=c.viewer,g=e.getElementSize(d.element);for(c.id||(c.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=c.id,this.element.className="referencestrip"),c=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},c,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,c),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(h=this.element.style).marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=d,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),enterHandler:e.delegate(this,o),exitHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,s),keyHandler:e.delegate(this,u)}),c.width&&c.height?(this.element.style.width=c.width+"px",this.element.style.height=c.height+"px",d.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==c.scroll?(this.element.style.width=g.x*c.sizeRatio*d.tileSources.length+12*d.tileSources.length+"px",this.element.style.height=g.y*c.sizeRatio+"px",d.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*c.sizeRatio*d.tileSources.length+12*d.tileSources.length+"px",this.element.style.width=g.x*c.sizeRatio+"px",d.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},f=0;f<d.tileSources.length;f++)(l=e.makeNeutralElement("div")).id=this.element.id+"-"+f,l.style.width=this.panelWidth+"px",l.style.height=this.panelHeight+"px",l.style.display="inline",l.style.float="left",l.style.cssFloat="left",l.style.styleFloat="left",l.style.padding="2px",e.setElementTouchActionNone(l),l.innerTracker=new e.MouseTracker({element:l,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var n=t.eventSource,r=n.element.id,i=Number(r.split("-")[2]),o=e.now();t.insideElementPressed&&t.insideElementReleased&&n.dragging&&o-n.dragging<n.clickTimeThreshold&&(n.dragging=null,d.goToPage(i))}}),this.element.appendChild(l),l.activePanel=!1,this.panels.push(l);i(this,"vertical"==this.scroll?g.y:g.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var n,r=e.getElement(this.element.id+"-"+t),a=e.getElementSize(this.viewer.canvas),s=Number(this.element.style.width.replace("px","")),u=Number(this.element.style.height.replace("px","")),c=-Number(this.element.style.marginLeft.replace("px","")),l=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==r&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=r,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(t)*(this.panelWidth+3))>c+a.x-this.panelWidth?(n=Math.min(n,s-a.x),this.element.style.marginLeft=-n+"px",i(this,a.x,-n)):n<c&&(n=Math.max(0,n-a.x/2),this.element.style.marginLeft=-n+"px",i(this,a.x,-n)):(n=Number(t)*(this.panelHeight+3))>l+a.y-this.panelHeight?(n=Math.min(n,u-a.y),this.element.style.marginTop=-n+"px",i(this,a.y,-n)):n<l&&(n=Math.max(0,n-a.y/2),this.element.style.marginTop=-n+"px",i(this,a.y,-n)),this.currentPage=t,o.call(this,{eventSource:this.innerTracker}))},update:function(){return!!t[this.id].animating&&(e.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,n,r,i,o,a){e.Rect.apply(this,[t,n,r,i]),this.minLevel=o,this.maxLevel=a},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(t){var n=arguments;"object"!=typeof t&&(t={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var t,n;this.current.time=e.now(),this._exponential?(t=this.start._logValue,n=this.target._logValue):(t=this.start.value,n=this.target.value);var r=this.current.time>=this.target.time?n:t+(n-t)*function(e,t){return(1-Math.exp(e*-t))/(1-Math.exp(-e))}(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),i=this.current.value;return this._exponential?this.current.value=Math.exp(r):this.current.value=r,i!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}t.prototype={errorMsg:null,start:function(){var t=this,n=this.abort;this.image=new Image,this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.errorMsg="Image load aborted",t.finish(!1)},this.jobId=window.setTimeout(function(){t.errorMsg="Image load exceeded timeout",t.finish(!1)},this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(e){var n;try{n=new window.Blob([e.response])}catch(t){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&r){var i=new r;i.append(e.response),n=i.getBlob()}}0===n.size&&(t.errorMsg="Empty image response.",t.finish(!1));var o=(window.URL||window.webkitURL).createObjectURL(n);t.image.src=o},error:function(e){t.errorMsg="Image load aborted - XHR error",t.finish(!1)}}),this.abort=function(){t.request.abort(),"function"==typeof n&&n()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var n=this,r=new t({src:e.src,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.loadWithAjax?e.ajaxHeaders:null,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:function(t){!function(e,t,n){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(e.jobQueue.shift().start(),e.jobsInProgress++),n(t.image,t.errorMsg,t.request)}(n,t,e.callback)},abort:e.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(r.start(),this.jobsInProgress++):this.jobQueue.push(r)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,n,r,i,o,a,s,u,c){this.level=e,this.x=t,this.y=n,this.bounds=r,this.sourceBounds=c,this.exists=i,this.url=o,this.context2D=a,this.loadWithAjax=s,this.ajaxHeaders=u,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,n,r,i){var o,a,s,u=this.position.times(e.pixelDensityRatio),c=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(o=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&o?(t.save(),t.globalAlpha=this.opacity,"number"==typeof r&&1!==r&&(u=u.times(r),c=c.times(r)),i instanceof e.Point&&(u=u.plus(i)),1===t.globalAlpha&&this._hasTransparencyChannel()&&t.clearRect(u.x,u.y,c.x,c.y),n({context:t,tile:this,rendered:o}),this.sourceBounds?(a=Math.min(this.sourceBounds.width,o.canvas.width),s=Math.min(this.sourceBounds.height,o.canvas.height)):(a=o.canvas.width,s=o.canvas.height),t.drawImage(o.canvas,0,0,a,s,u.x,u.y,c.x,c.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,r){var i=Math.max(1,Math.ceil((r.x-n.x)/2)),o=Math.max(1,Math.ceil((r.y-n.y)/2));return new e.Point(i,o).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply(function(e){return e%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,r){var i;i=e.isPlainObject(t)?t:{element:t,location:n,placement:r},this.element=i.element,this.style=i.element.style,this._init(i)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var r=e.Placement.properties[this.placement];r&&(r.isHorizontallyCentered?t.x-=n.x/2:r.isRight&&(t.x-=n.x),r.isVerticallyCentered?t.y-=n.y/2:r.isBottom&&(t.y-=n.y))},destroy:function(){var t=this.element,n=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(n.display="none",document.body.appendChild(t))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var r=e.getCssPropertyWithVendorPrefix("transformOrigin"),i=e.getCssPropertyWithVendorPrefix("transform");r&&i&&(n[r]="",n[i]="")},drawHTML:function(t,n){var r=this.element;r.parentNode!==t&&(r.prevElementParent=r.parentNode,r.prevNextSibling=r.nextSibling,t.appendChild(r),this.style.position="absolute",this.size=e.getElementSize(r));var i=this._getOverlayPositionAndSize(n),o=i.position,a=this.size=i.size,s=i.rotate;if(this.onDraw)this.onDraw(o,a,this.element);else{var u=this.style;u.left=o.x+"px",u.top=o.y+"px",null!==this.width&&(u.width=a.x+"px"),null!==this.height&&(u.height=a.y+"px");var c=e.getCssPropertyWithVendorPrefix("transformOrigin"),l=e.getCssPropertyWithVendorPrefix("transform");c&&l&&(s?(u[c]=this._getTransformOrigin(),u[l]="rotate("+s+"deg)"):(u[c]="",u[l]="")),"none"!==u.display&&(u.display="block")}},_getOverlayPositionAndSize:function(t){var n=t.pixelFromPoint(this.location,!0),r=this._getSizeInPixels(t);this.adjust(n,r);var i=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new e.Rect(n.x,n.y,r.x,r.y),a=this._getBoundingBox(o,t.degrees);n=a.getTopLeft(),r=a.getSize()}else i=t.degrees;return{position:n,size:r,rotate:i}},_getSizeInPixels:function(t){var n=this.size.x,r=this.size.y;if(null!==this.width||null!==this.height){var i=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=i.x),null!==this.height&&(r=i.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=e.getElementSize(this.element);null===this.width&&(n=o.x),null===this.height&&(r=o.y)}return new e.Point(n,r)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),r=e.Placement.properties[this.placement];return r&&(r.isHorizontallyCentered?n.x+=t.width/2:r.isRight&&(n.x+=t.width),r.isVerticallyCentered?n.y+=t.height/2:r.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n?(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom"),t):t},update:function(t,n){var r=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:r.location||this.location,placement:void 0!==r.placement?r.placement:this.placement,onDraw:r.onDraw||this.onDraw,checkResize:r.checkResize||this.checkResize,width:void 0!==r.width?r.width:this.width,height:void 0!==r.height?r.height:this.height,rotationMode:r.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,r=this.height;if(null===n||null===r){var i=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=i.x),null===r&&(r=i.y)}var o=this.location.clone();return this.adjust(o,new e.Point(n,r)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,n,r))},_adjustBoundsForRotation:function(t,n){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var r=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(r.position.x,r.position.y,r.size.x,r.size.y))}return n.rotate(-t.degrees,this._getPlacementPoint(n))}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var r=this._calculateCanvasSize();this.canvas.width=r.x,this.canvas.height=r.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},e.Drawer.prototype={addOverlay:function(t,n,r,i){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,r,i),this},updateOverlay:function(t,n,r){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,r),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,r=0;r<n.getItemCount();r++)n.getItemAt(r).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,r=0;r<t.getItemCount();r++){var i=t.getItemAt(r).getOpacity();i>n&&(n=i)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var r=n.canvas;n.clearRect(0,0,r.width,r.height)}}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),r=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,r.x*e.pixelDensityRatio,r.y*e.pixelDensityRatio)},drawTile:function(t,n,r,i,o){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var a=this._getContext(r);i=i||1,t.drawCanvas(a,n,i,o)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var r=this;this.viewer.addHandler("rotate",function e(){if(0!==r.viewport.getRotation()){r.viewer.removeHandler("rotate",e);var t=r._calculateSketchCanvasSize();r.sketchCanvas.width=t.x,r.sketchCanvas.height=t.y}})}}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var r=this._getContext(n);r.save(),r.fillStyle=t,r.fillRect(e.x,e.y,e.width,e.height),r.restore()}},blendSketch:function(t,n,r,i){var o=t;if(e.isPlainObject(o)||(o={opacity:t,scale:n,translate:r,compositeOperation:i}),this.useCanvas&&this.sketchCanvas){t=o.opacity,i=o.compositeOperation;var a=o.bounds;if(this.context.save(),this.context.globalAlpha=t,i&&(this.context.globalCompositeOperation=i),a)a.x<0&&(a.width+=a.x,a.x=0),a.x+a.width>this.canvas.width&&(a.width=this.canvas.width-a.x),a.y<0&&(a.height+=a.y,a.y=0),a.y+a.height>this.canvas.height&&(a.height=this.canvas.height-a.y),this.context.drawImage(this.sketchCanvas,a.x,a.y,a.width,a.height,a.x,a.y,a.width,a.height);else{n=o.scale||1;var s=(r=o.translate)instanceof e.Point?r:new e.Point(0,0),u=0,c=0;if(r){var l=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;u=Math.round(l/2),c=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,s.x-u*n,s.y-c*n,(this.canvas.width+2*u)*n,(this.canvas.height+2*c)*n,-u,-c,this.canvas.width+2*u,this.canvas.height+2*c)}this.context.restore()}},drawDebugInfo:function(t,n,r,i){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(i)%this.debugGridColor.length,a=this.context;a.save(),a.lineWidth=2*e.pixelDensityRatio,a.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",a.strokeStyle=this.debugGridColor[o],a.fillStyle=this.debugGridColor[o],0!==this.viewport.degrees?this._offsetForRotation({degrees:this.viewport.degrees}):this.viewer.viewport.flipped&&this._flip(),i.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:i.getRotation(!0),point:i.viewport.pixelFromPointNoRotate(i._getRotationPoint(!0),!0)}),a.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var s=(t.position.x+t.size.x/2)*e.pixelDensityRatio,u=(t.position.y+t.size.y/2)*e.pixelDensityRatio;a.translate(s,u),a.rotate(Math.PI/180*-this.viewport.degrees),a.translate(-s,-u),0===t.x&&0===t.y&&(a.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),a.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),a.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),a.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),a.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),a.fillText("Order: "+r+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),a.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),a.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),i.getRotation(!0)%360!=0&&this._restoreRotationChanges(),a.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},getCanvasSize:function(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var n=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),r=this._getContext(t.useSketch);r.save(),r.translate(n.x,n.y),this.viewer.viewport.flipped?(r.rotate(Math.PI/180*-t.degrees),r.scale(-1,1)):r.rotate(Math.PI/180*t.degrees),r.translate(-n.x,-n.y)},_flip:function(t){var n=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),r=this._getContext(t.useSketch);r.translate(n.x,0),r.scale(-1,1),r.translate(-n.x,0)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:n.x*t,y:n.y*t}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),r=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-r/2,n,r)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var n=this.getCenter(t),r=1/this.getZoom(t),i=r/this.getAspectRatio();return new e.Rect(n.x-r/2,n.y-i/2,r,i)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,r,i,o,a,s,u=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?u:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),o=(i=1/(r=this.getZoom()))/this.getAspectRatio(),a=new e.Rect(u.x-i/2,u.y-o/2,i,o),s=this._pixelFromPoint(this.zoomPoint,a).minus(n).divide(this._containerInnerSize.x*r),c.plus(s)):c},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var n=new e.Rect(t.x,t.y,t.width,t.height);if(this.wrapHorizontal);else{var r=this.visibilityRatio*n.width,i=n.x+n.width,o=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,a=this._contentBoundsNoRotate.x-i+r,s=o-n.x-r;r>this._contentBoundsNoRotate.width?n.x+=(a+s)/2:s<0?n.x+=s:a>0&&(n.x+=a)}if(this.wrapVertical);else{var u=this.visibilityRatio*n.height,c=n.y+n.height,l=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,h=this._contentBoundsNoRotate.y-c+u,f=l-n.y-u;u>this._contentBoundsNoRotate.height?n.y+=(h+f)/2:f<0?n.y+=f:h>0&&(n.y+=h)}return n},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var r=this.getBoundsNoRotate(),i=this._applyBoundaryConstraints(r);return this._raiseConstraintsEvent(e),(r.x!==i.x||r.y!==i.y||e)&&this.fitBounds(i.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){var r=(n=n||{}).immediately||!1,i=n.constraints||!1,o=this.getAspectRatio(),a=t.getCenter(),s=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();s.getAspectRatio()>=o?s.height=s.width/o:s.width=s.height*o,s.x=a.x-s.width/2,s.y=a.y-s.height/2;var u=1/s.width;if(i){var c=s.getAspectRatio(),l=this._applyZoomConstraints(u);u!==l&&(u=l,s.width=1/u,s.x=a.x-s.width/2,s.height=s.width/c,s.y=a.y-s.height/2),a=(s=this._applyBoundaryConstraints(s)).getCenter(),this._raiseConstraintsEvent(r)}if(r)return this.panTo(a,!0),this.zoomTo(u,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var h=this.getBounds(),f=this.getZoom();if(0===f||Math.abs(u/f-1)<1e-8)return this.zoomTo(u,!0),this.panTo(a,r);var d=(s=s.rotate(-this.getRotation())).getTopLeft().times(u).minus(h.getTopLeft().times(f)).divide(u-f);return this.zoomTo(u,d,r)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,n){var r=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(r.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,r){var i=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,r?this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.resetTo(t)}):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:r}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var n,r=this.getBoundsNoRotate(),i=r;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,i.width=r.width*n,i.height=i.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(i,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint(function(){e.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var n=this.pixelFromPoint(this.zoomPoint,!0).minus(t),r=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var r=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/r.width).plus(r.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,n){var r=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/r,n*this._contentSizeNoRotate.x/r)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===r){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,n,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var r=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*r,n/this._contentSizeNoRotate.x*r)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===r){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,n,!0)}}var i=this._imageToViewportDelta(t,n);return i.x+=this._contentBoundsNoRotate.x,i.y+=this._contentBoundsNoRotate.y,i},imageToViewportRectangle:function(t,n,r,i){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,n,r,i)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===a){return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,n,r,i,!0)}}var s=this.imageToViewportCoordinates(o.x,o.y),u=this._imageToViewportDelta(o.width,o.height);return new e.Rect(s.x,s.y,u.x,u.y,o.degrees)},viewportToImageRectangle:function(t,n,r,i){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,n,r,i)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===a){return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,n,r,i,!0)}}var s=this.viewportToImageCoordinates(o.x,o.y),u=this._viewportToImageDelta(o.width,o.height);return new e.Rect(s.x,s.y,u.x,u.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}}var r=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/r*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e?this:(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e}),this)}}}(OpenSeadragon),function(e){function t(e,t,r,i,o,a,u,c,l){var h=u.getBoundingBox().getTopLeft(),f=u.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:i,opacity:o,visibility:a,drawArea:u,topleft:h,bottomright:f,currenttime:c,best:l}),s(e.coverage,i),s(e.loadingCoverage,i);for(var d=e._getCornerTiles(i,h,f),g=d.topLeft,p=d.bottomRight,v=e.source.getNumTiles(i),m=e.viewport.pixelFromPoint(e.viewport.getCenter()),b=g.x;b<=p.x;b++)for(var w=g.y;w<=p.y;w++){if(!e.wrapHorizontal&&!e.wrapVertical){var y=e.source.getTileBounds(i,b,w);if(null===u.intersection(y))continue}l=n(e,r,t,b,w,i,o,a,m,v,c,l)}return l}function n(t,n,i,s,u,c,l,h,f,d,g,p){var v=function(t,n,r,i,o,a,s,u,c,l){var h,f,d,g,p,v,m,b,w;a[r]||(a[r]={});a[r][t]||(a[r][t]={});a[r][t][n]||(h=(u.x+t%u.x)%u.x,f=(u.y+n%u.y)%u.y,d=o.getTileBounds(r,h,f),g=o.getTileBounds(r,h,f,!0),p=o.tileExists(r,h,f),v=o.getTileUrl(r,h,f),i.loadTilesWithAjax?(m=o.getTileAjaxHeaders(r,h,f),e.isPlainObject(i.ajaxHeaders)&&(m=e.extend({},i.ajaxHeaders,m))):m=null,b=o.getContext2D?o.getContext2D(r,h,f):void 0,d.x+=(t-h)/u.x,d.y+=l/c*((n-f)/u.y),w=new e.Tile(r,t,n,d,p,v,b,i.loadTilesWithAjax,m,g),h===u.x-1&&(w.isRightMost=!0),f===u.y-1&&(w.isBottomMost=!0),a[r][t][n]=w);return(w=a[r][t][n]).lastTouchTime=s,w}(s,u,c,t,t.source,t.tilesMatrix,g,d,t._worldWidthCurrent,t._worldHeightCurrent),m=i;t.viewer&&t.viewer.raiseEvent("update-tile",{tiledImage:t,tile:v}),a(t.coverage,c,s,u,!1);var b=v.loaded||v.loading||o(t.loadingCoverage,c,s,u);if(a(t.loadingCoverage,c,s,u,b),!v.exists)return p;if(n&&!m&&(o(t.coverage,c,s,u)?a(t.coverage,c,s,u,!0):m=!0),!m)return p;if(function(t,n,r,i,o,a){var s=t.bounds.getTopLeft();s.x*=a._scaleSpring.current.value,s.y*=a._scaleSpring.current.value,s.x+=a._xSpring.current.value,s.y+=a._ySpring.current.value;var u=t.bounds.getSize();u.x*=a._scaleSpring.current.value,u.y*=a._scaleSpring.current.value;var c=r.pixelFromPointNoRotate(s,!0),l=r.pixelFromPointNoRotate(s,!1),h=r.deltaPixelsFromPointsNoRotate(u,!0),f=r.deltaPixelsFromPointsNoRotate(u,!1),d=l.plus(f.divide(2)),g=i.squaredDistanceTo(d);n||(h=h.plus(new e.Point(1,1)));t.isRightMost&&a.wrapHorizontal&&(h.x+=.75);t.isBottomMost&&a.wrapVertical&&(h.y+=.75);t.position=c,t.size=h,t.squaredDistance=g,t.visibility=o}(v,t.source.tileOverlap,t.viewport,f,h,t),!v.loaded)if(v.context2D)r(t,v);else{var w=t._tileCache.getImageRecord(v.cacheKey);if(w)r(t,v,w.getImage())}v.loaded?function(e,t,n,r,i,o,s){var u,c,l=1e3*e.blendTime;t.blendStart||(t.blendStart=s);u=s-t.blendStart,c=l?Math.min(1,u/l):1,e.alwaysBlend&&(c*=o);if(t.opacity=c,e.lastDrawn.push(t),1==c)a(e.coverage,i,n,r,!0),e._hasOpaqueTile=!0;else if(u<l)return!0;return!1}(t,v,s,u,c,l,g)&&(t._needsDraw=!0):v.loading?t._tilesLoading++:b||(p=function(e,t){if(!e)return t;if(t.visibility>e.visibility)return t;if(t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance)return t;return e}(p,v));return p}function r(e,t,n,r,i){var o=0;function a(){return o++,s}function s(){0===--o&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:r,tiledImage:e}),e._needsDraw=!0)}e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:i,image:n,getCompletionCallback:a}),a()()}function i(e,t,n,r){var i,o,a,s;if(!e[t])return!1;if(void 0===n||void 0===r){for(a in i=e[t])if(i.hasOwnProperty(a))for(s in o=i[a])if(o.hasOwnProperty(s)&&!o[s])return!1;return!0}return void 0===e[t][n]||void 0===e[t][n][r]||!0===e[t][n][r]}function o(e,t,n,r){return void 0===n||void 0===r?i(e,t+1):i(e,t+1,2*n,2*r)&&i(e,t+1,2*n,2*r+1)&&i(e,t+1,2*n+1,2*r)&&i(e,t+1,2*n+1,2*r+1)}function a(t,n,r,i,o){t[n]?(t[n][r]||(t[n][r]={}),t[n][r][i]=o):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function s(e,t){e[t]={}}e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var r=t.x||0;delete t.x;var i=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var o=1;t.width?(o=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(o=t.height/this.normHeight,delete t.height);var a=t.fitBounds;delete t.fitBounds;var s=t.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete t.fitBoundsPlacement;var u=t.degrees||0;delete t.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),a&&this.fitBounds(a,s,!0),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update();return!!(e||t||n||r)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var n=this.getBoundsNoRotate(t);if(this._clip){var r=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,i=this._clip.times(r);n=new e.Rect(n.x+i.x,n.y+i.y,i.width,i.height)}return n.rotate(this.getRotation(t),this._getRotationPoint(t))},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,n,r){var i=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/i),n*(this.source.dimensions.y*this.contentAspectX/i))},viewportToImageCoordinates:function(t,n,r){var i;return t instanceof e.Point?(r=n,i=t):i=new e.Point(t,n),i=i.rotate(-this.getRotation(r),this._getRotationPoint(r)),r?this._viewportToImageDelta(i.x-this._xSpring.current.value,i.y-this._ySpring.current.value):this._viewportToImageDelta(i.x-this._xSpring.target.value,i.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,r){var i=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*i,n/this.source.dimensions.y/this.contentAspectX*i)},imageToViewportCoordinates:function(t,n,r){t instanceof e.Point&&(r=n,n=t.y,t=t.x);var i=this._imageToViewportDelta(t,n);return r?(i.x+=this._xSpring.current.value,i.y+=this._ySpring.current.value):(i.x+=this._xSpring.target.value,i.y+=this._ySpring.target.value),i.rotate(this.getRotation(r),this._getRotationPoint(r))},imageToViewportRectangle:function(t,n,r,i,o){var a=t;a instanceof e.Rect?o=n:a=new e.Rect(t,n,r,i);var s=this.imageToViewportCoordinates(a.getTopLeft(),o),u=this._imageToViewportDelta(a.width,a.height,o);return new e.Rect(s.x,s.y,u.x,u.y,a.degrees+this.getRotation(o))},viewportToImageRectangle:function(t,n,r,i,o){var a=t;t instanceof e.Rect?o=n:a=new e.Rect(t,n,r,i);var s=this.viewportToImageCoordinates(a.getTopLeft(),o),u=this._viewportToImageDelta(a.width,a.height,o);return new e.Rect(s.x,s.y,u.x,u.y,a.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var n=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/n,(t.y-this._ySpring.current.value)/n,t.width/n,t.height/n,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},fitBounds:function(t,n,r){n=n||e.Placement.CENTER;var i=e.Placement.properties[n],o=this.contentAspectX,a=0,s=0,u=1,c=1;if(this._clip&&(o=this._clip.getAspectRatio(),u=this._clip.width/this.source.dimensions.x,c=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(a=this._clip.x/this._clip.height*t.height,s=this._clip.y/this._clip.height*t.height):(a=this._clip.x/this._clip.width*t.width,s=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o){var l=t.height/c,h=0;i.isHorizontallyCentered?h=(t.width-t.height*o)/2:i.isRight&&(h=t.width-t.height*o),this.setPosition(new e.Point(t.x-a+h,t.y-s),r),this.setHeight(l,r)}else{var f=t.width/u,d=0;i.isVerticallyCentered?d=(t.height-t.width/o)/2:i.isBottom&&(d=t.height-t.width/o),this.setPosition(new e.Point(t.x-a,t.y-s+d),r),this.setWidth(f,r)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),{lowestLevel:e=Math.min(e,n),highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var n=this.viewport,o=this._viewportToTiledImageRectangle(n.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var a=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(o=o.intersection(a)))return}for(var s=this._getLevelsInterval(),u=s.lowestLevel,c=s.highestLevel,l=null,h=!1,f=e.now(),d=c;d>=u;d--){var g=!1,p=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(d),!0).x*this._scaleSpring.current.value;if(d===u||!h&&p>=this.minPixelRatio)g=!0,h=!0;else if(!h)continue;var v=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(d),!1).x*this._scaleSpring.current.value,m=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,b=this.immediateRender?1:m;if(l=t(this,h,g,d,Math.min(1,(p-.5)/.5),b/Math.abs(b-v),o,f,l),i(this.coverage,d))break}!function(t,n){if(0===t.opacity||0===n.length&&!t.placeholderFillStyle)return;var r,i,o,a=n[0];a&&(r=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&a._hasTransparencyChannel());var s,u=t.viewport.getZoom(!0),c=t.viewportToImageZoom(u);n.length>1&&c>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360==0&&e.supportsCanvas&&(r=!0,i=a.getScaleForEdgeSmoothing(),o=a.getTranslationForEdgeSmoothing(i,t._drawer.getCanvasSize(!1),t._drawer.getCanvasSize(!0)));r&&(i||(s=t.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox().times(e.pixelDensityRatio)),t._drawer._clear(!0,s));i||(0!==t.viewport.degrees?t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:r}):t._drawer.viewer.viewport.flipped&&t._drawer._flip({}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:r}));var l=!1;if(t._clip){t._drawer.saveContext(r);var h=t.imageToViewportRectangle(t._clip,!0);h=h.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var f=t._drawer.viewportToDrawerRectangle(h);i&&(f=f.times(i)),o&&(f=f.translate(o)),t._drawer.setClip(f,r),l=!0}if(t.placeholderFillStyle&&!1===t._hasOpaqueTile){var d=t._drawer.viewportToDrawerRectangle(t.getBounds(!0));i&&(d=d.times(i)),o&&(d=d.translate(o));var g=null;g="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,t._drawer.context):t.placeholderFillStyle,t._drawer.drawRectangle(d,g,r)}for(var p=n.length-1;p>=0;p--)a=n[p],t._drawer.drawTile(a,t._drawingHandler,r,i,o),a.beingDrawn=!0,t.viewer&&t.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:a});l&&t._drawer.restoreContext(r);i||(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(r),0!==t.viewport.degrees?t._drawer._restoreRotationChanges(r):t._drawer.viewer.viewport.flipped&&t._drawer._flip({}));r&&(i&&(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:!1}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:!1})),t._drawer.blendSketch({opacity:t.opacity,scale:i,translate:o,compositeOperation:t.compositeOperation,bounds:s}),i&&(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(!1),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(!1)));!function(t,n){if(t.debugMode)for(var r=n.length-1;r>=0;r--){var i=n[r];try{t._drawer.drawDebugInfo(i,n.length,r,t)}catch(t){e.console.error(t)}}}(t,n)}(this,this.lastDrawn),l&&!l.context2D?(!function(t,n,i){n.loading=!0,t._imageLoader.addJob({src:n.url,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.ajaxHeaders,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:function(o,a,s){!function(t,n,i,o,a,s){if(!o)return e.console.log("Tile %s failed to load: %s - error: %s",n,n.url,a),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:i,message:a,tileRequest:s}),n.loading=!1,void(n.exists=!1);if(i<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);var u=function(){var e=t.source.getClosestLevel();r(t,n,o,e,s)};t._midDraw?window.setTimeout(u,1):u()}(t,n,i,o,a,s)},abort:function(){n.loading=!1}})}(this,l,f),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,n,r){var i,o,a,s;this.wrapHorizontal?(i=e.positiveModulo(n.x,1),o=e.positiveModulo(r.x,1)):(i=Math.max(0,n.x),o=Math.min(1,r.x));var u=1/this.source.aspectRatio;this.wrapVertical?(a=e.positiveModulo(n.y,u),s=e.positiveModulo(r.y,u)):(a=Math.max(0,n.y),s=Math.min(u,r.y));var c=this.source.getTileAtPoint(t,new e.Point(i,a)),l=this.source.getTileAtPoint(t,new e.Point(o,s)),h=this.source.getNumTiles(t);return this.wrapHorizontal&&(c.x+=h.x*Math.floor(n.x),l.x+=h.x*Math.floor(r.x)),this.wrapVertical&&(c.y+=h.y*Math.floor(n.y/u),l.y+=h.y*Math.floor(r.y/u)),{topLeft:c,bottomRight:l}}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};t.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(n){e.console.assert(n,"[TileCache.cacheTile] options is required"),e.console.assert(n.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(n.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(n.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=n.cutoff||0,i=this._tilesLoaded.length,o=this._imagesLoaded[n.tile.cacheKey];if(o||(e.console.assert(n.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),o=this._imagesLoaded[n.tile.cacheKey]=new t({image:n.image}),this._imagesLoadedCount++),o.addTile(n.tile),n.tile.cacheImageRecord=o,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,s,u,c,l,h,f=null,d=-1,g=null,p=this._tilesLoaded.length-1;p>=0;p--)(a=(h=this._tilesLoaded[p]).tile).level<=r||a.beingDrawn||(f?(c=a.lastTouchTime,s=f.lastTouchTime,l=a.level,u=f.level,(c<s||c==s&&l>u)&&(f=a,d=p,g=h)):(f=a,d=p,g=h));f&&d>=0&&(this._unloadTile(g),i=d)}this._tilesLoaded[i]=new function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage}({tile:n.tile,tiledImage:n.tiledImage})},clearTilesFor:function(t){var n;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var r=0;r<this._tilesLoaded.length;++r)(n=this._tilesLoaded[r]).tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(r,1),r--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,r=t.tiledImage;n.unload(),n.cacheImageRecord=null;var i=this._imagesLoaded[n.cacheKey];i.removeTile(n),i.getTileCount()||(i.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),r.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:r})}}}(OpenSeadragon),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(n=n||{}).index){var r=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(r,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var r=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==r&&-1!==r&&(this._items.splice(r,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:r,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var n,r=(t=t||{}).immediately||!1,i=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,a=t.columns||e.DEFAULT_SETTINGS.collectionColumns,s=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,u=s+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);n=!t.rows&&a?a:Math.ceil(this._items.length/o);var c,l,h,f,d,g=0,p=0;this.setAutoRefigureSizes(!1);for(var v=0;v<this._items.length;v++)v&&v%n==0&&("horizontal"===i?(p+=u,g=0):(g+=u,p=0)),f=(h=(l=(c=this._items[v]).getBounds()).width>l.height?s:s*(l.width/l.height))*(l.height/l.width),d=new e.Point(g+(s-h)/2,p+(s-f)/2),c.setPosition(d,r),c.setWidth(h,r),"horizontal"===i?g+=u:p+=u;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,r=this._contentFactor||0;if(this._items.length){var i=this._items[0],o=i.getBounds();this._contentFactor=i.getContentSize().x/o.width;for(var a=i.getClippedBounds().getBoundingBox(),s=a.x,u=a.y,c=a.x+a.width,l=a.y+a.height,h=1;h<this._items.length;h++)o=(i=this._items[h]).getBounds(),this._contentFactor=Math.max(this._contentFactor,i.getContentSize().x/o.width),a=i.getClippedBounds().getBoundingBox(),s=Math.min(s,a.x),u=Math.min(u,a.y),c=Math.max(c,a.x+a.width),l=Math.max(l,a.y+a.height);this._homeBounds=new e.Rect(s,u,c-s,l-u),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===r&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},function(e,t,n){e.exports=n.p+"index.html"},function(e,t,n){var r=n(6);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,".bgPrimary {\n  background-color: #006dd9; }\n  .bgPrimary.bgDesat {\n    background-color: #80b6ec; }\n  .bgPrimary.bgDesatHigh {\n    background-color: #e6f0fb; }\n  .bgPrimary.bgAlpha {\n    background-color: rgba(0, 109, 217, 0.5); }\n  .bgPrimary.bgAlphaHigh {\n    background-color: rgba(0, 109, 217, 0.2); }\n  .bgPrimary.bgHoverOnly {\n    background-color: transparent; }\n  .bgPrimary.bgHover:hover, .bgPrimary.bgHoverOnly:hover {\n    background-color: #003a73; }\n    .bgPrimary.bgHover:hover.bgDesat, .bgPrimary.bgHoverOnly:hover.bgDesat {\n      background-color: #66a7e8; }\n    .bgPrimary.bgHover:hover.bgDesatHigh, .bgPrimary.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #cce2f7; }\n    .bgPrimary.bgHover:hover.bgAlpha, .bgPrimary.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(0, 109, 217, 0.6); }\n    .bgPrimary.bgHover:hover.bgAlphaHigh, .bgPrimary.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(0, 109, 217, 0.3); }\n\n.bgSecondary {\n  background-color: #888888; }\n  .bgSecondary.bgDesat {\n    background-color: #c4c4c4; }\n  .bgSecondary.bgDesatHigh {\n    background-color: #f3f3f3; }\n  .bgSecondary.bgAlpha {\n    background-color: rgba(136, 136, 136, 0.5); }\n  .bgSecondary.bgAlphaHigh {\n    background-color: rgba(136, 136, 136, 0.2); }\n  .bgSecondary.bgHoverOnly {\n    background-color: transparent; }\n  .bgSecondary.bgHover:hover, .bgSecondary.bgHoverOnly:hover {\n    background-color: #555555; }\n    .bgSecondary.bgHover:hover.bgDesat, .bgSecondary.bgHoverOnly:hover.bgDesat {\n      background-color: #b8b8b8; }\n    .bgSecondary.bgHover:hover.bgDesatHigh, .bgSecondary.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #e7e7e7; }\n    .bgSecondary.bgHover:hover.bgAlpha, .bgSecondary.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(136, 136, 136, 0.6); }\n    .bgSecondary.bgHover:hover.bgAlphaHigh, .bgSecondary.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(136, 136, 136, 0.3); }\n\n.bgSuccess {\n  background-color: #52c037; }\n  .bgSuccess.bgDesat {\n    background-color: #a9e09b; }\n  .bgSuccess.bgDesatHigh {\n    background-color: #eef9eb; }\n  .bgSuccess.bgAlpha {\n    background-color: rgba(82, 192, 55, 0.5); }\n  .bgSuccess.bgAlphaHigh {\n    background-color: rgba(82, 192, 55, 0.2); }\n  .bgSuccess.bgHoverOnly {\n    background-color: transparent; }\n  .bgSuccess.bgHover:hover, .bgSuccess.bgHoverOnly:hover {\n    background-color: #307120; }\n    .bgSuccess.bgHover:hover.bgDesat, .bgSuccess.bgHoverOnly:hover.bgDesat {\n      background-color: #97d987; }\n    .bgSuccess.bgHover:hover.bgDesatHigh, .bgSuccess.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #dcf2d7; }\n    .bgSuccess.bgHover:hover.bgAlpha, .bgSuccess.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(82, 192, 55, 0.6); }\n    .bgSuccess.bgHover:hover.bgAlphaHigh, .bgSuccess.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(82, 192, 55, 0.3); }\n\n.bgWarning {\n  background-color: #ab9a11; }\n  .bgWarning.bgDesat {\n    background-color: #d5cd88; }\n  .bgWarning.bgDesatHigh {\n    background-color: #f7f5e7; }\n  .bgWarning.bgAlpha {\n    background-color: rgba(171, 154, 17, 0.5); }\n  .bgWarning.bgAlphaHigh {\n    background-color: rgba(171, 154, 17, 0.2); }\n  .bgWarning.bgHoverOnly {\n    background-color: transparent; }\n  .bgWarning.bgHover:hover, .bgWarning.bgHoverOnly:hover {\n    background-color: #4e4608; }\n    .bgWarning.bgHover:hover.bgDesat, .bgWarning.bgHoverOnly:hover.bgDesat {\n      background-color: #cdc270; }\n    .bgWarning.bgHover:hover.bgDesatHigh, .bgWarning.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #eeebcf; }\n    .bgWarning.bgHover:hover.bgAlpha, .bgWarning.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(171, 154, 17, 0.6); }\n    .bgWarning.bgHover:hover.bgAlphaHigh, .bgWarning.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(171, 154, 17, 0.3); }\n\n.bgError {\n  background-color: #db5e3f; }\n  .bgError.bgDesat {\n    background-color: #edaf9f; }\n  .bgError.bgDesatHigh {\n    background-color: #fbefec; }\n  .bgError.bgAlpha {\n    background-color: rgba(219, 94, 63, 0.5); }\n  .bgError.bgAlphaHigh {\n    background-color: rgba(219, 94, 63, 0.2); }\n  .bgError.bgHoverOnly {\n    background-color: transparent; }\n  .bgError.bgHover:hover, .bgError.bgHoverOnly:hover {\n    background-color: #98351c; }\n    .bgError.bgHover:hover.bgDesat, .bgError.bgHoverOnly:hover.bgDesat {\n      background-color: #e99e8c; }\n    .bgError.bgHover:hover.bgDesatHigh, .bgError.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #f8dfd9; }\n    .bgError.bgHover:hover.bgAlpha, .bgError.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(219, 94, 63, 0.6); }\n    .bgError.bgHover:hover.bgAlphaHigh, .bgError.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(219, 94, 63, 0.3); }\n\n.bgLight {\n  background-color: #e6e6e6; }\n  .bgLight.bgDesat {\n    background-color: #f3f3f3; }\n  .bgLight.bgDesatHigh {\n    background-color: #fdfdfd; }\n  .bgLight.bgAlpha {\n    background-color: rgba(230, 230, 230, 0.5); }\n  .bgLight.bgAlphaHigh {\n    background-color: rgba(230, 230, 230, 0.2); }\n  .bgLight.bgHoverOnly {\n    background-color: transparent; }\n  .bgLight.bgHover:hover, .bgLight.bgHoverOnly:hover {\n    background-color: #b3b3b3; }\n    .bgLight.bgHover:hover.bgDesat, .bgLight.bgHoverOnly:hover.bgDesat {\n      background-color: #f0f0f0; }\n    .bgLight.bgHover:hover.bgDesatHigh, .bgLight.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #fafafa; }\n    .bgLight.bgHover:hover.bgAlpha, .bgLight.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(230, 230, 230, 0.6); }\n    .bgLight.bgHover:hover.bgAlphaHigh, .bgLight.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(230, 230, 230, 0.3); }\n\n.bgDark {\n  background-color: #4d4d4d; }\n  .bgDark.bgDesat {\n    background-color: #a6a6a6; }\n  .bgDark.bgDesatHigh {\n    background-color: #ededed; }\n  .bgDark.bgAlpha {\n    background-color: rgba(77, 77, 77, 0.5); }\n  .bgDark.bgAlphaHigh {\n    background-color: rgba(77, 77, 77, 0.2); }\n  .bgDark.bgHoverOnly {\n    background-color: transparent; }\n  .bgDark.bgHover:hover, .bgDark.bgHoverOnly:hover {\n    background-color: #1a1a1a; }\n    .bgDark.bgHover:hover.bgDesat, .bgDark.bgHoverOnly:hover.bgDesat {\n      background-color: #949494; }\n    .bgDark.bgHover:hover.bgDesatHigh, .bgDark.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #dbdbdb; }\n    .bgDark.bgHover:hover.bgAlpha, .bgDark.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(77, 77, 77, 0.6); }\n    .bgDark.bgHover:hover.bgAlphaHigh, .bgDark.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(77, 77, 77, 0.3); }\n\n.bgLink {\n  background-color: #006dd9; }\n  .bgLink.bgDesat {\n    background-color: #80b6ec; }\n  .bgLink.bgDesatHigh {\n    background-color: #e6f0fb; }\n  .bgLink.bgAlpha {\n    background-color: rgba(0, 109, 217, 0.5); }\n  .bgLink.bgAlphaHigh {\n    background-color: rgba(0, 109, 217, 0.2); }\n  .bgLink.bgHoverOnly {\n    background-color: transparent; }\n  .bgLink.bgHover:hover, .bgLink.bgHoverOnly:hover {\n    background-color: #003a73; }\n    .bgLink.bgHover:hover.bgDesat, .bgLink.bgHoverOnly:hover.bgDesat {\n      background-color: #66a7e8; }\n    .bgLink.bgHover:hover.bgDesatHigh, .bgLink.bgHoverOnly:hover.bgDesatHigh {\n      background-color: #cce2f7; }\n    .bgLink.bgHover:hover.bgAlpha, .bgLink.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(0, 109, 217, 0.6); }\n    .bgLink.bgHover:hover.bgAlphaHigh, .bgLink.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(0, 109, 217, 0.3); }\n\n.bgWhite {\n  background-color: white; }\n  .bgWhite.bgDesat {\n    background-color: white; }\n  .bgWhite.bgDesatHigh {\n    background-color: white; }\n  .bgWhite.bgAlpha {\n    background-color: rgba(255, 255, 255, 0.5); }\n  .bgWhite.bgAlphaHigh {\n    background-color: rgba(255, 255, 255, 0.2); }\n  .bgWhite.bgHoverOnly {\n    background-color: transparent; }\n  .bgWhite.bgHover:hover, .bgWhite.bgHoverOnly:hover {\n    background-color: #cccccc; }\n    .bgWhite.bgHover:hover.bgDesat, .bgWhite.bgHoverOnly:hover.bgDesat {\n      background-color: white; }\n    .bgWhite.bgHover:hover.bgDesatHigh, .bgWhite.bgHoverOnly:hover.bgDesatHigh {\n      background-color: white; }\n    .bgWhite.bgHover:hover.bgAlpha, .bgWhite.bgHoverOnly:hover.bgAlpha {\n      background-color: rgba(255, 255, 255, 0.6); }\n    .bgWhite.bgHover:hover.bgAlphaHigh, .bgWhite.bgHoverOnly:hover.bgAlphaHigh {\n      background-color: rgba(255, 255, 255, 0.3); }\n\n.textPrimary {\n  color: #006dd9; }\n  .textPrimary.textDarken {\n    color: #002040; }\n  .textPrimary.textDarkenHigh {\n    color: black; }\n  .textPrimary.textHover:hover {\n    color: #003a73; }\n    .textPrimary.textHover:hover.textDarken {\n      color: #00070d; }\n    .textPrimary.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textSecondary {\n  color: #888888; }\n  .textSecondary.textDarken {\n    color: #3c3c3c; }\n  .textSecondary.textDarkenHigh {\n    color: #090909; }\n  .textSecondary.textHover:hover {\n    color: #555555; }\n    .textSecondary.textHover:hover.textDarken {\n      color: #222222; }\n    .textSecondary.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textSuccess {\n  color: #52c037; }\n  .textSuccess.textDarken {\n    color: #1f4915; }\n  .textSuccess.textDarkenHigh {\n    color: black; }\n  .textSuccess.textHover:hover {\n    color: #307120; }\n    .textSuccess.textHover:hover.textDarken {\n      color: #0e210a; }\n    .textSuccess.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textWarning {\n  color: #ab9a11; }\n  .textWarning.textDarken {\n    color: #201d03; }\n  .textWarning.textDarkenHigh {\n    color: black; }\n  .textWarning.textHover:hover {\n    color: #4e4608; }\n    .textWarning.textHover:hover.textDarken {\n      color: black; }\n    .textWarning.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textError {\n  color: #db5e3f; }\n  .textError.textDarken {\n    color: #6d2614; }\n  .textError.textDarkenHigh {\n    color: #170804; }\n  .textError.textHover:hover {\n    color: #98351c; }\n    .textError.textHover:hover.textDarken {\n      color: #42170c; }\n    .textError.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textLink {\n  color: #006dd9; }\n  .textLink.textDarken {\n    color: #002040; }\n  .textLink.textDarkenHigh {\n    color: black; }\n  .textLink.textHover:hover {\n    color: #003a73; }\n    .textLink.textHover:hover.textDarken {\n      color: #00070d; }\n    .textLink.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textDefault {\n  color: #333333; }\n  .textDefault.textDarken {\n    color: black; }\n  .textDefault.textDarkenHigh {\n    color: black; }\n  .textDefault.textHover:hover {\n    color: black; }\n    .textDefault.textHover:hover.textDarken {\n      color: black; }\n    .textDefault.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.textDim {\n  color: #666666; }\n  .textDim.textDarken {\n    color: #1a1a1a; }\n  .textDim.textDarkenHigh {\n    color: black; }\n  .textDim.textHover:hover {\n    color: #333333; }\n    .textDim.textHover:hover.textDarken {\n      color: black; }\n    .textDim.textHover:hover.textDarkenHigh {\n      color: black; }\n\n.borderPrimary {\n  border-color: #006dd9; }\n  .borderPrimary.borderDarken {\n    color: black; }\n\n.borderSecondary {\n  border-color: #888888; }\n  .borderSecondary.borderDarken {\n    color: #090909; }\n\n.borderSuccess {\n  border-color: #52c037; }\n  .borderSuccess.borderDarken {\n    color: black; }\n\n.borderWarning {\n  border-color: #ab9a11; }\n  .borderWarning.borderDarken {\n    color: black; }\n\n.borderError {\n  border-color: #db5e3f; }\n  .borderError.borderDarken {\n    color: #170804; }\n\n.borderLight {\n  border-color: #e6e6e6; }\n  .borderLight.borderDarken {\n    color: #676767; }\n\n.borderDark {\n  border-color: #4d4d4d; }\n  .borderDark.borderDarken {\n    color: black; }\n\n* {\n  padding: 0;\n  margin: 0; }\n\na {\n  color: #006dd9; }\n  a:hover {\n    color: #003a73; }\n  a img {\n    border: none; }\n\n.formattedContent p {\n  margin-block-start: 1rem;\n  margin-block-end: 1rem; }\n\nbody {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  color: #333333; }\n\n.hide {\n  display: none !important; }\n\n.fullWidth {\n  width: 100%;\n  box-sizing: border-box; }\n\n.fullHeight {\n  height: 100%;\n  box-sizing: border-box; }\n\n.row {\n  display: flex;\n  flex-direction: row;\n  align-items: center; }\n  .row.spacing1 > * {\n    margin-left: 1px; }\n  .row.spacing1 > *:first-child {\n    margin-left: 0; }\n  .row.spacing1.wrap > * {\n    margin-left: 0;\n    margin-right: 1px;\n    margin-bottom: 1px; }\n  .row.spacing1.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row.spacing5 > * {\n    margin-left: 5px; }\n  .row.spacing5 > *:first-child {\n    margin-left: 0; }\n  .row.spacing5.wrap > * {\n    margin-left: 0;\n    margin-right: 5px;\n    margin-bottom: 5px; }\n  .row.spacing5.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row.spacing10 > * {\n    margin-left: 10px; }\n  .row.spacing10 > *:first-child {\n    margin-left: 0; }\n  .row.spacing10.wrap > * {\n    margin-left: 0;\n    margin-right: 10px;\n    margin-bottom: 10px; }\n  .row.spacing10.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row.spacing15 > * {\n    margin-left: 15px; }\n  .row.spacing15 > *:first-child {\n    margin-left: 0; }\n  .row.spacing15.wrap > * {\n    margin-left: 0;\n    margin-right: 15px;\n    margin-bottom: 15px; }\n  .row.spacing15.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row.spacing20 > * {\n    margin-left: 20px; }\n  .row.spacing20 > *:first-child {\n    margin-left: 0; }\n  .row.spacing20.wrap > * {\n    margin-left: 0;\n    margin-right: 20px;\n    margin-bottom: 20px; }\n  .row.spacing20.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row.spacing25 > * {\n    margin-left: 25px; }\n  .row.spacing25 > *:first-child {\n    margin-left: 0; }\n  .row.spacing25.wrap > * {\n    margin-left: 0;\n    margin-right: 25px;\n    margin-bottom: 25px; }\n  .row.spacing25.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row.spacing30 > * {\n    margin-left: 30px; }\n  .row.spacing30 > *:first-child {\n    margin-left: 0; }\n  .row.spacing30.wrap > * {\n    margin-left: 0;\n    margin-right: 30px;\n    margin-bottom: 30px; }\n  .row.spacing30.wrap > *:last-child {\n    margin-left: 0;\n    margin-right: 0; }\n  .row > .fullWidth {\n    flex-grow: 1;\n    width: unset; }\n  .row > .fullHeight {\n    align-self: stretch;\n    height: unset; }\n\n.column {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start; }\n  .column.spacing1 > * {\n    margin-top: 1px; }\n  .column.spacing1 > *:first-child {\n    margin-top: 0; }\n  .column.spacing1.wrap > * {\n    margin-top: 0;\n    margin-bottom: 1px;\n    margin-right: 1px; }\n  .column.spacing1.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column.spacing5 > * {\n    margin-top: 5px; }\n  .column.spacing5 > *:first-child {\n    margin-top: 0; }\n  .column.spacing5.wrap > * {\n    margin-top: 0;\n    margin-bottom: 5px;\n    margin-right: 5px; }\n  .column.spacing5.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column.spacing10 > * {\n    margin-top: 10px; }\n  .column.spacing10 > *:first-child {\n    margin-top: 0; }\n  .column.spacing10.wrap > * {\n    margin-top: 0;\n    margin-bottom: 10px;\n    margin-right: 10px; }\n  .column.spacing10.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column.spacing15 > * {\n    margin-top: 15px; }\n  .column.spacing15 > *:first-child {\n    margin-top: 0; }\n  .column.spacing15.wrap > * {\n    margin-top: 0;\n    margin-bottom: 15px;\n    margin-right: 15px; }\n  .column.spacing15.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column.spacing20 > * {\n    margin-top: 20px; }\n  .column.spacing20 > *:first-child {\n    margin-top: 0; }\n  .column.spacing20.wrap > * {\n    margin-top: 0;\n    margin-bottom: 20px;\n    margin-right: 20px; }\n  .column.spacing20.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column.spacing25 > * {\n    margin-top: 25px; }\n  .column.spacing25 > *:first-child {\n    margin-top: 0; }\n  .column.spacing25.wrap > * {\n    margin-top: 0;\n    margin-bottom: 25px;\n    margin-right: 25px; }\n  .column.spacing25.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column.spacing30 > * {\n    margin-top: 30px; }\n  .column.spacing30 > *:first-child {\n    margin-top: 0; }\n  .column.spacing30.wrap > * {\n    margin-top: 0;\n    margin-bottom: 30px;\n    margin-right: 30px; }\n  .column.spacing30.wrap > *:last-child {\n    margin-top: 0;\n    margin-bottom: 0; }\n  .column > .fullWidth {\n    align-self: stretch;\n    width: unset; }\n  .column > .fullHeight {\n    flex-grow: 1;\n    height: unset; }\n\n.row.wrap, .column.wrap {\n  flex-wrap: wrap; }\n\n.row > *, .column > * {\n  flex-shrink: 0;\n  position: relative; }\n\n.el {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start; }\n  .el > .fullWidth {\n    align-self: stretch;\n    width: unset; }\n  .el > .fullHeight {\n    flex-grow: 1;\n    height: unset; }\n\n.screen {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n\n.grid {\n  display: grid; }\n\n.grid > div > div.el > * {\n  max-width: 100%; }\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),a=null,s=0,u=[],c=n(9);function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function f(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertAt.before,n);n.insertBefore(t,i)}}function d(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return p(t,e.attrs),f(e,t),t}function p(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var u=s++;n=a||(a=g(t)),r=b.bind(null,n,u,!1),i=b.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",p(t,e.attrs),f(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){d(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return l(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&l(h(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t){!function(e){"use strict";function t(e,t,n){return n.a=e,n.f=t,n}function n(e){return t(2,e,function(t){return function(n){return e(t,n)}})}function r(e){return t(3,e,function(t){return function(n){return function(r){return e(t,n,r)}}})}function i(e){return t(4,e,function(t){return function(n){return function(r){return function(i){return e(t,n,r,i)}}}})}function o(e){return t(5,e,function(t){return function(n){return function(r){return function(i){return function(o){return e(t,n,r,i,o)}}}}})}function a(e){return t(6,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return e(t,n,r,i,o,a)}}}}}})}function s(e){return t(7,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return e(t,n,r,i,o,a,s)}}}}}}})}function u(e){return t(8,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return function(u){return e(t,n,r,i,o,a,s,u)}}}}}}}})}function c(e){return t(9,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return function(u){return function(c){return e(t,n,r,i,o,a,s,u,c)}}}}}}}}})}function l(e,t,n){return 2===e.a?e.f(t,n):e(t)(n)}function h(e,t,n,r){return 3===e.a?e.f(t,n,r):e(t)(n)(r)}function f(e,t,n,r,i){return 4===e.a?e.f(t,n,r,i):e(t)(n)(r)(i)}function d(e,t,n,r,i,o){return 5===e.a?e.f(t,n,r,i,o):e(t)(n)(r)(i)(o)}function g(e,t,n,r,i,o,a){return 6===e.a?e.f(t,n,r,i,o,a):e(t)(n)(r)(i)(o)(a)}function p(e,t,n,r,i,o,a,s){return 7===e.a?e.f(t,n,r,i,o,a,s):e(t)(n)(r)(i)(o)(a)(s)}function v(e,t,n,r,i,o,a,s,u){return 8===e.a?e.f(t,n,r,i,o,a,s,u):e(t)(n)(r)(i)(o)(a)(s)(u)}console.warn("Compiled in DEV mode. Follow the advice at https://elm-lang.org/0.19.0/optimize for better performance and smaller assets.");var m=r(function(e,t,n){for(var r=new Array(e),i=0;i<e;i++)r[i]=n(t+i);return r}),b=n(function(e,t){for(var n=new Array(e),r=0;r<e&&t.b;r++)n[r]=t.a,t=t.b;return n.length=r,D(n,t)}),w=(n(function(e,t){return t[e]}),r(function(e,t,n){for(var r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=n[o];return i[e]=t,i}),n(function(e,t){for(var n=t.length,r=new Array(n+1),i=0;i<n;i++)r[i]=t[i];return r[n]=e,r}),r(function(e,t,n){for(var r=n.length,i=0;i<r;i++)t=l(e,n[i],t);return t}),r(function(e,t,n){for(var r=n.length-1;r>=0;r--)t=l(e,n[r],t);return t})),y=(n(function(e,t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e(t[i]);return r}),r(function(e,t,n){for(var r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=l(e,t+o,n[o]);return i}),r(function(e,t,n){return n.slice(e,t)}),r(function(e,t,n){var r=t.length,i=e-r;i>n.length&&(i=n.length);for(var o=new Array(r+i),a=0;a<r;a++)o[a]=t[a];for(a=0;a<i;a++)o[a+r]=n[a];return o}),n(function(e,t){return t}),n(function(e,t){return console.log(e+": "+x(t)),t}));function x(e){return function e(t,n){if("function"==typeof n)return _(t,"<function>");if("boolean"==typeof n)return S(t,n?"True":"False");if("number"==typeof n)return function(e,t){return e?"[95m"+t+"[0m":t}(t,n+"");if(n instanceof String)return function(e,t){return e?"[92m"+t+"[0m":t}(t,"'"+T(n,!0)+"'");if("string"==typeof n)return function(e,t){return e?"[93m"+t+"[0m":t}(t,'"'+T(n,!1)+'"');if("object"==typeof n&&"$"in n){var r=n.$;if("number"==typeof r)return _(t,"<internals>");if("#"===r[0]){var i=[];for(var o in n)"$"!==o&&i.push(e(t,n[o]));return"("+i.join(",")+")"}if("Set_elm_builtin"===r)return S(t,"Set")+E(t,".fromList")+" "+e(t,kn(n));if("RBNode_elm_builtin"===r||"RBEmpty_elm_builtin"===r)return S(t,"Dict")+E(t,".fromList")+" "+e(t,Rn(n));if("Array_elm_builtin"===r)return S(t,"Array")+E(t,".fromList")+" "+e(t,_n(n));if("::"===r||"[]"===r){var i="[";for(n.b&&(i+=e(t,n.a),n=n.b);n.b;n=n.b)i+=","+e(t,n.a);return i+"]"}var i="";for(var a in n)if("$"!==a){var s=e(t,n[a]),u=s[0],c="{"===u||"("===u||"["===u||"<"===u||'"'===u||s.indexOf(" ")<0;i+=" "+(c?s:"("+s+")")}return S(t,r)+i}if("object"==typeof n){var i=[];for(var l in n){var h="_"===l[0]?l.slice(1):l;i.push(E(t,h)+" = "+e(t,n[l]))}return 0===i.length?"{}":"{ "+i.join(", ")+" }"}return _(t,"<internals>")}(!1,e)}function T(e,t){var n=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return t?n.replace(/\'/g,"\\'"):n.replace(/\"/g,'\\"')}function S(e,t){return e?"[96m"+t+"[0m":t}function E(e,t){return e?"[37m"+t+"[0m":t}function _(e,t){return e?"[94m"+t+"[0m":t}function C(e,t,n,r,i){switch(e){case 0:throw new Error('What node should I take over? In JavaScript I need something like:\n\n    Elm.Main.init({\n        node: document.getElementById("elm-node")\n    })\n\nYou need to do this with any Browser.sandbox or Browser.element program.');case 1:throw new Error("Browser.application programs cannot handle URLs like this:\n\n    "+document.location.href+"\n\nWhat is the root? The root of your file system? Try looking at this program with `elm reactor` or some other server.");case 2:throw new Error("Problem with the flags given to your Elm program on initialization.\n\n"+t);case 3:var o=t;throw new Error("There can only be one port named `"+o+"`, but your program has multiple.");case 4:o=t;throw new Error("Trying to send an unexpected type of value through port `"+o+"`:\n"+n);case 5:throw new Error('Trying to use `(==)` on functions.\nThere is no way to know if functions are "the same" in the Elm sense.\nRead more about this at https://package.elm-lang.org/packages/elm/core/latest/Basics#== which describes why it is this way and what the better version will look like.');case 6:var a=t;throw new Error("Your page is loading multiple Elm scripts with a module named "+a+". Maybe a duplicate script is getting loaded accidentally? If not, rename one of them so I know which is which!");case 8:a=t;var s=n,u=r;throw new Error("TODO in module `"+a+"` "+P(s)+"\n\n"+u);case 9:a=t,s=n;var c=r;u=i;throw new Error("TODO in module `"+a+"` from the `case` expression "+P(s)+"\n\nIt received the following value:\n\n    "+x(c).replace("\n","\n    ")+"\n\nBut the branch that handles it says:\n\n    "+u.replace("\n","\n    "));case 10:throw new Error("Bug in https://github.com/elm/virtual-dom/issues");case 11:throw new Error("Cannot perform mod 0. Division by zero error.")}}function P(e){return e.start.line===e.end.line?"on line "+e.start.line:"on lines "+e.start.line+" through "+e.end.line}function R(e,t){for(var n,r=[],i=k(e,t,0,r);i&&(n=r.pop());i=k(n.a,n.b,0,r));return i}function k(e,t,n,r){if(n>100)return r.push(D(e,t)),!0;if(e===t)return!0;if("object"!=typeof e||null===e||null===t)return"function"==typeof e&&C(5),!1;for(var i in"Set_elm_builtin"===e.$&&(e=kn(e),t=kn(t)),"RBNode_elm_builtin"!==e.$&&"RBEmpty_elm_builtin"!==e.$||(e=Rn(e),t=Rn(t)),e)if(!k(e[i],t[i],n+1,r))return!1;return!0}n(R),n(function(e,t){return!R(e,t)});function O(e,t,n){if("object"!=typeof e)return e===t?0:e<t?-1:1;if(e instanceof String){var r=e.valueOf(),i=t.valueOf();return r===i?0:r<i?-1:1}if("#"===e.$[0])return(n=O(e.a,t.a))?n:(n=O(e.b,t.b))?n:O(e.c,t.c);for(;e.b&&t.b&&!(n=O(e.a,t.a));e=e.b,t=t.b);return n||(e.b?1:t.b?-1:0)}n(function(e,t){return O(e,t)<0}),n(function(e,t){return O(e,t)<1}),n(function(e,t){return O(e,t)>0}),n(function(e,t){return O(e,t)>=0});var $=n(function(e,t){var n=O(e,t);return n<0?xn:n?Cn:yn}),M={$:"#0"};function D(e,t){return{$:"#2",a:e,b:t}}function H(e,t,n){return{$:"#3",a:e,b:t,c:n}}function L(e){return new String(e)}function I(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var A=n(B);function B(e,t){if("string"==typeof e)return e+t;if(!e.b)return t;var n=N(e.a,t);e=e.b;for(var r=n;e.b;e=e.b)r=r.b=N(e.a,t);return n}var z={$:"[]"};function N(e,t){return{$:"::",a:e,b:t}}var F=n(N);function W(e){for(var t=z,n=e.length;n--;)t=N(e[n],t);return t}function j(e){for(var t=[];e.b;e=e.b)t.push(e.a);return t}var V=r(function(e,t,n){for(var r=[];t.b&&n.b;t=t.b,n=n.b)r.push(l(e,t.a,n.a));return W(r)}),U=(i(function(e,t,n,r){for(var i=[];t.b&&n.b&&r.b;t=t.b,n=n.b,r=r.b)i.push(h(e,t.a,n.a,r.a));return W(i)}),o(function(e,t,n,r,i){for(var o=[];t.b&&n.b&&r.b&&i.b;t=t.b,n=n.b,r=r.b,i=i.b)o.push(f(e,t.a,n.a,r.a,i.a));return W(o)}),a(function(e,t,n,r,i,o){for(var a=[];t.b&&n.b&&r.b&&i.b&&o.b;t=t.b,n=n.b,r=r.b,i=i.b,o=o.b)a.push(d(e,t.a,n.a,r.a,i.a,o.a));return W(a)}),n(function(e,t){return W(j(t).sort(function(t,n){return O(e(t),e(n))}))})),q=(n(function(e,t){return W(j(t).sort(function(t,n){var r=l(e,t,n);return r===yn?0:r===xn?-1:1}))}),n(function(e,t){return e+t}),n(function(e,t){return e-t}),n(function(e,t){return e*t}),n(function(e,t){return e/t}),n(function(e,t){return e/t|0}),n(Math.pow));n(function(e,t){return t%e}),n(function(e,t){var n=t%e;return 0===e?C(11):n>0&&e<0||n<0&&e>0?n+e:n}),Math.PI,Math.E,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,n(Math.atan2);var G=Math.ceil,Z=Math.floor,J=Math.round,X=Math.sqrt,Y=Math.log;isNaN;n(function(e,t){return e&&t}),n(function(e,t){return e||t}),n(function(e,t){return e!==t});var K=n(function(e,t){return e+t});n(function(e,t){return e+t});n(function(e,t){for(var n=t.length,r=new Array(n),i=0;i<n;){var o=t.charCodeAt(i);55296<=o&&o<=56319?(r[i]=e(L(t[i]+t[i+1])),i+=2):(r[i]=e(L(t[i])),i++)}return r.join("")}),n(function(e,t){for(var n=[],r=t.length,i=0;i<r;){var o=t[i],a=t.charCodeAt(i);i++,55296<=a&&a<=56319&&(o+=t[i],i++),e(L(o))&&n.push(o)}return n.join("")});var Q=r(function(e,t,n){for(var r=n.length,i=0;i<r;){var o=n[i],a=n.charCodeAt(i);i++,55296<=a&&a<=56319&&(o+=n[i],i++),t=l(e,L(o),t)}return t}),ee=r(function(e,t,n){for(var r=n.length;r--;){var i=n[r],o=n.charCodeAt(r);56320<=o&&o<=57343&&(i=n[--r]+i),t=l(e,L(i),t)}return t}),te=n(function(e,t){return t.split(e)}),ne=n(function(e,t){return t.join(e)}),re=r(function(e,t,n){return n.slice(e,t)});n(function(e,t){for(var n=t.length;n--;){var r=t[n],i=t.charCodeAt(n);if(56320<=i&&i<=57343&&(r=t[--n]+r),e(L(r)))return!0}return!1});var ie=n(function(e,t){for(var n=t.length;n--;){var r=t[n],i=t.charCodeAt(n);if(56320<=i&&i<=57343&&(r=t[--n]+r),!e(L(r)))return!1}return!0}),oe=n(function(e,t){return t.indexOf(e)>-1}),ae=n(function(e,t){return 0===t.indexOf(e)}),se=(n(function(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}),n(function(e,t){var n=e.length;if(n<1)return z;for(var r=0,i=[];(r=t.indexOf(e,r))>-1;)i.push(r),r+=n;return W(i)}));function ue(e){return e+""}var ce=n(function(e,t){return{$:10,d:e,b:t}});n(function(e,t){return{$:11,e:e,b:t}});function le(e,t){return{$:13,f:e,g:t}}var he=n(function(e,t){return{$:14,b:t,h:e}});var fe=n(function(e,t){return le(e,[t])}),de=r(function(e,t,n){return le(e,[t,n])}),ge=(i(function(e,t,n,r){return le(e,[t,n,r])}),o(function(e,t,n,r,i){return le(e,[t,n,r,i])}),a(function(e,t,n,r,i,o){return le(e,[t,n,r,i,o])}),s(function(e,t,n,r,i,o,a){return le(e,[t,n,r,i,o,a])}),u(function(e,t,n,r,i,o,a,s){return le(e,[t,n,r,i,o,a,s])}),c(function(e,t,n,r,i,o,a,s,u){return le(e,[t,n,r,i,o,a,s,u])}),n(function(e,t){try{return ve(e,JSON.parse(t))}catch(e){return ur(l(lr,"This is not valid JSON! "+e.message,Se(t)))}})),pe=n(function(e,t){return ve(e,Ee(t))});function ve(e,t){switch(e.$){case 3:return"boolean"==typeof t?cr(t):we("a BOOL",t);case 2:return"number"!=typeof t?we("an INT",t):-2147483647<t&&t<2147483647&&(0|t)===t?cr(t):!isFinite(t)||t%1?we("an INT",t):cr(t);case 4:return"number"==typeof t?cr(t):we("a FLOAT",t);case 6:return"string"==typeof t?cr(t):t instanceof String?cr(t+""):we("a STRING",t);case 9:return null===t?cr(e.c):we("null",t);case 5:return cr(Se(t));case 7:return Array.isArray(t)?me(e.b,t,W):we("a LIST",t);case 8:return Array.isArray(t)?me(e.b,t,be):we("an ARRAY",t);case 10:var n=e.d;if("object"!=typeof t||null===t||!(n in t))return we("an OBJECT with a field named `"+n+"`",t);var r=ve(e.b,t[n]);return An(r)?r:ur(l(hr,n,r.a));case 11:var i=e.e;if(!Array.isArray(t))return we("an ARRAY",t);if(i>=t.length)return we("a LONGER array. Need index "+i+" but only see "+t.length+" entries",t);r=ve(e.b,t[i]);return An(r)?r:ur(l(fr,i,r.a));case 12:if("object"!=typeof t||null===t||Array.isArray(t))return we("an OBJECT",t);var o=z;for(var a in t)if(t.hasOwnProperty(a)){r=ve(e.b,t[a]);if(!An(r))return ur(l(hr,a,r.a));o=N(D(a,r.a),o)}return cr(Zn(o));case 13:for(var s=e.f,u=e.g,c=0;c<u.length;c++){r=ve(u[c],t);if(!An(r))return r;s=s(r.a)}return cr(s);case 14:r=ve(e.b,t);return An(r)?ve(e.h(r.a),t):r;case 15:for(var h=z,f=e.g;f.b;f=f.b){r=ve(f.a,t);if(An(r))return r;h=N(r.a,h)}return ur(dr(Zn(h)));case 1:return ur(l(lr,e.a,Se(t)));case 0:return cr(e.a)}}function me(e,t,n){for(var r=t.length,i=new Array(r),o=0;o<r;o++){var a=ve(e,t[o]);if(!An(a))return ur(l(fr,o,a.a));i[o]=a.a}return cr(n(i))}function be(e){return l(or,e.length,function(t){return e[t]})}function we(e,t){return ur(l(lr,"Expecting "+e,Se(t)))}function ye(e,t){if(e===t)return!0;if(e.$!==t.$)return!1;switch(e.$){case 0:case 1:return e.a===t.a;case 3:case 2:case 4:case 6:case 5:return!0;case 9:return e.c===t.c;case 7:case 8:case 12:return ye(e.b,t.b);case 10:return e.d===t.d&&ye(e.b,t.b);case 11:return e.e===t.e&&ye(e.b,t.b);case 13:return e.f===t.f&&xe(e.g,t.g);case 14:return e.h===t.h&&ye(e.b,t.b);case 15:return xe(e.g,t.g)}}function xe(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(!ye(e[r],t[r]))return!1;return!0}var Te=n(function(e,t){return JSON.stringify(Ee(t),null,e)+""});function Se(e){return{$:0,a:e}}function Ee(e){return e.a}var _e=r(function(e,t,n){return n[e]=Ee(t),n});var Ce=Se(null);function Pe(e){return{$:0,a:e}}function Re(e){return{$:1,a:e}}function ke(e){return{$:2,b:e,c:null}}var Oe=n(function(e,t){return{$:3,b:e,d:t}}),$e=n(function(e,t){return{$:4,b:e,d:t}});var Me=0;function De(e){var t={$:0,e:Me++,f:e,g:null,h:[]};return ze(t),t}function He(e){return ke(function(t){t(Pe(De(e)))})}function Le(e,t){e.h.push(t),ze(e)}var Ie=n(function(e,t){return ke(function(n){Le(e,t),n(Pe(M))})});var Ae=!1,Be=[];function ze(e){if(Be.push(e),!Ae){for(Ae=!0;e=Be.shift();)Ne(e);Ae=!1}}function Ne(e){for(;e.f;){var t=e.f.$;if(0===t||1===t){for(;e.g&&e.g.$!==t;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else{if(2===t)return void(e.f.c=e.f.b(function(t){e.f=t,ze(e)}));if(5===t){if(0===e.h.length)return;e.f=e.f.b(e.h.shift())}else e.g={$:3===t?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}}function Fe(e){return ke(function(t){var n=setTimeout(function(){t(Pe(M))},e);return function(){clearTimeout(n)}})}i(function(e,t,n,r){return We(t,r,e.init,e.update,e.subscriptions,function(){return function(){}})});function We(e,t,n,r,i,o){var a=l(pe,e,Se(t?t.flags:void 0));An(a)||C(2,function(e){return Mr(e)}(a.a));var s={},u=(a=n(a.a)).a,c=o(f,u),h=function(e,t){var n;for(var r in je){var i=je[r];i.a&&((n=n||{})[r]=i.a(r,t)),e[r]=Ue(i,t)}return n}(s,f);function f(e,t){a=l(r,e,u),c(u=a.a,t),Ye(s,a.b,i(u))}return Ye(s,a.b,i(u)),h?{ports:h}:{}}var je={};function Ve(e,t,n,r,i){return{b:e,c:t,d:n,e:r,f:i}}function Ue(e,t){var n={g:t,h:void 0},r=e.c,i=e.d,o=e.e,a=e.f;return n.h=De(l(Oe,function e(t){return l(Oe,e,function(e){return{$:5,b:e}}(function(e){var s=e.a;return 0===e.$?h(i,n,s,t):o&&a?f(r,n,s.i,s.j,t):h(r,n,o?s.i:s.j,t)}))},e.b))}var qe=n(function(e,t){return ke(function(n){e.g(t),n(Pe(M))})}),Ge=n(function(e,t){return l(Ie,e.h,{$:0,a:t})});function Ze(e){return function(t){return{$:1,k:e,l:t}}}function Je(e){return{$:2,m:e}}var Xe=n(function(e,t){return{$:3,n:e,o:t}});function Ye(e,t,n){var r={};for(var i in Ke(!0,t,r,null),Ke(!1,n,r,null),e)Le(e[i],{$:"fx",a:r[i]||{i:z,j:z}})}function Ke(e,t,n,r){switch(t.$){case 1:var i=t.k,o=function(e,t,n,r){return l(e?je[t].e:je[t].f,function(e){for(var t=n;t;t=t.q)e=t.p(e);return e},r)}(e,i,r,t.l);return void(n[i]=function(e,t,n){return n=n||{i:z,j:z},e?n.i=N(t,n.i):n.j=N(t,n.j),n}(e,o,n[i]));case 2:for(var a=t.m;a.b;a=a.b)Ke(e,a.a,n,r);return;case 3:return void Ke(e,t.o,n,{p:t.n,q:r})}}function Qe(e){je[e]&&C(3,e)}function et(e,t){return Qe(e),je[e]={e:tt,r:t,a:nt},Ze(e)}var tt=n(function(e,t){return t});function nt(e){var t=[],n=je[e].r,i=Fe(0);return je[e].b=i,je[e].c=r(function(e,r,o){for(;r.b;r=r.b)for(var a=t,s=Ee(n(r.a)),u=0;u<a.length;u++)a[u](s);return i}),{subscribe:function(e){t.push(e)},unsubscribe:function(e){var n=(t=t.slice()).indexOf(e);n>=0&&t.splice(n,1)}}}function rt(e,t){return Qe(e),je[e]={f:ot,r:t,a:at},Ze(e)}var it,ot=n(function(e,t){return function(n){return e(t(n))}});function at(e,t){var n=z,i=je[e].r,o=Pe(null);return je[e].b=o,je[e].c=r(function(e,t,r){return n=t,o}),{send:function(r){var o=l(pe,i,Se(r));An(o)||C(4,e,o.a);for(var a=o.a,s=n;s.b;s=s.b)t(s.a(a))}}}var st="undefined"!=typeof document?document:{};function ut(e,t){e.appendChild(t)}i(function(e,t,n,r){var i=r&&r.node?r.node:C(0);return i.parentNode.replaceChild(Ct(e,function(){}),i),{}});function ct(e){return{$:0,a:e}}var lt=n(function(e,t){return n(function(n,r){for(var i=[],o=0;r.b;r=r.b){var a=r.a;o+=a.b||0,i.push(a)}return o+=i.length,{$:1,c:t,d:Et(n),e:i,f:e,b:o}})})(void 0),ht=n(function(e,t){return n(function(n,r){for(var i=[],o=0;r.b;r=r.b){var a=r.a;o+=a.b.b||0,i.push(a)}return o+=i.length,{$:2,c:t,d:Et(n),e:i,f:e,b:o}})})(void 0);var ft=n(function(e,t){return{$:4,j:e,k:t,b:1+(t.b||0)}});function dt(e,t){return{$:5,l:e,m:t,k:void 0}}var gt=n(function(e,t){return dt([e,t],function(){return e(t)})}),pt=(r(function(e,t,n){return dt([e,t,n],function(){return l(e,t,n)})}),i(function(e,t,n,r){return dt([e,t,n,r],function(){return h(e,t,n,r)})}),o(function(e,t,n,r,i){return dt([e,t,n,r,i],function(){return f(e,t,n,r,i)})}),a(function(e,t,n,r,i,o){return dt([e,t,n,r,i,o],function(){return d(e,t,n,r,i,o)})}),s(function(e,t,n,r,i,o,a){return dt([e,t,n,r,i,o,a],function(){return g(e,t,n,r,i,o,a)})}),u(function(e,t,n,r,i,o,a,s){return dt([e,t,n,r,i,o,a,s],function(){return p(e,t,n,r,i,o,a,s)})}),c(function(e,t,n,r,i,o,a,s,u){return dt([e,t,n,r,i,o,a,s,u],function(){return v(e,t,n,r,i,o,a,s,u)})}),n(function(e,t){return{$:"a0",n:e,o:t}})),vt=n(function(e,t){return{$:"a1",n:e,o:t}}),mt=n(function(e,t){return{$:"a2",n:e,o:t}}),bt=n(function(e,t){return{$:"a3",n:e,o:t}});r(function(e,t,n){return{$:"a4",n:t,o:{f:e,o:n}}});function wt(e){return"script"==e?"p":e}function yt(e){return/^\s*(javascript:|data:text\/html)/i.test(e)?'javascript:alert("This is an XSS vector. Please use ports or web components instead.")':e}n(function(e,t){return"a0"===t.$?l(pt,t.n,function(e,t){var n=Pi(t);return{$:t.$,a:n?h(_i,n<3?Tt:St,Ci(e),t.a):l(Ei,e,t.a)}}(e,t.o)):t});var xt,Tt=n(function(e,t){return D(e(t.a),t.b)}),St=n(function(e,t){return{message:e(t.message),stopPropagation:t.stopPropagation,preventDefault:t.preventDefault}});function Et(e){for(var t={};e.b;e=e.b){var n=e.a,r=n.$,i=n.n,o=n.o;if("a2"!==r){var a=t[r]||(t[r]={});"a3"===r&&"class"===i?_t(a,i,o):a[i]=o}else"className"===i?_t(t,i,Ee(o)):t[i]=Ee(o)}return t}function _t(e,t,n){var r=e[t];e[t]=r?r+" "+n:n}function Ct(e,t){var n=e.$;if(5===n)return Ct(e.k||(e.k=e.m()),t);if(0===n)return st.createTextNode(e.a);if(4===n){for(var r=e.k,i=e.j;4===r.$;)"object"!=typeof i?i=[i,r.j]:i.push(r.j),r=r.k;var o={j:i,p:t};return(a=Ct(r,o)).elm_event_node_ref=o,a}if(3===n)return Pt(a=e.h(e.g),t,e.d),a;var a=e.f?st.createElementNS(e.f,e.c):st.createElement(e.c);it&&"a"==e.c&&a.addEventListener("click",it(a)),Pt(a,t,e.d);for(var s=e.e,u=0;u<s.length;u++)ut(a,Ct(1===n?s[u]:s[u].b,t));return a}function Pt(e,t,n){for(var r in n){var i=n[r];"a1"===r?Rt(e,i):"a0"===r?$t(e,t,i):"a3"===r?kt(e,i):"a4"===r?Ot(e,i):("value"!==r&&"checked"!==r||e[r]!==i)&&(e[r]=i)}}function Rt(e,t){var n=e.style;for(var r in t)n[r]=t[r]}function kt(e,t){for(var n in t){var r=t[n];void 0!==r?e.setAttribute(n,r):e.removeAttribute(n)}}function Ot(e,t){for(var n in t){var r=t[n],i=r.f,o=r.o;void 0!==o?e.setAttributeNS(i,n,o):e.removeAttributeNS(i,n)}}function $t(e,t,n){var r=e.elmFs||(e.elmFs={});for(var i in n){var o=n[i],a=r[i];if(o){if(a){if(a.q.$===o.$){a.q=o;continue}e.removeEventListener(i,a)}a=Mt(t,o),e.addEventListener(i,a,xt&&{passive:Pi(o)<2}),r[i]=a}else e.removeEventListener(i,a),r[i]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){xt=!0}}))}catch(e){}function Mt(e,t){function n(t){var r=n.q,i=ve(r.a,t);if(An(i)){for(var o,a=Pi(r),s=i.a,u=a?a<3?s.a:s.message:s,c=1==a?s.b:3==a&&s.stopPropagation,l=(c&&t.stopPropagation(),(2==a?s.b:3==a&&s.preventDefault)&&t.preventDefault(),e);o=l.j;){if("function"==typeof o)u=o(u);else for(var h=o.length;h--;)u=o[h](u);l=l.p}l(u,c)}}return n.q=t,n}function Dt(e,t){return e.$==t.$&&ye(e.a,t.a)}function Ht(e,t){var n=[];return It(e,t,n,0),n}function Lt(e,t,n,r){var i={$:t,r:n,s:r,t:void 0,u:void 0};return e.push(i),i}function It(e,t,n,r){if(e!==t){var i=e.$,o=t.$;if(i!==o){if(1!==i||2!==o)return void Lt(n,0,r,t);t=function(e){for(var t=e.e,n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=t[i].b;return{$:1,c:e.c,d:e.d,e:r,f:e.f,b:e.b}}(t),o=1}switch(o){case 5:for(var a=e.l,s=t.l,u=a.length,c=u===s.length;c&&u--;)c=a[u]===s[u];if(c)return void(t.k=e.k);t.k=t.m();var l=[];return It(e.k,t.k,l,0),void(l.length>0&&Lt(n,1,r,l));case 4:for(var h=e.j,f=t.j,d=!1,g=e.k;4===g.$;)d=!0,"object"!=typeof h?h=[h,g.j]:h.push(g.j),g=g.k;for(var p=t.k;4===p.$;)d=!0,"object"!=typeof f?f=[f,p.j]:f.push(p.j),p=p.k;return d&&h.length!==f.length?void Lt(n,0,r,t):((d?function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(h,f):h===f)||Lt(n,2,r,f),void It(g,p,n,r+1));case 0:return void(e.a!==t.a&&Lt(n,3,r,t.a));case 1:return void At(e,t,n,r,zt);case 2:return void At(e,t,n,r,Nt);case 3:if(e.h!==t.h)return void Lt(n,0,r,t);var v=Bt(e.d,t.d);v&&Lt(n,4,r,v);var m=t.i(e.g,t.g);return void(m&&Lt(n,5,r,m))}}}function At(e,t,n,r,i){if(e.c===t.c&&e.f===t.f){var o=Bt(e.d,t.d);o&&Lt(n,4,r,o),i(e,t,n,r)}else Lt(n,0,r,t)}function Bt(e,t,n){var r;for(var i in e)if("a1"!==i&&"a0"!==i&&"a3"!==i&&"a4"!==i)if(i in t){var o=e[i],a=t[i];o===a&&"value"!==i&&"checked"!==i||"a0"===n&&Dt(o,a)||((r=r||{})[i]=a)}else(r=r||{})[i]=n?"a1"===n?"":"a0"===n||"a3"===n?void 0:{f:e[i].f,o:void 0}:"string"==typeof e[i]?"":null;else{var s=Bt(e[i],t[i]||{},i);s&&((r=r||{})[i]=s)}for(var u in t)u in e||((r=r||{})[u]=t[u]);return r}function zt(e,t,n,r){var i=e.e,o=t.e,a=i.length,s=o.length;a>s?Lt(n,6,r,{v:s,i:a-s}):a<s&&Lt(n,7,r,{v:a,e:o});for(var u=a<s?a:s,c=0;c<u;c++){var l=i[c];It(l,o[c],n,++r),r+=l.b||0}}function Nt(e,t,n,r){for(var i=[],o={},a=[],s=e.e,u=t.e,c=s.length,l=u.length,h=0,f=0,d=r;h<c&&f<l;){var g=s[h],p=u[f],v=g.a,m=p.a,b=g.b,w=p.b,y=void 0,x=void 0;if(v!==m){var T=s[h+1],S=u[f+1];if(T){var E=T.a,_=T.b;x=m===E}if(S){var C=S.a,P=S.b;y=v===C}if(y&&x)It(b,P,i,++d),Wt(o,i,v,w,f,a),d+=b.b||0,jt(o,i,v,_,++d),d+=_.b||0,h+=2,f+=2;else if(y)d++,Wt(o,i,m,w,f,a),It(b,P,i,d),d+=b.b||0,h+=1,f+=2;else if(x)jt(o,i,v,b,++d),d+=b.b||0,It(_,w,i,++d),d+=_.b||0,h+=2,f+=1;else{if(!T||E!==C)break;jt(o,i,v,b,++d),Wt(o,i,m,w,f,a),d+=b.b||0,It(_,P,i,++d),d+=_.b||0,h+=2,f+=2}}else It(b,w,i,++d),d+=b.b||0,h++,f++}for(;h<c;){d++;b=(g=s[h]).b;jt(o,i,g.a,b,d),d+=b.b||0,h++}for(;f<l;){var R=R||[];Wt(o,i,(p=u[f]).a,p.b,void 0,R),f++}(i.length>0||a.length>0||R)&&Lt(n,8,r,{w:i,x:a,y:R})}var Ft="_elmW6BL";function Wt(e,t,n,r,i,o){var a=e[n];if(!a)return a={c:0,z:r,r:i,s:void 0},o.push({r:i,A:a}),void(e[n]=a);if(1===a.c){o.push({r:i,A:a}),a.c=2;var s=[];return It(a.z,r,s,a.r),a.r=i,void(a.s.s={w:s,A:a})}Wt(e,t,n+Ft,r,i,o)}function jt(e,t,n,r,i){var o=e[n];if(o){if(0===o.c){o.c=2;var a=[];return It(r,o.z,a,i),void Lt(t,9,i,{w:a,A:o})}jt(e,t,n+Ft,r,i)}else{var s=Lt(t,9,i,void 0);e[n]={c:1,z:r,r:i,s:s}}}function Vt(e,t,n,r){!function e(t,n,r,i,o,a,s){var u=r[i];var c=u.r;for(;c===o;){var l=u.$;if(1===l)Vt(t,n.k,u.s,s);else if(8===l){u.t=t,u.u=s;var h=u.s.w;h.length>0&&e(t,n,h,0,o,a,s)}else if(9===l){u.t=t,u.u=s;var f=u.s;if(f){f.A.s=t;var h=f.w;h.length>0&&e(t,n,h,0,o,a,s)}}else u.t=t,u.u=s;if(!(u=r[++i])||(c=u.r)>a)return i}var d=n.$;if(4===d){for(var g=n.k;4===g.$;)g=g.k;return e(t,g,r,i,o+1,a,t.elm_event_node_ref)}var p=n.e;var v=t.childNodes;for(var m=0;m<p.length;m++){o++;var b=1===d?p[m]:p[m].b,w=o+(b.b||0);if(o<=c&&c<=w&&(i=e(v[m],b,r,i,o,w,s),!(u=r[i])||(c=u.r)>a))return i;o=w}return i}(e,t,n,0,0,t.b,r)}function Ut(e,t,n,r){return 0===n.length?e:(Vt(e,t,n,r),qt(e,n))}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.t,o=Gt(i,r);i===e&&(e=o)}return e}function Gt(e,t){switch(t.$){case 0:return function(e,t,n){var r=e.parentNode,i=Ct(t,n);i.elm_event_node_ref||(i.elm_event_node_ref=e.elm_event_node_ref);r&&i!==e&&r.replaceChild(i,e);return i}(e,t.s,t.u);case 4:return Pt(e,t.u,t.s),e;case 3:return e.replaceData(0,e.length,t.s),e;case 1:return qt(e,t.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=t.s:e.elm_event_node_ref={j:t.s,p:t.u},e;case 6:for(var n=t.s,r=0;r<n.i;r++)e.removeChild(e.childNodes[n.v]);return e;case 7:for(var i=(n=t.s).e,o=(r=n.v,e.childNodes[r]);r<i.length;r++)e.insertBefore(Ct(i[r],t.u),o);return e;case 9:if(!(n=t.s))return e.parentNode.removeChild(e),e;var a=n.A;return void 0!==a.r&&e.parentNode.removeChild(e),a.s=qt(e,n.w),e;case 8:return function(e,t){var n=t.s,r=function(e,t){if(!e)return;for(var n=st.createDocumentFragment(),r=0;r<e.length;r++){var i=e[r],o=i.A;ut(n,2===o.c?o.s:Ct(o.z,t.u))}return n}(n.y,t);e=qt(e,n.w);for(var i=n.x,o=0;o<i.length;o++){var a=i[o],s=a.A,u=2===s.c?s.s:Ct(s.z,t.u);e.insertBefore(u,e.childNodes[a.r])}r&&ut(e,r);return e}(e,t);case 5:return t.s(e);default:C(10)}}function Zt(e){if(3===e.nodeType)return ct(e.textContent);if(1!==e.nodeType)return ct("");for(var t=z,n=e.attributes,r=n.length;r--;){var i=n[r],o=i.name,a=i.value;t=N(l(bt,o,a),t)}var s=e.tagName.toLowerCase(),u=z,c=e.childNodes;for(r=c.length;r--;)u=N(Zt(c[r]),u);return h(lt,s,t,u)}i(function(e,t,n,r){return We(t,r,e.init,e.update,e.subscriptions,function(t,n){var i=e.view,o=r&&r.node?r.node:C(0),a=Zt(o);return Kt(n,function(e){var n=i(e),r=Ht(a,n);o=Ut(o,a,r,t),a=n})})});var Jt=i(function(e,t,n,r){return We(t,r,e.init,e.update,e.subscriptions,function(t,n){var r=e.setup&&e.setup(t),i=e.view,o=st.title,a=st.body,s=Zt(a);return Kt(n,function(e){it=r;var n=i(e),u=lt("body")(z)(n.body),c=Ht(s,u);a=Ut(a,s,c,t),s=u,it=0,o!==n.title&&(st.title=o=n.title)})})}),Xt="undefined"!=typeof cancelAnimationFrame?cancelAnimationFrame:function(e){clearTimeout(e)},Yt="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function Kt(e,t){t(e);var n=0;function r(){n=1===n?0:(Yt(r),t(e),1)}return function(i,o){e=i,o?(t(e),2===n&&(n=1)):(0===n&&Yt(r),n=2)}}function Qt(){return Na(st.location.href).a||C(1)}n(function(e,t){return l(Sa,la,ke(function(){t&&history.go(t),e()}))});var en=n(function(e,t){return l(Sa,la,ke(function(){history.pushState({},"",t),e()}))}),tn=(n(function(e,t){return l(Sa,la,ke(function(){history.replaceState({},"",t),e()}))}),{addEventListener:function(){},removeEventListener:function(){}}),nn="undefined"!=typeof document?document:tn,rn="undefined"!=typeof window?window:tn;r(function(e,t,n){return He(ke(function(r){function i(e){De(n(e))}return e.addEventListener(t,i,xt&&{passive:!0}),function(){e.removeEventListener(t,i)}}))}),n(function(e,t){var n=ve(e,t);return An(n)?ar(n.a):sr});function on(e,t){return ke(function(n){Yt(function(){var r=document.getElementById(e);n(r?Pe(t(r)):Re(ca(e)))})})}n(function(e,t){return on(t,function(t){return t[e](),M})});function an(){var e=nn.body,t=nn.documentElement;return{width:Math.max(e.scrollWidth,e.offsetWidth,t.scrollWidth,t.offsetWidth,t.clientWidth),height:Math.max(e.scrollHeight,e.offsetHeight,t.scrollHeight,t.offsetHeight,t.clientHeight)}}n(function(e,t){return function(e){return ke(function(t){Yt(function(){t(Pe(e()))})})}(function(){return rn.scroll(e,t),M})});r(function(e,t,n){return on(e,function(e){return e.scrollLeft=t,e.scrollTop=n,M})});var sn=o(function(e,t,n,r,i){for(var o=e.length,a=t+o<=i.length,s=0;a&&s<o;){var u=i.charCodeAt(t);a=e[s++]===i[t++]&&(10===u?(n++,r=1):(r++,55296==(63488&u)?e[s++]===i[t++]:1))}return H(a?t:-1,n,r)}),un=r(function(e,t,n){return n.length<=t?-1:55296==(63488&n.charCodeAt(t))?e(L(n.substr(t,2)))?t+2:-1:e(L(n[t]))?"\n"===n[t]?-2:t+1:-1}),cn=(r(function(e,t,n){return n.charCodeAt(t)===e}),n(function(e,t){for(;e<t.length;e++){var n=t.charCodeAt(e);if(n<48||57<n)return e}return e}),r(function(e,t,n){for(var r=0;t<n.length;t++){var i=n.charCodeAt(t)-48;if(i<0||e<=i)break;r=e*r+i}return D(t,r)}),n(function(e,t){for(var n=0;e<t.length;e++){var r=t.charCodeAt(e);if(48<=r&&r<=57)n=16*n+r-48;else if(65<=r&&r<=70)n=16*n+r-55;else{if(!(97<=r&&r<=102))break;n=16*n+r-87}}return D(e,n)}),o(function(e,t,n,r,i){for(var o=i.indexOf(e,t),a=o<0?i.length:o+e.length;t<a;){var s=i.charCodeAt(t++);10===s?(r=1,n++):(r++,55296==(63488&s)&&t++)}return H(o,n,r)})),ln=n(function(e,t){var n="g";e.multiline&&(n+="m"),e.caseInsensitive&&(n+="i");try{return ar(new RegExp(t,n))}catch(e){return sr}}),hn=(n(function(e,t){return null!==t.match(e)}),r(function(e,t,n){for(var r,i=[],o=0,a=n,s=t.lastIndex,u=-1;o++<e&&(r=t.exec(a))&&u!=t.lastIndex;){for(var c=r.length-1,l=new Array(c);c>0;){var h=r[c];l[--c]=h?ar(h):sr}i.push(f(Ch,r[0],r.index,o,W(l))),u=t.lastIndex}return t.lastIndex=s,W(i)})),fn=i(function(e,t,n,r){var i=0;return r.replace(t,function(t){if(i++>=e)return t;for(var r=arguments.length-3,o=new Array(r);r>0;){var a=arguments[r];o[--r]=a?ar(a):sr}return n(f(Ch,t,arguments[arguments.length-2],i,W(o)))})}),dn=(r(function(e,t,n){for(var r=n,i=[],o=t.lastIndex,a=t.lastIndex;e--;){var s=t.exec(r);if(!s)break;i.push(r.slice(o,s.index)),o=t.lastIndex}return i.push(r.slice(o)),t.lastIndex=a,W(i)}),n(function(e,t){return ke(function(n){var r=new XMLHttpRequest;!function(e,t){if(!Xg(t))return;e.addEventListener("progress",function(e){e.lengthComputable&&De(t.a({bytes:e.loaded,bytesExpected:e.total}))})}(r,t),r.addEventListener("error",function(){n(Re(ep))}),r.addEventListener("timeout",function(){n(Re(tp))}),r.addEventListener("load",function(){n(function(e,t){var n=function(e){return{url:e.responseURL,status:{code:e.status,message:e.statusText},headers:function(e){var t=pn;if(!e)return t;for(var n=e.split("\r\n"),r=n.length;r--;){var i=n[r],o=i.indexOf(": ");if(o>0){var a=i.substring(0,o),s=i.substring(o+2);t=h(Jg,a,function(e){return ar(Xg(e)?s+", "+e.a:s)},t)}}return t}(e.getAllResponseHeaders()),body:e.response}}(e);if(e.status<200||300<=e.status)return n.body=e.responseText,Re(Kg(n));var r=t(n);return An(r)?Pe(r.a):(n.body=e.responseText,Re(l(Yg,r.a,n)))}(r,e.expect.a))});try{r.open(e.method,e.url,!0)}catch(t){return n(Re(Qg(e.url)))}!function(e,t){for(var n=t.headers;n.b;n=n.b)e.setRequestHeader(n.a.a,n.a.b);e.responseType=t.expect.b,e.withCredentials=t.withCredentials,Xg(t.timeout)&&(e.timeout=t.timeout.a)}(r,e);var i=e.body;return r.send(np(i)?(r.setRequestHeader("Content-Type",i.a),i.b):i.a),function(){r.abort()}})}));n(function(e,t){return{$:0,b:t.b,a:function(n){var r=t.a(n);return l(Du,e,r)}}});n(function(e,t){return e&t}),n(function(e,t){return e|t}),n(function(e,t){return e^t});n(function(e,t){return t<<e}),n(function(e,t){return t>>e}),n(function(e,t){return t>>>e});var gn={$:"RBEmpty_elm_builtin"},pn=gn,vn={annotationLists:pn,collections:pn,manifests:pn},mn=function(e){return e},bn=function(e){return{$:"Set_elm_builtin",a:e}},wn=bn(pn),yn={$:"EQ"},xn={$:"LT"},Tn=w,Sn=r(function(e,t,r){var i=r.c,o=r.d,a=n(function(t,n){if("SubTree"===t.$){var r=t.a;return h(Tn,a,n,r)}var i=t.a;return h(Tn,e,n,i)});return h(Tn,a,h(Tn,e,t,o),i)}),En=F,_n=function(e){return h(Sn,En,z,e)},Cn={$:"GT"},Pn=r(function(e,t,n){for(;;){if("RBEmpty_elm_builtin"===n.$)return t;var r=n.b,i=n.c,o=n.d,a=n.e,s=e,u=h(e,r,i,h(Pn,e,t,a));e=s,t=u,n=o}}),Rn=function(e){return h(Pn,r(function(e,t,n){return l(En,D(e,t),n)}),z,e)},kn=function(e){return function(e){return h(Pn,r(function(e,t,n){return l(En,e,n)}),z,e)}(e.a)},On={collections:z,errors:z,iiif:vn,openedCollections:wn,selectedCollection:z},$n=function(e){return{$:"LoadCollection",a:e}},Mn=A,Dn=n(function(e,t){return H(t.a,t.b,B(t.c,e))}),Hn=n(function(e,t){var n=t.a,r=t.b,i=t.c;return H(e(n),r,i)}),Ln=n(function(e,t){return t(e)}),In=r(function(e,t,n){return t(e(n))}),An=function(e){return"Ok"===e.$},Bn=i(function(e,t,n,r){return{$:"Array_elm_builtin",a:e,b:t,c:n,d:r}}),zn=G,Nn=n(function(e,t){return Y(t)/Y(e)}),Fn=zn(l(Nn,2,32)),Wn=[],jn=f(Bn,0,Fn,Wn,Wn),Vn=function(e){return{$:"Leaf",a:e}},Un=function(e){return{$:"SubTree",a:e}},qn=b,Gn=r(function(e,t,n){for(;;){if(!n.b)return t;var r=n.a,i=n.b,o=e,a=l(e,r,t);e=o,t=a,n=i}}),Zn=function(e){return h(Gn,En,z,e)},Jn=n(function(e,t){for(;;){var n=l(qn,32,e),r=n.a,i=n.b,o=l(En,Un(r),t);if(!i.b)return Zn(o);e=i,t=o}}),Xn=function(e){return e.a},Yn=n(function(e,t){for(;;){var n=zn(t/32);if(1===n)return l(qn,32,e).a;e=l(Jn,e,z),t=n}}),Kn=n(function(e,t){return e(t)}),Qn=Z,er=n(function(e,t){return O(e,t)>0?e:t}),tr=function(e){return e.length},nr=n(function(e,t){if(t.nodeListSize){var n=32*t.nodeListSize,r=Qn(l(Nn,32,n-1)),i=e?Zn(t.nodeList):t.nodeList,o=l(Yn,i,t.nodeListSize);return f(Bn,tr(t.tail)+n,l(er,5,r*Fn),o,t.tail)}return f(Bn,tr(t.tail),Fn,Wn,t.tail)}),rr=m,ir=o(function(e,t,n,r,i){for(;;){if(t<0)return l(nr,!1,{nodeList:r,nodeListSize:n/32|0,tail:i});var o=Vn(h(rr,32,t,e));e=e,t=t-32,n=n,r=l(En,o,r),i=i}}),or=n(function(e,t){if(e<=0)return jn;var n=e%32,r=h(rr,n,e-n,t);return d(ir,t,e-n-32,e,z,r)}),ar=function(e){return{$:"Just",a:e}},sr={$:"Nothing"},ur=function(e){return{$:"Err",a:e}},cr=function(e){return{$:"Ok",a:e}},lr=n(function(e,t){return{$:"Failure",a:e,b:t}}),hr=n(function(e,t){return{$:"Field",a:e,b:t}}),fr=n(function(e,t){return{$:"Index",a:e,b:t}}),dr=function(e){return{$:"OneOf",a:e}},gr=function(e){var t=e.charCodeAt(0);return 55296<=t&&t<=56319?1024*(t-55296)+e.charCodeAt(1)-56320+65536:t},pr=function(e){var t=gr(e);return 97<=t&&t<=122},vr=function(e){var t=gr(e);return t<=90&&65<=t},mr=function(e){return pr(e)||vr(e)},br=function(e){return pr(e)||vr(e)||function(e){var t=gr(e);return t<=57&&48<=t}(e)},wr=function(e){return h(Gn,n(function(e,t){return t+1}),0,e)},yr=V,xr=r(function(e,t,n){for(;;){if(!(O(e,t)<1))return n;var r=e,i=t-1,o=l(En,t,n);e=r,t=i,n=o}}),Tr=n(function(e,t){return h(xr,e,t,z)}),Sr=n(function(e,t){return h(yr,e,l(Tr,0,wr(t)-1),t)}),Er=ie,_r=ue,Cr=n(function(e,t){return l(ne,e,j(t))}),Pr=function(e){var t=e.charCodeAt(0);return t?ar(55296<=t&&t<=56319?D(L(e[0]+e[1]),e.slice(2)):D(L(e[0]),e.slice(1))):sr},Rr=n(function(e,t){return W(l(te,e,t))}),kr=function(e){return l(Cr,"\n    ",l(Rr,"\n",e))},Or=Te,$r=n(function(e,t){return"\n\n("+_r(e+1)+") "+kr(Mr(t))}),Mr=function(e){return l(Dr,e,z)},Dr=n(function(e,t){e:for(;;)switch(e.$){case"Field":var n=e.a,r=e.b,i=function(){var e=Pr(n);if("Nothing"===e.$)return!1;var t=e.a,r=t.a,i=t.b;return mr(r)&&l(Er,br,i)}(),o=r,a=l(En,i?"."+n:"['"+n+"']",t);e=o,t=a;continue e;case"Index":var s=e.a,u=(r=e.b,"["+_r(s)+"]");o=r,a=l(En,u,t);e=o,t=a;continue e;case"OneOf":var c=e.a;if(c.b){if(c.b.b){var h=(t.b?"The Json.Decode.oneOf at json"+l(Cr,"",Zn(t)):"Json.Decode.oneOf")+" failed in the following "+_r(wr(c))+" ways:";return l(Cr,"\n\n",l(En,h,l(Sr,$r,c)))}e=o=r=c.a,t=a=t;continue e}return"Ran into a Json.Decode.oneOf with no possibilities"+(t.b?" at json"+l(Cr,"",Zn(t)):"!");default:var f=e.a,d=e.b;return(h=t.b?"Problem with the value at json"+l(Cr,"",Zn(t))+":\n\n    ":"Problem with the given value:\n\n")+(kr(l(Or,4,d))+"\n\n")+f}}),Hr=Je,Lr=Hr(z),Ir=pe,Ar=ce,Br={$:6},zr={$:"Black"},Nr=o(function(e,t,n,r,i){return{$:"RBNode_elm_builtin",a:e,b:t,c:n,d:r,e:i}}),Fr=$,Wr={$:"Red"},jr=o(function(e,t,n,r,i){if("RBNode_elm_builtin"===i.$&&"Red"===i.a.$){i.a;var o=i.b,a=i.c,s=i.d,u=i.e;if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$){r.a;var c=r.b,l=r.c,h=r.d,f=r.e;return d(Nr,Wr,t,n,d(Nr,zr,c,l,h,f),d(Nr,zr,o,a,s,u))}return d(Nr,e,o,a,d(Nr,Wr,t,n,r,s),u)}if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$&&"RBNode_elm_builtin"===r.d.$&&"Red"===r.d.a.$){r.a,c=r.b,l=r.c;var g=r.d,p=(g.a,g.b),v=g.c,m=g.d,b=g.e;f=r.e;return d(Nr,Wr,c,l,d(Nr,zr,p,v,m,b),d(Nr,zr,t,n,f,i))}return d(Nr,e,t,n,r,i)}),Vr=r(function(e,t,n){if("RBEmpty_elm_builtin"===n.$)return d(Nr,Wr,e,t,gn,gn);var r=n.a,i=n.b,o=n.c,a=n.d,s=n.e;switch(l(Fr,e,i).$){case"LT":return d(jr,r,i,o,h(Vr,e,t,a),s);case"EQ":return d(Nr,r,i,t,a,s);default:return d(jr,r,i,o,a,h(Vr,e,t,s))}}),Ur=r(function(e,t,n){var r=h(Vr,e,t,n);if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$){r.a;var i=r.b,o=r.c,a=r.d,s=r.e;return d(Nr,zr,i,o,a,s)}return r}),qr=n(function(e,t){var n=t.a;return bn(h(Ur,e,M,n))}),Gr=function(e){if("RBNode_elm_builtin"===e.$&&"RBNode_elm_builtin"===e.d.$&&"RBNode_elm_builtin"===e.e.$){if("RBNode_elm_builtin"===e.e.d.$&&"Red"===e.e.d.a.$){var t=e.a,n=e.b,r=e.c,i=e.d,o=(i.a,i.b),a=i.c,s=i.d,u=i.e,c=e.e,l=(c.a,c.b),h=c.c,f=((y=c.d).a,y.b),g=y.c,p=y.d,v=y.e,m=c.e;return d(Nr,Wr,f,g,d(Nr,zr,n,r,d(Nr,Wr,o,a,s,u),p),d(Nr,zr,l,h,v,m))}t=e.a,n=e.b,r=e.c;var b=e.d,w=(b.a,o=b.b,a=b.c,s=b.d,u=b.e,e.e),y=(w.a,l=w.b,h=w.c,w.d);m=w.e;return t.$,d(Nr,zr,n,r,d(Nr,Wr,o,a,s,u),d(Nr,Wr,l,h,y,m))}return e},Zr=function(e){if("RBNode_elm_builtin"===e.$&&"RBNode_elm_builtin"===e.d.$&&"RBNode_elm_builtin"===e.e.$){if("RBNode_elm_builtin"===e.d.d.$&&"Red"===e.d.d.a.$){var t=e.a,n=e.b,r=e.c,i=e.d,o=(i.a,i.b),a=i.c,s=i.d,u=(s.a,s.b),c=s.c,l=s.d,h=s.e,f=i.e,g=e.e,p=(g.a,g.b),v=g.c,m=g.d,b=g.e;return d(Nr,Wr,o,a,d(Nr,zr,u,c,l,h),d(Nr,zr,n,r,f,d(Nr,Wr,p,v,m,b)))}t=e.a,n=e.b,r=e.c;var w=e.d,y=(w.a,o=w.b,a=w.c,w.d),x=(f=w.e,e.e);x.a,p=x.b,v=x.c,m=x.d,b=x.e;return t.$,d(Nr,zr,n,r,d(Nr,Wr,o,a,y,f),d(Nr,Wr,p,v,m,b))}return e},Jr=s(function(e,t,n,r,i,o,a){if("RBNode_elm_builtin"===o.$&&"Red"===o.a.$){o.a;var s=o.b,u=o.c,c=o.d,l=o.e;return d(Nr,n,s,u,c,d(Nr,Wr,r,i,l,a))}e:for(;;){if("RBNode_elm_builtin"===a.$&&"Black"===a.a.$){if("RBNode_elm_builtin"===a.d.$){if("Black"===a.d.a.$){a.a,a.d.a;return Zr(t)}break e}a.a,a.d;return Zr(t)}break e}return t}),Xr=function(e){if("RBNode_elm_builtin"===e.$&&"RBNode_elm_builtin"===e.d.$){var t=e.a,n=e.b,r=e.c,i=e.d,o=i.a,a=i.d,s=e.e;if("Black"===o.$){if("RBNode_elm_builtin"===a.$&&"Red"===a.a.$){a.a;return d(Nr,t,n,r,Xr(i),s)}var u=Gr(e);if("RBNode_elm_builtin"===u.$){var c=u.a,l=u.b,h=u.c,f=u.d,g=u.e;return d(jr,c,l,h,Xr(f),g)}return gn}return d(Nr,t,n,r,Xr(i),s)}return gn},Yr=n(function(e,t){if("RBEmpty_elm_builtin"===t.$)return gn;var n=t.a,r=t.b,i=t.c,o=t.d,a=t.e;if(O(e,r)<0){if("RBNode_elm_builtin"===o.$&&"Black"===o.a.$){o.a;var s=o.d;if("RBNode_elm_builtin"===s.$&&"Red"===s.a.$){s.a;return d(Nr,n,r,i,l(Yr,e,o),a)}var u=Gr(t);if("RBNode_elm_builtin"===u.$){var c=u.a,h=u.b,f=u.c,g=u.d,v=u.e;return d(jr,c,h,f,l(Yr,e,g),v)}return gn}return d(Nr,n,r,i,l(Yr,e,o),a)}return l(Kr,e,p(Jr,e,t,n,r,i,o,a))}),Kr=n(function(e,t){if("RBNode_elm_builtin"===t.$){var n=t.a,r=t.b,i=t.c,o=t.d,a=t.e;if(R(e,r)){var s=function(e){for(;;){if("RBNode_elm_builtin"!==e.$||"RBNode_elm_builtin"!==e.d.$)return e;e=e.d}}(a);if("RBNode_elm_builtin"===s.$){var u=s.b,c=s.c;return d(jr,n,u,c,o,Xr(a))}return gn}return d(jr,n,r,i,o,l(Yr,e,a))}return gn}),Qr=n(function(e,t){var n=l(Yr,e,t);if("RBNode_elm_builtin"===n.$&&"Red"===n.a.$){n.a;var r=n.b,i=n.c,o=n.d,a=n.e;return d(Nr,zr,r,i,o,a)}return n}),ei=n(function(e,t){var n=t.a;return bn(l(Qr,e,n))}),ti=r(function(e,t,n){return I(n,t?{openedCollections:l(qr,e,n.openedCollections)}:{openedCollections:l(ei,e,n.openedCollections)})}),ni=n(function(e,t){e:for(;;){if("RBEmpty_elm_builtin"===t.$)return sr;var n=t.b,r=t.c,i=t.d,o=t.e;switch(l(Fr,e,n).$){case"LT":e=e,t=i;continue e;case"EQ":return ar(r);default:e=e,t=o;continue e}}}),ri=r(function(e,t,n){var r=l(ni,e,n);return"Just"===r.$?r.a:h(t,e,sr,sr)}),ii={$:"Stub"},oi=r(function(e,t,n){return{collections:z,id:e,label:t,logo:n,manifests:z,status:ii}}),ai=n(function(e,t){return h(ri,t,oi,e.collections)}),si=function(e){switch(e.status.$){case"Stub":case"Loading":return!0;default:return!1}},ui=n(function(e,t){var n=l(ai,t.iiif,e);return(si(n)?Dn(W([$n(n.id)])):mn)(l(Hn,l(ti,e,!0),H(t,Lr,z)))}),ci=n(function(e,t){return R(e,Lr)?t:R(t,Lr)?e:Hr(W([e,t]))}),li=r(function(e,t,n){for(;;){var r=n.a,i=n.b,o=n.c;if(!t.b)return H(r,i,o);var a=t.a,s=t.b,u=l(e,a,r),c=u.a,h=u.b,f=u.c;e=e,t=s,n=H(c,l(ci,i,h),B(o,f))}}),hi=n(function(e,t){return h(li,ui,e,H(I(t,{selectedCollection:e}),Lr,z))}),fi=n(function(e,t){switch(e.$){case"OpenCollection":var n=e.a;return l(ui,n,t);case"CloseCollection":n=e.a;return H(h(ti,n,!1,t),Lr,z);case"SelectPath":var r=e.a;return l(hi,r,t);case"CollectionClicked":r=e.a;return l(Dn,W([function(e){return{$:"CollectionSelected",a:e}}(r)]),l(hi,r,t));default:var i=e.a;if("CollectionLoaded"===i.$){var o=i.a;i.b;return H(I(t,{iiif:o}),Lr,z)}return H(t,Lr,z)}}),di=function(e){return{$:"CollectionClicked",a:e}},gi=n(function(e,t){return"Just"===l(ni,e,t).$}),pi=n(function(e,t){var n=t.a;return l(gi,e,n)}),vi=n(function(e,t){return l(pi,e,t.openedCollections)}),mi=n(function(e,t){return l(vi,e.id,t)}),bi=n(function(e,t){return l(mi,t,e)?function(e){return{$:"CloseCollection",a:e}}(t.id):function(e){return{$:"OpenCollection",a:e}}(t.id)}),wi=i(function(e,t,n,r){if(r.b){var i=r.a,o=r.b;if(o.b){var a=o.a,s=o.b;if(s.b){var u=s.a,c=s.b;if(c.b){var d=c.a,g=c.b;return l(e,i,l(e,a,l(e,u,l(e,d,n>500?h(Gn,e,t,Zn(g)):f(wi,e,t,n+1,g)))))}return l(e,i,l(e,a,l(e,u,t)))}return l(e,i,l(e,a,t))}return l(e,i,t)}return t}),yi=r(function(e,t,n){return f(wi,e,t,0,n)}),xi=n(function(e,t){return h(yi,n(function(t,n){return l(En,e(t),n)}),z,t)}),Ti=function(e){return xi(ai(e))},Si=n(function(e,t){var n=t.label;return"Just"===n.$?n.a:"Loading"===t.status.$?"Loading object":e}),Ei=fe,_i=de,Ci=function(e){return{$:0,a:e}},Pi=function(e){switch(e.$){case"Normal":return 0;case"MayStopPropagation":return 1;case"MayPreventDefault":return 2;default:return 3}},Ri=lt("div"),ki=Se,Oi=n(function(e,t){return l(mt,e,ki(t))}),$i=Oi("className"),Mi=n(function(e,t){return l(Ri,B(W([$i("el")]),e),W([t]))}),Di=$i("fullWidth"),Hi=lt("i"),Li=n(function(e,t){return l(Mi,t,l(Hi,W([$i("fas fa-"+e)]),z))}),Ii=n(function(e,t){return I(t,{attributes:B(t.attributes,e)})}),Ai=n(function(e,t){return I(t,{itemChildren:e})}),Bi=ct,zi=Bi(""),Ni={attributes:z,baseColor:"Primary",indent:20,itemChildren:function(e){return z},itemIcon:function(e){return sr},itemLabel:function(e){return zi},itemOpen:function(e){return!0},itemSelected:function(e){return!1},onPress:function(e){return sr},onPressIcon:function(e){return sr},padding:10,rootItems:z,selectColor:sr},Fi=n(function(e,t){return I(t,{itemIcon:e})}),Wi=n(function(e,t){return I(t,{itemLabel:e})}),ji=n(function(e,t){return I(t,{onPress:e})}),Vi=n(function(e,t){return I(t,{onPressIcon:e})}),Ui=n(function(e,t){return I(t,{itemOpen:e})}),qi=n(function(e,t){return I(t,{rootItems:e})}),Gi=n(function(e,t){return I(t,{itemSelected:e})}),Zi=r(function(e,t,n){var r=W([$i("spacing"+_r(e))]);return l(Ri,B(W([$i("column")]),B(r,t)),n)}),Ji=vt,Xi=W([l(Ji,"font-size","16px"),l(Ji,"font-family","sans-serif")]),Yi=i(function(e,t,n,r){return{$:"RGBA",a:e,b:t,c:n,d:r}}),Ki=r(function(e,t,n){return f(Yi,e,t,n,1)}),Qi=h(Ki,.8,.8,.8),eo=J,to=ue,no=function(e){var t=e.a,n=e.b,r=e.c,i=e.d;return"rgba("+_r(eo(255*t))+","+_r(eo(255*n))+","+_r(eo(255*r))+","+to(i)+")"},ro=n(function(e,t){return l(bt,function(e){return/^(on|formAction$)/i.test(e)?"data-"+e:e}(e),yt(t))}),io=n(function(e,t){return l(Mi,B(e,W([l(ro,"role","button")])),t)}),oo=function(e){return l(Ji,"border-color",e)},ao=function(e){return l(Ji,"border-style",e)},so=i(function(e,t,n,r){return l(Ji,"border-width",l(Cr," ",W([e,t,n,r])))}),uo=function(e){return l(Ji,"color",e)},co=i(function(e,t,n,r){return l(Ji,"padding",l(Cr," ",W([e,t,n,r])))}),lo=function(e){return _r(e)+"px"},ho=r(function(e,t,n){var r=W([$i("spacing"+_r(e))]);return l(Ri,B(W([$i("row")]),B(r,t)),n)}),fo=r(function(e,t,n){return e(t(n))}),go=n(function(e,t){return t.b?h(yi,En,t,e):e}),po=function(e){return h(yi,go,z,e)},vo=n(function(e,t){return po(l(xi,e,t))}),mo=function(e){if(e.b){var t=e.a;e.b;return ar(t)}return sr},bo=function(e){return W([e])},wo=n(function(e,t){if("Just"===t.$){var n=t.a;return ar(e(n))}return sr}),yo=n(function(e,t){return"Just"===t.$?t.a:e}),xo=pt,To=n(function(e,t){return l(xo,e,function(e){return{$:"Normal",a:e}}(t))}),So=function(e){return l(To,"click",Ci(e))},Eo=r(function(e,t,n){var r=function(){var t=e.selectColor;return"Just"===t.$?t.a:e.baseColor}(),i=e.itemSelected(n)?W([$i("bg"+r+" bgHover"),uo(no(h(Ki,1,1,1)))]):W([$i("bg"+r+" bgHoverOnly bgAlphaHigh text"+e.baseColor)]),o=e.itemOpen(n)?l(vo,l(Eo,e,t+e.indent),e.itemChildren(n)):z,a=l(yo,z,l(wo,l(fo,bo,So),e.onPress(n))),s=l(io,B(W([l(Ji,"cursor","pointer"),f(co,lo(e.padding),"0",lo(e.padding),"0"),Di]),a),e.itemLabel(n)),u=function(){var t=e.itemIcon(n);if("Just"===t.$){var r=t.a,i=function(){var t=e.onPressIcon(n);if("Just"===t.$){var r=t.a;return W([So(r)])}return z}();return l(io,i,r)}return zi}(),c=R(mo(e.rootItems),ar(n))?z:W([f(so,lo(1),lo(0),lo(0),lo(0)),ao("solid")]);return B(W([h(ho,5,B(W([f(co,"0",lo(e.padding),"0",lo(e.padding+t)),oo(no(Qi))]),B(i,c)),W([u,s]))]),o)}),_o=function(e){return h(Zi,0,B(Xi,B(W([l(Ji,"align-items","stretch")]),e.attributes)),l(vo,l(Eo,e,0),e.rootItems))},Co=function(e){return e.b},Po=function(e){var t=n(function(e,t){return D(t,l(En,t.id,e))});return _o(l(Vi,l(fo,l(fo,ar,bi(e)),Xn),l(ji,l(fo,l(fo,ar,di),Co),l(Ui,function(t){var n=t.a;t.b;return l(mi,n,e)},l(Gi,function(t){t.a;var n=t.b;return R(mo(e.selectedCollection),mo(n))},l(Ai,function(n){var r=n.a,i=n.b;return l(xi,t(i),l(Ti,e.iiif,r.collections))},l(Fi,function(t){var n=t.a;t.b;return l(mi,n,e)?ar(l(Li,"folder-open",z)):ar(l(Li,"folder",z))},l(Wi,function(e){var t=e.a;e.b;return l(Mi,W([l(Ji,"white-space","no-wrap")]),Bi(l(Si,"Unnamed collection",t)))},l(qi,l(xi,t(z),l(Ti,e.iiif,e.collections)),l(Ii,W([Di]),Ni))))))))))},Ro=gt,ko=Je,Oo=ko(z),$o={emptyModel:On,init:function(e){var t=l(Ir,l(Ar,"rootUrl",Br),e);return function(){if("Ok"===t.$){var e=t.a;return l(In,Dn(W([$n(e)])),Hn(function(t){return I(t,{collections:B(t.collections,W([e]))})}))}return t.a,mn}()(H(On,Lr,z))},subscriptions:function(e){return Oo},update:fi,view:function(e){return l(Ro,Po,e)}},Mo=function(e){return{$:"LoadCollection",a:e}},Do=function(e){return{$:"LoadManifest",a:e}},Ho=n(function(e,t){var n=t.a,r=t.b,i=t.c,o=e(n),a=o.a,s=o.b,u=o.c;return H(a,l(ci,r,s),B(i,u))}),Lo=n(function(e,t){var n=t.a,r=t.b,i=t.c;if(i.b){var o=i.a,a=i.b;return l(Ho,e(o),l(Lo,e,H(n,r,a)))}return H(n,r,z)}),Io=Xe,Ao=n(function(e,t){var n=t.a,r=t.b,i=t.c;return H(n,l(Io,e,r),i)}),Bo=Xe,zo=ft,No=function(e){var t=function(t){return l(In,Ao(e.wrapMsg),l(In,Hn(e.wrapModel(t)),Lo(e.outEvaluator)))},r=n(function(n,r){return l(t,r,l(e.component.update,n,e.unwrapModel(r)))}),i=n(function(n,r){return l(t,r,e.component.init(n))});return{component:e.component,init:i,pipe:t,subscriptions:function(t){return l(Bo,e.wrapMsg,e.component.subscriptions(e.unwrapModel(t)))},unwrap:e.unwrapModel,updater:r,view:function(t){return l(zo,e.wrapMsg,e.component.view(e.unwrapModel(t)))}}},Fo=function(e){return!e.b},Wo=No({component:$o,outEvaluator:n(function(e,t){switch(e.$){case"LoadManifest":var n=e.a;return H(t,Lr,W([Do(n)]));case"LoadCollection":n=e.a;return H(t,Lr,W([Mo(n)]));default:var r=e.a;return H(t,Lr,W([function(e){return{$:"CollectionSelected",a:e}}(r)]))}}),unwrapModel:function(e){return e.collectionTreeModel},wrapModel:n(function(e,t){return Fo(t.errors)?I(e,{collectionTreeModel:t}):I(e,{collectionTreeModel:I(t,{errors:z}),errors:B(e.errors,t.errors)})}),wrapMsg:function(e){return{$:"CollectionTreeMsg",a:e}}}),jo={collection:sr,errors:z,manifests:z,panelModels:z,selectedManifest:sr},Vo={collection:sr,errors:z,manifestListModel:jo},Uo=n(function(e,t){return{$:"CanvasSelected",a:e,b:t}}),qo=function(e){return{$:"LoadCollection",a:e}},Go=n(function(e,t){var n=t.config;return I(t,{config:I(n,{attributes:B(n.attributes,e)})})}),Zo={$:"Hidden"},Jo={$:"Visible"},Xo={collapseHeight:0,config:{attributes:z,collapseTime:200,content:zi,hideLabel:Bi("Hide"),id:sr,showLabel:Bi("Show")},state:Jo},Yo=r(function(e,t,n){return I(n,{config:I(n.config,{hideLabel:t,showLabel:e})})}),Ko={collapsible:l(Go,W([Di]),h(Yo,Bi("Show manifest details"),Bi("Hide manifest details"),function(e){return I(e,{state:Zo})}(Xo))),manifest:sr},Qo=function(e){return{$:"CollapsibleMsg",a:e}},ea=function(e){return{$:"CollapseFrame",a:e}},ta=function(e){return{$:"OpenFrame",a:e}},na=function(e){return{$:"OpenPreFrame",a:e}},ra=function(e){return{$:"Time",a:e}},ia=r(function(e,t,n){return{oldTime:n,request:t,subs:e}}),oa=Pe,aa=oa(h(ia,z,sr,0)),sa=function(e){return{$:"External",a:e}},ua=function(e){return{$:"Internal",a:e}},ca=function(e){return{$:"NotFound",a:e}},la=function(e){for(;;){e=e.a}},ha=function(e){return{$:"Perform",a:e}},fa=oa(M),da=Oe,ga=n(function(e,t){return l(da,function(t){return oa(e(t))},t)}),pa=r(function(e,t,n){return l(da,function(t){return l(da,function(n){return oa(l(e,t,n))},n)},t)}),va=function(e){return h(yi,pa(En),oa(z),e)},ma=qe,ba=n(function(e,t){var n=t.a;return He(l(da,ma(e),n))}),wa=r(function(e,t,n){return l(ga,function(e){return M},va(l(xi,ba(e),t)))}),ya=r(function(e,t,n){return oa(M)}),xa=n(function(e,t){var n=t.a;return ha(l(ga,e,n))});je.Task=Ve(fa,wa,ya,xa);var Ta=Ze("Task"),Sa=n(function(e,t){return Ta(ha(l(ga,e,t)))}),Ea=function(e){return e.length},_a=re,Ca=n(function(e,t){return e<1?t:h(_a,e,Ea(t),t)}),Pa=ae,Ra={$:"Http"},ka={$:"Https"},Oa=se,$a=function(e){return""===e},Ma=n(function(e,t){return e<1?"":h(_a,0,e,t)}),Da=oe,Ha=function(e){for(var t=0,n=e.charCodeAt(0),r=43==n||45==n?1:0,i=r;i<e.length;++i){var o=e.charCodeAt(i);if(o<48||57<o)return sr;t=10*t+o-48}return i==r?sr:ar(45==n?-t:t)},La=a(function(e,t,n,r,i,o){return{fragment:o,host:t,path:r,port_:n,protocol:e,query:i}}),Ia=o(function(e,t,n,r,i){if($a(i)||l(Da,"@",i))return sr;var o=l(Oa,":",i);if(o.b){if(o.b.b)return sr;var a=o.a,s=Ha(l(Ca,a+1,i));if("Nothing"===s.$)return sr;var u=s;return ar(g(La,e,l(Ma,a,i),u,t,n,r))}return ar(g(La,e,i,sr,t,n,r))}),Aa=i(function(e,t,n,r){if($a(r))return sr;var i=l(Oa,"/",r);if(i.b){var o=i.a;return d(Ia,e,l(Ca,o,r),t,n,l(Ma,o,r))}return d(Ia,e,"/",t,n,r)}),Ba=r(function(e,t,n){if($a(n))return sr;var r=l(Oa,"?",n);if(r.b){var i=r.a;return f(Aa,e,ar(l(Ca,i+1,n)),t,l(Ma,i,n))}return f(Aa,e,sr,t,n)}),za=n(function(e,t){if($a(t))return sr;var n=l(Oa,"#",t);if(n.b){var r=n.a;return h(Ba,e,ar(l(Ca,r+1,t)),l(Ma,r,t))}return h(Ba,e,sr,t)}),Na=function(e){return l(Pa,"http://",e)?l(za,Ra,l(Ca,7,e)):l(Pa,"https://",e)?l(za,ka,l(Ca,8,e)):sr},Fa=ke(function(e){e(Pe(Date.now()))}),Wa=ke(function(e){var t=Yt(function(){e(Pe(Date.now()))});return function(){Xt(t)}}),ja=Ge,Va=function(e){return ke(function(t){var n=e.f;2===n.$&&n.c&&n.c(),e.f=null,t(Pe(M))})},Ua=He,qa=r(function(e,t,n){var r=n.request,i=n.oldTime,o=D(r,t);if("Nothing"===o.a.$){if(o.b.b){o.a;return l(da,function(e){return l(da,function(n){return oa(h(ia,t,ar(e),n))},Fa)},Ua(l(da,ja(e),Wa)))}o.a;return aa}if(o.b.b)return oa(h(ia,t,r,i));var a=o.a.a;return l(da,function(e){return aa},Va(a))}),Ga=function(e){return{$:"Posix",a:e}},Za=r(function(e,t,n){var r=n.subs,i=n.oldTime,o=function(n){if("Time"===n.$){var r=n.a;return l(ma,e,r(Ga(t)))}r=n.a;return l(ma,e,r(t-i))};return l(da,function(e){return l(da,function(n){return oa(h(ia,r,ar(e),t))},va(l(xi,o,r)))},Ua(l(da,ja(e),Wa)))}),Ja=n(function(e,t){if("Time"===t.$){var n=t.a;return ra(l(fo,e,n))}n=t.a;return function(e){return{$:"Delta",a:e}}(l(fo,e,n))});je["Browser.AnimationManager"]=Ve(aa,qa,Za,0,Ja);var Xa=Ze("Browser.AnimationManager"),Ya=function(e){return Xa(ra(e))},Ka=function(e){switch(e.state.$){case"CollapseStart":return Ya(ea);case"OpenPreStart":return Ya(na);case"OpenStart":return Ya(ta);default:return Oo}},Qa={$:"ManifestSelected"},es=r(function(e,t,n){return{attribution:sr,description:sr,id:e,label:t,license:sr,logo:n,metadata:pn,related:z,seeAlso:z,sequences:z,status:ii,structures:z}}),ts=n(function(e,t){return h(ri,t,es,e.manifests)}),ns={includeIiifLink:!1,manifest:sr},rs=n(function(e,t){return I(t,{manifest:ar(e)})}),is=lt("a"),os=lt("img"),as=Oi("alt"),ss=function(e){return l(bt,"height",_r(e))},us=function(e){return l(Oi,"href",function(e){return/^javascript:/i.test(e.replace(/\s/g,""))?'javascript:alert("This is an XSS vector. Please use ports or web components instead.")':e}(e))},cs=function(e){return l(Oi,"src",yt(e))},ls=function(e){return l(is,W([us(e)]),W([l(os,W([ss(18),function(e){return l(bt,"width",_r(e))}(21),cs("logo-iiif-small.png"),as("IIIF")]),z)]))},hs=n(function(e,t){return{label:e,value:t}}),fs=function(e){return l(Ji,"padding",e)},ds=n(function(e,t){return l(Mi,W([fs(lo(5)),l(Ji,"font-weight","bold")]),Bi(t.label+":"))}),gs=n(function(e,t){return l(Mi,W([fs(lo(5))]),t.value)}),ps=r(function(e,t,r){var o=n(function(e,t){return l(Ri,B(W([l(Ji,"grid-row","1"),l(Ji,"grid-column",_r(e+1))]),t.attributes),W([t.header]))}),a=i(function(e,t,n,r){return l(Ri,B(W([l(Ji,"grid-row",_r(e+2)),l(Ji,"grid-column",_r(n+1))]),r.attributes),W([r.view(t)]))}),s=n(function(e,n){return l(Sr,l(a,e,n),t)});return l(Ri,B(W([$i("grid")]),e),B(l(Sr,o,t),po(l(Sr,s,r))))}),vs=function(e){return e.narrow?function(e){return h(Zi,5,B(W([Di]),Xi),l(vo,function(t){return W([l(ds,e,t),l(gs,e,t)])},e.items))}(e):function(e){var t=W([{attributes:e.labelAttributes,header:zi,view:ds(e)},{attributes:e.valueAttributes,header:zi,view:gs(e)}]);return h(ps,B(W([Di]),Xi),t,e.items)}(e)},ms={items:z,labelAttributes:z,narrow:!1,valueAttributes:z},bs=n(function(e,t){return I(t,{items:e})}),ws=n(function(e,t){return h(yi,n(function(t,n){return e(t)?l(En,t,n):n}),z,t)}),ys=n(function(e,t){for(;;){if(!t.b)return!1;var n=t.a,r=t.b;if(e(n))return!0;e=e,t=r}}),xs=n(function(e,t){return l(ys,function(t){return R(t,e)},t)}),Ts=function(e){return lt(wt(e))},Ss=n(function(e,t){e:for(;;)switch(e.$){case"Empty":return t;case"AddRight":var n=e.a,r=e.b;e=n,t=l(En,r,t);continue e;default:n=e.a;var i=e.b;e=n,t=l(Ss,i,t);continue e}}),Es=n(function(e,t){var n=(0,e.a)({col:1,context:z,indent:1,offset:0,row:1,src:t});if("Good"===n.$){var r=n.b;return cr(r)}var i=n.b;return ur(l(Ss,i,z))}),_s=n(function(e,t){return e}),Cs=n(function(e,t){return{$:"Bad",a:e,b:t}}),Ps=r(function(e,t,n){return{$:"Good",a:e,b:t,c:n}}),Rs=function(e){return{$:"Parser",a:e}},ks=r(function(e,t,n){var r=t.a,i=n.a;return Rs(function(t){var n=r(t);if("Bad"===n.$){var o=n.a,a=n.b;return l(Cs,o,a)}var s=n.a,u=n.b,c=n.c,f=i(c);if("Bad"===f.$){var d=f.a;a=f.b;return l(Cs,s||d,a)}d=f.a;var g=f.b,p=f.c;return h(Ps,s||d,l(e,u,g),p)})}),Os=n(function(e,t){return h(ks,_s,e,t)}),$s=r(function(e,t,n){return{col:t,context:n,row:e}}),Ms=n(function(e,t){return{col:t.col,context:e,indent:t.indent,offset:t.offset,row:t.row,src:t.src}}),Ds=n(function(e,t){var n=t.a;return Rs(function(t){var r=n(l(Ms,l(En,h($s,t.row,t.col,e),t.context),t));if("Good"===r.$){var i=r.a,o=r.b,a=r.c;return h(Ps,i,o,l(Ms,t.context,a))}return r})}),Hs=n(function(e,t){return h(ks,Kn,e,t)}),Ls={$:"Empty"},Is=n(function(e,t){return{$:"Append",a:e,b:t}}),As=r(function(e,t,n){for(;;){if(!n.b)return l(Cs,!1,t);var r=n.a.a,i=n.b,o=r(e);if("Good"===o.$)return a=o;var a,s=(a=o).a,u=a.b;if(s)return a;e=e,t=l(Is,t,u),n=i}}),Bs=function(e){return Rs(function(t){return h(As,t,Ls,e)})},zs=function(e){return Rs(function(t){return h(Ps,!1,e,t)})},Ns=r(function(e,t,n){return{docType:t,processingInstructions:e,root:n}}),Fs=function(e){return-e},Ws=cn,js=n(function(e,t){return{$:"AddRight",a:e,b:t}}),Vs=i(function(e,t,n,r){return{col:t,contextStack:r,problem:n,row:e}}),Us=i(function(e,t,n,r){return l(js,Ls,f(Vs,e,t,n,r))}),qs=function(e){return!e},Gs=n(function(e,t){return l(js,Ls,f(Vs,e.row,e.col,t,e.context))}),Zs=sn,Js=function(e){var t=e.a,n=e.b,r=!$a(t);return Rs(function(e){var i=d(Zs,t,e.offset,e.row,e.col,e.src),o=i.a,a=i.b,s=i.c;return R(o,-1)?l(Cs,!1,l(Gs,e,n)):h(Ps,r,M,{col:s,context:e.context,indent:e.indent,offset:o,row:a,src:e.src})})},Xs=n(function(e,t){return{$:"Token",a:e,b:t}}),Ys=function(e){return l(Xs,e,function(e){return{$:"Expecting",a:e}}(e))},Ks=l(Os,l(Os,l(Os,zs(M),Js(Ys("\x3c!--"))),function(e){var t=e.a,n=e.b;return Rs(function(e){var r=d(Ws,t,e.offset,e.row,e.col,e.src),i=r.a,o=r.b,a=r.c;return R(i,-1)?l(Cs,!1,f(Us,o,a,n,e.context)):h(Ps,O(e.offset,i)<0,M,{col:a,context:e.context,indent:e.indent,offset:i,row:o,src:e.src})})}(Ys("--\x3e"))),Js(Ys("--\x3e"))),Qs=n(function(e,t){return{definition:t,rootElementName:e}}),eu=r(function(e,t,n){return{$:"Public",a:e,b:t,c:n}}),tu=n(function(e,t){return{$:"System",a:e,b:t}}),nu={$:"BadRepeat"},ru=n(function(e,t){var n=t.a;return Rs(function(t){var r=n(t);if("Bad"===r.$){var i=r.a,o=r.b;return l(Cs,i,o)}var a=r.a,s=r.b,u=r.c,c=(0,e(s).a)(u);if("Bad"===c.$){var f=c.a;o=c.b;return l(Cs,a||f,o)}f=c.a;var d=c.b,g=c.c;return h(Ps,a||f,d,g)})}),iu=un,ou=o(function(e,t,n,r,i){for(;;){var o=h(iu,e,t,i.src);if(R(o,-1))return h(Ps,O(i.offset,t)<0,M,{col:r,context:i.context,indent:i.indent,offset:t,row:n,src:i.src});if(R(o,-2))e=e,t=t+1,n=n+1,r=1,i=i;else e=e,t=o,n=n,r=r+1,i=i}}),au=n(function(e,t){var n=t.a;return Rs(function(t){var r=n(t);if("Bad"===r.$){var i=r.a,o=r.b;return l(Cs,i,o)}i=r.a;var a=r.b,s=r.c;return h(Ps,i,l(e,h(_a,t.offset,s.offset,t.src),a),s)})}),su=function(e){return Rs(function(t){return l(Cs,!1,l(Gs,t,e))})},uu=n(function(e,t){var n=e.a;return l(ru,function(e){return O(n,Ea(e))<1?zs(e):su(nu)},function(e){return l(au,_s,e)}(l(Os,zs(M),function(e){return Rs(function(t){return d(ou,e,t.offset,t.row,t.col,t)})}(t))))}),cu=Js,lu=function(e){return cu(l(Xs,e,function(e){return{$:"ExpectingSymbol",a:e}}(e)))},hu=function(e){return{$:"AtLeast",a:e}},fu=hu(0),du=l(Ds,"docTypeExternalSubset",l(Hs,l(Os,zs(mn),lu('"')),l(Os,l(uu,fu,function(e){return!R(e,L('"'))}),lu('"')))),gu=l(Ds,"docTypeInternalSubset",l(Hs,l(Os,zs(mn),lu("[")),l(Os,l(uu,fu,function(e){return!R(e,L("]"))}),lu("]")))),pu=function(e){return function(e){var t=e.a,n=e.b,r=!$a(t);return Rs(function(e){var i=d(Zs,t,e.offset,e.row,e.col,e.src),o=i.a,a=i.b,s=i.c;return R(o,-1)||0<=h(iu,function(e){return br(e)||R(e,L("_"))},o,e.src)?l(Cs,!1,l(Gs,e,n)):h(Ps,r,M,{col:s,context:e.context,indent:e.indent,offset:o,row:a,src:e.src})})}(l(Xs,e,function(e){return{$:"ExpectingKeyword",a:e}}(e)))},vu=n(function(e,t){var n=t.a;return Rs(function(t){var r=n(t);if("Good"===r.$){var i=r.a,o=r.b,a=r.c;return h(Ps,i,e(o),a)}i=r.a;var s=r.b;return l(Cs,i,s)})}),mu=function(e){return Bs(W([l(vu,ar,e),zs(sr)]))},bu=l(Ds,"publicIdentifier",l(Hs,l(Os,zs(mn),lu('"')),l(Os,l(uu,fu,function(e){return!R(e,L('"'))}),lu('"')))),wu=n(function(e,t){return l(vu,function(e){return M},l(uu,e,t))}),yu=function(e){return R(e,L(" "))||R(e,L("\r"))||R(e,L("\n"))||R(e,L("\t"))},xu=l(wu,fu,yu),Tu=l(Ds,"docTypeDefinition",Bs(W([l(Hs,l(Hs,l(Hs,l(Os,l(Os,zs(eu),pu("PUBLIC")),xu),l(Os,bu,xu)),l(Os,du,xu)),mu(gu)),l(Hs,l(Hs,l(Os,l(Os,zs(tu),pu("SYSTEM")),xu),l(Os,du,xu)),mu(gu)),l(Hs,zs(function(e){return{$:"Custom",a:e}}),gu)]))),Su=hu(1),Eu=l(Ds,"tagName",l(uu,Su,function(e){return!(yu(e)||R(e,L("/"))||R(e,L("<"))||R(e,L(">"))||R(e,L('"'))||R(e,L("'"))||R(e,L("=")))})),_u=l(Ds,"docType",l(Hs,l(Hs,l(Os,l(Os,zs(Qs),lu("<!DOCTYPE")),xu),l(Os,Eu,xu)),l(Os,l(Os,Tu,xu),lu(">")))),Cu=function(e){return Rs(function(t){return(0,e(M).a)(t)})},Pu=r(function(e,t,n){return{$:"Element",a:e,b:t,c:n}}),Ru=n(function(e,t){return{name:e,value:t}}),ku=l(Ds,"attributeName",l(uu,Su,function(e){return!(yu(e)||R(e,L("/"))||R(e,L("<"))||R(e,L(">"))||R(e,L('"'))||R(e,L("'"))||R(e,L("=")))})),Ou=K,$u=function(e){return L(e<0||1114111<e?"":e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(Math.floor(e/1024)+55296)+String.fromCharCode(e%1024+56320)))},Mu=n(function(e,t){if("Just"===t.$){var n=t.a;return cr(n)}return ur(e)}),Du=n(function(e,t){if("Ok"===t.$){var n=t.a;return cr(e(n))}var r=t.a;return ur(r)}),Hu=n(function(e,t){if("Ok"===t.$){var n=t.a;return cr(n)}var r=t.a;return ur(e(r))}),Lu=function(e){return{$:"Problem",a:e}},Iu=function(e){return h(Gn,n(function(e,t){var n=e.a,r=e.b;return h(Ur,n,r,t)}),pn,e)},Au=Iu(W([D("amp",L("&")),D("lt",L("<")),D("gt",L(">")),D("apos",L("'")),D("quot",L('"'))])),Bu=ee,zu=function(e){return h(Bu,En,z,e)},Nu=q,Fu=function(e){return l(Ou,e,"")},Wu=r(function(e,t,n){e:for(;;){if(!t.b)return cr(n);var r=t.a,i=t.b;switch(r.valueOf()){case"0":e=o=e-1,t=a=i,n=s=n;continue e;case"1":var o=e-1,a=i,s=n+l(Nu,16,e);e=o,t=a,n=s;continue e;case"2":o=e-1,a=i,s=n+2*l(Nu,16,e);e=o,t=a,n=s;continue e;case"3":o=e-1,a=i,s=n+3*l(Nu,16,e);e=o,t=a,n=s;continue e;case"4":o=e-1,a=i,s=n+4*l(Nu,16,e);e=o,t=a,n=s;continue e;case"5":o=e-1,a=i,s=n+5*l(Nu,16,e);e=o,t=a,n=s;continue e;case"6":o=e-1,a=i,s=n+6*l(Nu,16,e);e=o,t=a,n=s;continue e;case"7":o=e-1,a=i,s=n+7*l(Nu,16,e);e=o,t=a,n=s;continue e;case"8":o=e-1,a=i,s=n+8*l(Nu,16,e);e=o,t=a,n=s;continue e;case"9":o=e-1,a=i,s=n+9*l(Nu,16,e);e=o,t=a,n=s;continue e;case"a":o=e-1,a=i,s=n+10*l(Nu,16,e);e=o,t=a,n=s;continue e;case"b":o=e-1,a=i,s=n+11*l(Nu,16,e);e=o,t=a,n=s;continue e;case"c":o=e-1,a=i,s=n+12*l(Nu,16,e);e=o,t=a,n=s;continue e;case"d":o=e-1,a=i,s=n+13*l(Nu,16,e);e=o,t=a,n=s;continue e;case"e":o=e-1,a=i,s=n+14*l(Nu,16,e);e=o,t=a,n=s;continue e;case"f":o=e-1,a=i,s=n+15*l(Nu,16,e);e=o,t=a,n=s;continue e;default:return ur(Fu(r)+" is not a valid hexadecimal character.")}}}),ju=function(e){if($a(e))return ur("Empty strings are not valid hexadecimal strings.");var t=function(){if(l(Pa,"-",e)){var t=l(yo,z,function(e){if(e.b){e.a;var t=e.b;return ar(t)}return sr}(zu(e)));return l(Du,Fs,h(Wu,wr(t)-1,t,0))}return h(Wu,Ea(e)-1,zu(e),0)}();return l(Hu,function(t){return l(Cr," ",W(['"'+e+'"',"is not a valid hexadecimal string because",t]))},t)},Vu=function(e){return su(Lu(e))},Uu=function(e){return l(Ds,"escapedChar",l(ru,function(e){return Bs(W([l(ru,function(t){var n=function(e){return l(Pa,"#x",e)?l(Hu,Lu,l(Du,$u,ju(l(Ca,2,e)))):l(Pa,"#",e)?l(Mu,Lu("Invalid escaped charactor: "+e),l(wo,$u,Ha(l(Ca,1,e)))):l(Mu,Lu('No entity named "&'+e+';" found.'),l(ni,e,Au))}(e);if("Ok"===n.$){var r=n.a;return zs(r)}var i=n.a;return su(i)},lu(";")),Vu('Entities must end_ with ";": &'+e)]))},l(Hs,l(Os,zs(mn),lu("&")),l(uu,Su,function(t){return!R(t,e)&&!R(t,L(";"))}))))},qu=function(e){return l(Ds,"textString",l(ru,function(t){return Bs(W([l(Hs,l(Hs,zs(Ou),Uu(e)),Cu(function(t){return qu(e)})),zs(t)]))},l(uu,fu,function(t){return!R(t,e)&&!R(t,L("&"))})))},Gu=l(Ds,"attributeValue",Bs(W([l(Hs,l(Os,zs(mn),lu('"')),l(Os,qu(L('"')),lu('"'))),l(Hs,l(Os,zs(mn),lu("'")),l(Os,qu(L("'")),lu("'")))]))),Zu=l(Ds,"attribute",l(Hs,l(Hs,zs(Ru),l(Os,l(Os,l(Os,ku,xu),lu("=")),xu)),Gu)),Ju=function(e){return l(Ds,"attributes",Bs(W([l(ru,function(t){return l(pi,t.name,e)?Vu("attribute "+t.name+" is duplicated"):l(Hs,l(Os,zs(En(t)),xu),Ju(l(qr,t.name,e)))},Zu),zs(z)])))},Xu=function(e){return l(Ds,"closingTag",l(Os,l(Os,l(Os,l(Os,l(Os,zs(M),lu("</")),xu),l(ru,function(t){return R(e,t)?zs(M):Vu("tag name mismatch: "+e+" and "+t)},Eu)),xu),lu(">")))};function Yu(){return l(Ds,"cdataContent",Bs(W([l(Os,zs(""),lu("]]>")),l(ru,function(e){return l(vu,function(e){return"]]"+e},Yu())},lu("]]")),l(ru,function(e){return l(vu,function(e){return"]"+e},Yu())},lu("]")),l(Hs,l(Hs,zs(Mn),l(uu,fu,function(e){return!R(e,L("]"))})),Cu(function(e){return Yu()}))])))}try{var Ku=Yu();Yu=function(){return Ku}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      cdataContent\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var Qu=l(Ds,"cdata",l(Hs,l(Os,zs(mn),lu("<![CDATA[")),Ku));function ec(){return l(Ds,"textNodeString",Bs(W([l(Hs,l(Hs,zs(n(function(e,t){return ar(B(e,l(yo,"",t)))})),l(uu,Su,function(e){return!R(e,L("<"))&&!R(e,L("&"))})),Cu(function(e){return ec()})),l(Hs,l(Hs,zs(n(function(e,t){return ar(l(Ou,e,l(yo,"",t)))})),Uu(L("<"))),Cu(function(e){return ec()})),l(Hs,l(Hs,zs(n(function(e,t){var n=B(e,l(yo,"",t));return""!==n?ar(n):sr})),Qu),Cu(function(e){return ec()})),l(Hs,l(Os,zs(function(e){var t=l(yo,"",e);return""!==t?ar(t):sr}),Ks),Cu(function(e){return ec()})),zs(sr)])))}try{var tc=ec();ec=function(){return tc}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      textNodeString\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var nc=function(e){return l(Ds,"children",Bs(W([l(Os,zs(z),Xu(e)),l(ru,function(t){if("Just"===t.$){var n=t.a;return l(Hs,zs(function(e){return l(En,function(e){return{$:"Text",a:e}}(n),e)}),nc(e))}return l(Os,zs(z),Xu(e))},tc),Cu(function(t){return l(Hs,l(Hs,zs(En),rc()),nc(e))})])))};function rc(){return l(Ds,"element",l(Hs,l(Os,zs(mn),lu("<")),l(ru,function(e){return l(Hs,l(Hs,l(Os,zs(Pu(e)),xu),l(Os,Ju(wn),xu)),Bs(W([l(Os,zs(z),lu("/>")),l(Hs,l(Os,zs(mn),lu(">")),Cu(function(t){return nc(e)}))])))},Eu)))}try{var ic=rc();rc=function(){return ic}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      children\n       \n      element\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var oc=function(e){return Rs(function(t){return R(Ea(t.src),t.offset)?h(Ps,!1,M,t):l(Cs,!1,l(Gs,t,e))})}({$:"ExpectingEnd"}),ac=n(function(e,t){return{name:e,value:t}}),sc=l(Ds,"processingInstructionName",l(uu,Su,function(e){return!R(e,L(" "))}));function uc(){return l(Ds,"processingInstructionValue",Bs(W([l(Os,zs(""),lu("?>")),l(ru,function(e){return l(vu,function(e){return"?"+e},uc())},lu("?")),l(Hs,l(Hs,zs(Mn),l(uu,fu,function(e){return!R(e,L("?"))})),Cu(function(e){return uc()}))])))}try{var cc=uc();uc=function(){return cc}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      processingInstructionValue\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var lc=l(Ds,"processingInstruction",l(Hs,l(Hs,l(Os,zs(ac),lu("<?")),l(Os,sc,lu(" "))),cc)),hc=i(function(e,t,n,r){e:for(;;){var i=(0,n(t).a)(r);if("Good"===i.$){var o=i.a,a=i.b,s=i.c;if("Loop"===a.$){var u=a.a;e=e||o,t=u,n=n,r=s;continue e}var c=a.a;return h(Ps,e||o,c,s)}o=i.a;var f=i.b;return l(Cs,e||o,f)}}),fc=n(function(e,t){return Rs(function(n){return f(hc,!1,e,t,n)})}),dc=n(function(e,t){var n=e.a;return l(ru,function(e){return O(n,wr(e))<1?zs(e):su(nu)},l(fc,z,function(e){return Bs(W([l(vu,function(t){return function(e){return{$:"Loop",a:e}}(l(go,e,W([t])))},t),l(vu,_s(function(e){return{$:"Done",a:e}}(e)),zs(M))]))}))}),gc=l(wu,Su,yu),pc=l(Ds,"xml",l(Hs,l(Hs,l(Hs,l(Os,zs(Ns),xu),l(Os,l(dc,fu,l(Hs,zs(mn),l(Os,lc,xu))),l(dc,fu,Bs(W([gc,Ks]))))),l(Os,mu(_u),l(dc,fu,Bs(W([gc,Ks]))))),l(Os,l(Os,ic,l(dc,fu,Bs(W([gc,Ks])))),oc))),vc=function(e){var t=function(e){return l(Es,pc,e)}("<root>"+e+"</root>"),n=W(["div","span","a","img","ol","ul","dl","dd","dt","table","tbody","thead","tfoot","tr","td","th","li","p","i","u","em","small","b","sub","sup","abbr","cite","del","ins","pre","br","h1","h2","h3","h4","h5","h6","hr"]),r=W(["href","src","style","class","title"]),i=function(e){if("Element"===e.$){var t=e.a,o=e.b,a=e.c;if(l(xs,t,n)){var s=l(xi,function(e){return l(ro,e.name,e.value)},l(ws,function(e){return l(xs,e.name,r)},o));return h(Ts,t,s,l(xi,i,a))}return Bi("")}var u=e.a;return Bi(u)};if("Ok"===t.$){var o=t.a.root;if("Element"===o.$&&"root"===o.a){o.b;var a=o.c;return l(xi,i,a)}return W([Bi("")])}t.a;return W([Bi("")])},mc=r(function(e,t,n){for(;;){if("RBEmpty_elm_builtin"===n.$)return t;var r=n.b,i=n.c,o=n.d,a=n.e,s=e,u=h(e,r,i,h(mc,e,t,o));e=s,t=u,n=a}}),bc=r(function(e,t,n){var r=e(t);if("Just"===r.$){var i=r.a;return l(En,i,n)}return n}),wc=n(function(e,t){return h(yi,bc(e),z,t)}),yc=n(function(e,t){return"Just"===t.$?e(t.a):sr}),xc=r(function(e,t,n){if("Nothing"===t.$)return sr;var r=t.a;if("Nothing"===n.$)return sr;var i=n.a;return ar(l(e,r,i))}),Tc=function(e){var t=e.manifest;if("Nothing"===t.$)return zi;var i=t.a,o=n(function(e,t){return h(xc,hs,ar(e),t)}),a=r(function(e,t,n){return l(yc,function(n){return l(o,e,ar(l(is,W([us(n)]),W([Bi(t)]))))},n)}),s=n(function(e,t){var n=l(wo,l(fo,Ri(W([$i("formattedContent")])),vc),t);return l(o,e,n)}),u=r(function(e,t,n){return B(n,W([l(s,e,ar(t))]))}),c=r(function(e,t,n){return h(Gn,u(e),n,t)}),f=n(function(e,t){return l(yc,function(t){return h(a,e,l(yo,t.id,t.label),ar(t.id))},t)}),d=e.includeIiifLink?ar(l(hs,"IIIF",ls(i.id))):sr,g=l(wc,mn,B(W([l(s,"Title",i.label),l(s,"Attribution",i.attribution),l(s,"Description",i.description)]),B(h(mc,c,z,i.metadata),B(l(xi,function(e){return l(f,"See also",ar(e))},i.seeAlso),B(l(xi,function(e){return l(f,"Related",ar(e))},i.related),W([h(a,"License",l(yo,"License",i.license),i.license),d]))))));return vs(l(bs,g,ms))},Sc=n(function(e,t){return I(t,{config:I(t.config,{content:e})})}),Ec=function(e){return{$:"PaddedContent",a:e}},_c=n(function(e,t){return I(t,{baseColor:e})}),Cc={attributes:z,baseColor:"Primary",contentBackgroundColor:sr,endBackgroundColor:sr,footer:sr,fullColor:!1,header:sr,round:5,sections:z},Pc=l(_c,"Secondary",Cc),Rc=r(function(e,t,n){var r=t>0?W([f(so,lo(1),lo(0),lo(0),lo(0)),ao("solid")]):z,i=function(){var t=D(e.contentBackgroundColor,e.fullColor);if("Just"===t.a.$)return"bg"+t.a.a;if(t.b){t.a;return"bg"+e.baseColor+" bgDesatHigh"}t.a;return""}(),o=B(W([Di,$i(i+" border"+e.baseColor+" borderDarken")]),r);if("PaddedContent"===n.$){var a=n.a;return l(Mi,B(o,W([fs(lo(15)),Di])),a)}return a=n.a}),kc=function(e){var t=e.manifest;if("Just"===t.$){var n=t.a,r=Tc(l(rs,n,ns)),i=h(Rc,Pc,1,Ec(r));return I(e,{collapsible:l(Sc,i,e.collapsible)})}return I(e,{collapsible:l(Sc,zi,e.collapsible)})},Oc=n(function(e,t){if("ManifestLoaded"===e.$){var n=e.a,r=e.b;if(R(ar(r),l(wo,function(e){return e.id},t.manifest))){var i=l(ts,n,r);return l(Hn,kc,H(I(t,{manifest:ar(i)}),Lr,z))}return H(t,Lr,z)}return H(t,Lr,z)}),$c={$:"CollapseDone"},Mc=function(e){return{$:"CollapseInfo",a:e}},Dc={$:"CollapseStart"},Hc={$:"Collapsing"},Lc={$:"OpenDone"},Ic=function(e){return{$:"OpenInfo",a:e}},Ac={$:"OpenPreStart"},Bc={$:"OpenStart"},zc={$:"Opening"},Nc=function(e){return on(e,function(e){var t=e.getBoundingClientRect(),n=rn.pageXOffset,r=rn.pageYOffset;return{scene:an(),viewport:{x:n,y:r,width:nn.documentElement.clientWidth,height:nn.documentElement.clientHeight},element:{x:n+t.left,y:r+t.top,width:t.width,height:t.height}}})},Fc=y,Wc=Fe,jc=$e,Vc=n(function(e,t){return Ta(ha(l(jc,l(fo,l(fo,oa,e),ur),l(da,l(fo,l(fo,oa,e),cr),t))))}),Uc=n(function(e,t){switch(e.$){case"Collapse":return H(t,l(Vc,Mc,Nc(l(yo,"",t.config.id))),z);case"CollapseInfo":var n=e.a,r=D(t.state,n);e:for(;;){t:for(;;)if("Err"===r.b.$)switch(r.a.$){case"Hidden":break e;case"Collapsing":break t;default:var i=r.b.a;l(Fc,"Collapsible error",i);return H(t,Lr,z)}else switch(r.a.$){case"Hidden":break e;case"Collapsing":break t;default:return H(I(t,{collapseHeight:r.b.a.element.height,state:Dc}),Lr,z)}r.a;return H(t,Lr,z)}r.a;return H(t,Lr,z);case"CollapseFrame":return H(I(t,{state:Hc}),l(Sa,function(e){return $c},Wc(t.config.collapseTime)),z);case"CollapseDone":return H(I(t,{state:Zo}),Lr,z);case"Open":return H(I(t,{state:Ac}),Lr,z);case"OpenPreFrame":return H(t,l(Vc,Ic,Nc(l(yo,"",t.config.id))),z);case"OpenInfo":n=e.a;var o=D(t.state,n);e:for(;;){t:for(;;)if("Err"===o.b.$)switch(o.a.$){case"Visible":break e;case"Opening":break t;default:i=o.b.a,l(Fc,"Collapsible error",i);return H(t,Lr,z)}else switch(o.a.$){case"Visible":break e;case"Opening":break t;default:return H(I(t,{collapseHeight:o.b.a.element.height,state:Bc}),Lr,z)}o.a;return H(t,Lr,z)}o.a;return H(t,Lr,z);case"OpenFrame":return H(I(t,{state:zc}),l(Sa,function(e){return Lc},Wc(t.config.collapseTime)),z);default:return H(I(t,{state:Jo}),Lr,z)}}),qc=function(e){return l(Ji,"height",e)},Gc=$i("fullHeight"),Zc=function(e){var t=l(ro,"id",l(yo,"",e.config.id)),n=function(){switch(e.state.$){case"Visible":return z;case"CollapseStart":return W([qc(lo(eo(e.collapseHeight)))]);case"Collapsing":return W([qc(lo(0))]);case"Hidden":return W([qc(lo(0)),$i("hide")]);case"OpenPreStart":case"OpenStart":return W([qc(lo(0))]);default:return W([qc(lo(eo(e.collapseHeight)))])}}();return l(Mi,B(W([l(Ji,"overflow-y","hidden"),l(Ji,"transition","height "+to(e.config.collapseTime)+"ms")]),B(n,e.config.attributes)),l(Mi,W([t,l(Ji,"flex-shrink","0"),Di,Gc]),e.config.content))},Jc=No({component:{emptyModel:Xo,init:function(e){return H(Xo,Lr,z)},subscriptions:Ka,update:Uc,view:Zc},outEvaluator:n(function(e,t){return H(t,Lr,z)}),unwrapModel:function(e){return e.collapsible},wrapModel:n(function(e,t){return I(e,{collapsible:t})}),wrapMsg:Qo}),Xc=n(function(e,t){switch(e.$){case"CollapsibleMsg":var n=e.a;return l(Ho,Jc.updater(n),H(t,Lr,z));case"CanvasClicked":var r=e.a;return H(t,Lr,W([function(e){return{$:"CanvasSelected",a:e}}(r)]));case"TitleClicked":return H(t,Lr,W([Qa]));default:var i=e.a;return l(Oc,i,t)}}),Yc={$:"TitleClicked"},Kc=n(function(e,t){return I(t,{canvas:ar(e)})}),Qc=function(e){return{$:"FitH",a:e}},el={$:"Default"},tl={$:"FullRegion"},nl={$:"NoRotation"},rl=n(function(e,t){return{$:"Exactly",a:e,b:t}}),il=U,ol=n(function(e,t){for(;;){if(!t.b)return sr;var n=t.a,r=t.b;if(e(n))return ar(n);e=e,t=r}}),al=n(function(e,t){if(wr(e.sizes)){var n=l(il,Co,e.sizes),r=l(yo,D(0,0),function(e){e:for(;;){if(e.b){if(e.b.b){e=e.b;continue e}var t=e.a;return ar(t)}return sr}}(n)),i=function(){switch(t.$){case"FullSize":case"Max":return r;case"Exactly":var e=t.a,i=t.b;return l(yo,r,l(ol,function(t){return O(t.a,e)>-1&&O(t.b,i)>-1},n));case"FitW":e=t.a;return l(yo,r,l(ol,function(t){return O(t.a,e)>-1},n));case"FitH":i=t.a;return l(yo,r,l(ol,function(e){return O(e.b,i)>-1},n));default:e=t.a,i=t.b;return l(yo,r,l(ol,function(t){return O(t.a,e)>-1&&O(t.b,i)>-1},n))}}();return l(rl,i.a,i.b)}return t}),sl=a(function(e,t,n,r,i,o){var a=function(){var e=l(al,o,t);switch(e.$){case"FullSize":return"full";case"Max":return"max";case"Exactly":var n=e.a,r=e.b;return l(Cr,",",l(xi,_r,W([n,r])));case"FitW":n=e.a;return _r(n)+",";case"FitH":r=e.a;return","+_r(r);default:n=e.a,r=e.b;return"!"+l(Cr,",",l(xi,_r,W([n,r])))}}(),s=function(){switch(e.$){case"FullRegion":return"full";case"Square":return"square";default:var t=e.a,n=e.b,r=e.c,i=e.d;return l(Cr,",",l(xi,_r,W([t,n,r,i])))}}(),u="Default"===r.$?"default":"gray";return l(Cr,"/",W([o.id,s,a,"0",u]))+"."+i}),ul=o(function(e,t,n,r,i){var o=i.service;if("Nothing"===o.$)return l(yo,"",i.id);var a=o.a;return g(sl,e,t,n,r,"jpg",a)}),cl=o(function(e,t,n,r,i){return d(ul,e,t,n,r,i.resource)}),ll=n(function(e,t){return d(cl,tl,e,nl,el,t)}),hl=n(function(e,t){var n=t.thumbnail;if("Just"===n.$){var r=n.a;return d(ul,tl,e,nl,el,r)}var i=t.images;if(i.b){var o=i.a;i.b;return l(ll,e,o)}return""}),fl=i(function(e,t,n,r){return f(Yi,e,t,n,r)}),dl=function(e){var t=e.a,n=e.b,r=e.c;return{alpha:e.d,blue:r,green:n,red:t}},gl=n(function(e,t){var n=dl(t),r=n.red,i=n.green,o=n.blue,a=n.alpha;return f(fl,r,i,o,a*e)}),pl=function(e){return e===1/0||e===-1/0},vl=X,ml=l(n(function(e,t){var n=dl(t),r=n.red,i=n.green,o=n.blue,a=n.alpha,s=e/vl(r*r+1.5*i*i+o*o);return pl(s)?f(fl,e/vl(3),e/vl(3),e/vl(3),a):f(fl,r*s,i*s,o*s,a)}),1,h(Ki,0,.5,1)),bl=function(e){return l(Ji,"width",e)},wl=function(e){return ht(wt(e))},yl=n(function(e,t){var n=B(W([$i("lazyload"),l(ro,"data-src",t.src),cs(t.spinnerSrc),as(t.description)]),e);return h(wl,"div",z,W([D(t.src,l(os,n,z))]))}),xl=function(e){var t=e.canvas;if("Nothing"===t.$)return zi;var n=t.a,r=eo(n.width/n.height*60),i=l(hl,Qc(60),n),o=e.selected?W([l(Ji,"box-shadow",l(Cr," ",W(["0","0",lo(3),lo(2),no(l(gl,.7,ml))])))]):z,a=l(yo,z,l(wo,l(fo,bo,So),e.onPress)),s=l(yl,W([ss(60)]),{description:l(yo,"",n.label),spinnerSrc:"spinner_40x60.gif",src:i});return l(Mi,B(W([bl(lo(r)),qc(lo(60)),l(Ji,"cursor","pointer")]),B(o,a)),l(io,z,s))},Tl=_r,Sl=function(e){var t=e.canvas;if("Nothing"===t.$)return zi;t.a;return e.includeLabel?h(Zi,5,B(W([l(Ji,"flex-shrink",Tl(1)),l(Ji,"align-items","center")]),e.attributes),W([xl(e),function(e){return l(Mi,B(Xi,W([l(Ji,"white-space","nowrap")])),Bi(l(yo,"",l(yc,function(e){return e.label},e.canvas))))}(e)])):l(Mi,e.attributes,xl(e))},El={attributes:z,canvas:sr,includeLabel:!1,onPress:sr,selected:!1},_l=n(function(e,t){return I(t,{onPress:ar(e)})}),Cl=l(os,W([cs("spinner_40x60.gif"),as("Loading")]),z),Pl=r(function(e,t,n){for(;;){if(e<=0)return n;if(!t.b)return n;var r=t.a;e=e-1,t=t.b,n=l(En,r,n)}}),Rl=n(function(e,t){return Zn(h(Pl,e,t,z))}),kl=r(function(e,t,n){if(t<=0)return z;var r=D(t,n);e:for(;;){t:for(;;){if(!r.b.b)return n;if(!r.b.b.b){if(1===r.a)break e;break t}switch(r.a){case 1:break e;case 2:var i=r.b;return W([a=i.a,f=i.b.a]);case 3:if(r.b.b.b.b){var o=r.b,a=o.a,s=o.b;return W([a,f=s.a,g=s.b.a])}break t;default:if(r.b.b.b.b&&r.b.b.b.b.b){var u=r.b,a=u.a,c=u.b,f=c.a,d=c.b,g=d.a,p=d.b,v=p.a,m=p.b;return l(En,a,l(En,f,l(En,g,l(En,v,e>1e3?l(Rl,t-4,m):h(kl,e+1,t-4,m)))))}break t}}return n}return W([a=r.b.a])}),Ol=n(function(e,t){return h(kl,0,e,t)}),$l=function(e){return l(Ji,"border-radius",e)},Ml=function(e){var t=e.linkStyle?W([$i("textHover"),$i("text"+e.baseColor)]):W([uo(no(h(Ki,1,1,1))),$i("bgHover"),$i("bg"+e.baseColor)]),n=l(yo,z,l(wo,l(fo,bo,So),e.onPress));return l(io,B(Xi,B(t,B(W([fs(lo(e.padding)),$l(lo(e.round)),l(Ji,"cursor","pointer"),l(Ji,"justify-content","center"),l(Ji,"align-items","center")]),B(n,e.attributes)))),e.content)},Dl=n(function(e,t){return I(t,{baseColor:e})}),Hl=n(function(e,t){return I(t,{content:e})}),Ll=n(function(e,t){return I(t,{onPress:ar(e)})}),Il={attributes:z,baseColor:"Primary",content:zi,linkStyle:!1,onPress:sr,padding:10,round:10},Al=n(function(e,t){return I(t,{padding:e})}),Bl=n(function(e,t){return I(t,{round:e})}),zl=l(Bl,0,l(Al,0,function(e){return I(e,{linkStyle:!0})}(l(Dl,"Link",Il)))),Nl={$:"Collapse"},Fl={$:"Open"},Wl=h(Ki,.4,.4,.4),jl=r(function(e,t,n){return 1===e?_r(e)+" "+t:_r(e)+" "+n}),Vl=function(e){var t=e.manifest;if("Nothing"===t.$)return zi;var n=t.a,r=l(yo,z,l(wo,function(e){return e.canvases},mo(n.sequences))),i=function(e){switch(e.state.$){case"OpenPreStart":case"OpenStart":case"Opening":case"Visible":return D(Nl,e.config.hideLabel);case"CollapseStart":case"Collapsing":default:return D(Fl,e.config.showLabel)}}(e.collapsible),o=i.a,a=i.b,s=Ml(l(Ll,Qo(o),l(Hl,l(zo,Qo,a),l(Dl,"Dim",zl))));return h(ho,5,W([Di,uo(no(Wl))]),W([l(Mi,W([Di,l(Ji,"flex-shrink","1")]),s),l(Mi,z,Bi(h(jl,wr(r),"image -","images -"))),l(Mi,z,ls(n.id))]))},Ul={attributes:z,logoHeight:24,manifest:sr},ql=n(function(e,t){return I(t,{manifest:ar(e)})}),Gl=function(e){return f(ul,tl,e,nl,el)},Zl=l(os,W([cs("spinner.gif"),as("Loading")]),z),Jl=n(function(e,t){return I(t,{attributes:B(t.attributes,e)})}),Xl=n(function(e,t){return I(t,{content:ar(e)})}),Yl={attributes:z,content:sr,icon:sr},Kl=n(function(e,t){return I(t,{icon:e})}),Ql=function(e){return h(ho,5,e.attributes,l(wc,mn,W([e.icon,l(wo,Mi(W([l(Ji,"flex-shrink","1")])),e.content)])))},eh=lt("p"),th=function(e){var t=e.manifest;if("Nothing"===t.$)return zi;var n=t.a,r=l(yo,zi,l(wo,l(fo,l(fo,eh(W([Di,l(Ji,"flex-shrink","1")])),bo),Bi),n.label)),i=si(n)?Zl:zi,o=l(wo,Gl(Qc(e.logoHeight)),n.logo),a=l(wo,function(t){return l(os,W([ss(e.logoHeight),cs(t),as("logo")]),z)},o);return Ql(l(Xl,h(ho,5,W([Di]),W([r,i])),l(Kl,a,l(Jl,B(Xi,B(W([l(Ji,"min-height",lo(e.logoHeight))]),e.attributes)),Yl))))},nh=ml,rh=r(function(e,t,n){return h(wl,"div",B(W([$i("el")]),t),W([D(e,n)]))}),ih=n(function(e,t){return I(t,{sections:B(t.sections,W([function(e){return{$:"DirectContent",a:e}}(e)]))})}),oh=n(function(e,t){return I(t,{sections:B(t.sections,W([Ec(e)]))})}),ah=n(function(e,t){return I(t,{attributes:B(t.attributes,e)})}),sh=n(function(e,t){return I(t,{footer:ar(e)})}),uh=n(function(e,t){return I(t,{header:ar(e)})}),ch=function(e){return l(Ji,"border-width",e)},lh=i(function(e,t,n,r){return l(Ji,"border-radius",l(Cr," ",W([e,t,n,r])))}),hh=function(e){var t=function(){var t=e.endBackgroundColor;return"Just"===t.$?"bg"+t.a+" bgDesatHigh":"bg"+e.baseColor+" bgDesatHigh"}();return W([Di,f(co,lo(10),lo(15),lo(10),lo(15)),$i(t+" text"+e.baseColor+" textDarken border"+e.baseColor+"borderDarken")])},fh=function(e){return h(Zi,0,B(Xi,B(W([$l(lo(e.round)),$i("border"+e.baseColor+" borderDarken"),ch(lo(1)),ao("solid")]),e.attributes)),B(W([function(e){var t=W([f(so,lo(0),lo(0),lo(1),lo(0)),f(lh,lo(e.round),lo(e.round),lo(0),lo(0)),ao("solid"),l(Ji,"overflow","hidden")]),n=e.header;if("Nothing"===n.$)return zi;var r=n.a;return l(Mi,B(hh(e),t),r)}(e)]),B(l(Sr,Rc(e),e.sections),W([function(e){var t=W([f(so,lo(1),lo(0),lo(0),lo(0)),f(lh,lo(0),lo(0),lo(e.round),lo(e.round)),ao("solid"),l(Ji,"overflow","hidden")]),n=e.footer;if("Nothing"===n.$)return zi;var r=n.a;return l(Mi,B(hh(e),t),r)}(e)]))))},dh=function(e){var t=e.manifest;if("Nothing"===t.$)return zi;var n=t.a,r=si(n)?W([$i("lazyload manifest_lazyload"),l(ro,"data-manifest-uri",n.id)]):z;return h(rh,n.id,W([Di]),fh(l(sh,Vl(e),l(ih,l(zo,Qo,Zc(e.collapsible)),l(oh,function(e){var t=e.manifest;if("Nothing"===t.$)return zi;var n=t.a,r=l(Ol,10,l(yo,z,l(wo,function(e){return e.canvases},mo(n.sequences))));return si(n)?h(ho,5,z,W([Cl])):h(ho,5,W([l(Ji,"overflow","hidden"),Di]),l(xi,function(e){return Sl(l(_l,function(e){return{$:"CanvasClicked",a:e}}(e.id),l(Kc,e,El)))},r))}(e),l(uh,l(io,W([uo(no(nh)),l(Ji,"cursor","pointer"),So(Yc)]),function(e){return th(l(ql,e,Ul))}(n)),l(ah,B(r,W([Di])),Pc)))))))},gh={emptyModel:Ko,init:function(e){return H(Ko,Lr,z)},subscriptions:function(e){return l(Bo,Qo,Ka(e.collapsible))},update:Xc,view:function(e){return l(Ro,dh,e)}},ph=n(function(e,t){return{$:"CanvasSelected",a:e,b:t}}),vh=n(function(e,t){return{$:"ManifestPanelMsg",a:e,b:t}}),mh=function(e){return{$:"ManifestSelected",a:e}},bh=n(function(e,t){for(;;){if(e<=0)return t;if(!t.b)return t;t.a;e=e-1,t=t.b}}),wh=n(function(e,t){return e<0?sr:mo(l(bh,e,t))}),yh=r(function(e,t,n){if(e<0)return n;var r=l(bh,e,n),i=l(Ol,e,n);if(r.b){var o=r.a,a=r.b;return B(i,l(En,t(o),a))}return n}),xh=n(function(e,t){return l(yh,e,_s(t))}),Th=function(e){return No({component:gh,outEvaluator:n(function(t,n){var r=D(t,l(wh,e,n.manifests));if("Nothing"===r.b.$){r.b;return H(n,Lr,z)}if("ManifestSelected"===r.a.$){r.a;var i=r.b.a;return H(n,Lr,W([mh(i.id)]))}var o=r.a.a;i=r.b.a;return H(n,Lr,W([l(ph,i.id,o)]))}),unwrapModel:function(t){var n=l(wh,e,t.panelModels);return"Just"===n.$?n.a:l(Fc,"Panel model not found",Ko)},wrapModel:n(function(t,n){return I(t,{panelModels:h(xh,e,n,t.panelModels)})}),wrapMsg:vh(e)})},Sh=n(function(e,t){return I(t,{config:I(t.config,{id:ar(e)})})}),Eh=n(function(e,t){return I(t,{collapsible:l(Sh,e,t.collapsible)})}),_h=n(function(e,t){return kc(I(t,{manifest:ar(e)}))}),Ch=i(function(e,t,n,r){return{index:t,match:e,number:n,submatches:r}}),Ph=ln,Rh=function(e){return l(Ph,{caseInsensitive:!1,multiline:!1},e)},kh=/.^/,Oh=fn(1/0),$h=function(e){return I(e,{panelModels:l(xi,function(e){var t=l(yo,kh,Rh("\\W+")),n=h(Oh,t,function(e){return"_"},e.id);return l(_h,e,l(Eh,n,Ko))},e.manifests)})},Mh=n(function(e,t){var n=l(wo,function(e){return e.manifests},t.collection),r=l(wo,function(e){return xi(ts(e))}(e),n);return I(t,{manifests:l(yo,z,r)})}),Dh=function(e){return H(e,Lr,z)},Hh=n(function(e,t){if("CollectionLoaded"===e.$){var n=e.a,r=e.b;if(R(l(wo,function(e){return e.id},t.collection),ar(r))){var i=l(ai,n,r);return Dh($h(l(Mh,n,I(t,{collection:ar(i)}))))}return H(t,Lr,z)}return H(t,Lr,z)}),Lh=n(function(e,t){var r=n(function(t,n){var r=n.a,i=n.b;return D(r+1,l(Ho,Th(r).updater(e),i))});return h(Gn,r,D(0,H(t,Lr,z)),t.manifests).b}),Ih=n(function(e,t){switch(e.$){case"AddManifest":var n=e.a,r="Nothing"===t.collection.$?I(t,{manifests:B(t.manifests,W([n]))}):I(t,{collection:sr,manifests:W([n])});return Dh($h(r));case"ClearManifests":return"Nothing"===t.collection.$?Dh($h(I(t,{manifests:z}))):Dh(t);case"SetManifests":var i=e.a;return Dh($h(I(t,{collection:sr,manifests:i})));case"ClearCollection":return"Nothing"===t.collection.$?Dh(t):Dh($h(I(t,{collection:sr,manifests:z})));case"SetCollection":var o=e.a,a=e.b;return Dh($h(l(Mh,o,I(t,{collection:ar(a)}))));case"IiifNotification":var s=e.a;return l(Ho,Lh(function(e){return{$:"IiifNotification",a:e}}(s)),l(Hh,s,t));case"ManifestClicked":var u=e.a;return H(t,Lr,W([mh(u)]));case"CanvasClicked":u=e.a;var c=e.b;return H(t,Lr,W([l(ph,u,c)]));default:var h=e.a,f=e.b,d=l(wh,h,t.panelModels);if("Just"===d.$){d.a;return l(Th(h).updater,f,t)}return H(t,Lr,z)}}),Ah=function(e){return h(Zi,15,W([Di,Gc]),l(Sr,n(function(t,n){return Th(t).view(e)}),e.manifests))},Bh=No({component:{emptyModel:jo,init:function(e){return H(jo,Lr,z)},subscriptions:function(e){return ko(l(Sr,n(function(t,n){return Th(t).subscriptions(e)}),e.panelModels))},update:Ih,view:function(e){return l(Ro,Ah,e)}},outEvaluator:n(function(e,t){switch(e.$){case"LoadManifest":var n=e.a;return H(t,Lr,W([function(e){return{$:"LoadManifest",a:e}}(n)]));case"LoadCollection":n=e.a;return H(t,Lr,W([qo(n)]));case"ManifestSelected":n=e.a;return H(t,Lr,W([function(e){return{$:"ManifestSelected",a:e}}(n)]));default:var r=e.a,i=e.b;return H(t,Lr,W([l(Uo,r,i)]))}}),unwrapModel:function(e){return e.manifestListModel},wrapModel:n(function(e,t){return Fo(t.errors)?I(e,{manifestListModel:t}):I(e,{errors:B(e.errors,t.errors),manifestListModel:I(t,{errors:z})})}),wrapMsg:function(e){return{$:"ManifestListMsg",a:e}}}),zh={$:"ClearCollection"},Nh=n(function(e,t){return{$:"SetCollection",a:e,b:t}}),Fh=n(function(e,t){if("CollectionLoaded"===e.$){var n=e.a,r=e.b;if(R(l(wo,function(e){return e.id},t.collection),ar(r))){var i=l(ai,n,r);return Dh(I(t,{collection:ar(i)}))}return H(t,Lr,z)}return H(t,Lr,z)}),Wh=function(e){var t=e.collection;if("Just"===t.$){var n=t.a;return si(n)?H(e,Lr,W([qo(n.id)])):H(e,Lr,z)}return H(e,Lr,z)},jh={$:"ClearCollection"},Vh=function(e){return{$:"IiifNotification",a:e}},Uh=n(function(e,t){return{$:"SetCollection",a:e,b:t}}),qh=n(function(e,t){e:for(;;)switch(e.$){case"ManifestListMsg":var n=e.a;return l(Bh.updater,n,t);case"ClearCollection":return l(Bh.updater,jh,I(t,{collection:sr}));case"SetCollection":var r=e.a,i=e.b;return l(Ho,Bh.updater(l(Uh,r,i)),Wh(I(t,{collection:ar(i)})));case"SetCollectionMaybe":r=e.a;var o=e.b;if("Just"===o.$){i=o.a;e=l(Nh,r,i),t=t;continue e}e=zh,t=t;continue e;default:var a=e.a;return l(Ho,Bh.updater(Vh(a)),l(Ho,Fh(a),H(t,Lr,z)))}}),Gh=Si("Unnamed collection"),Zh=function(e){var t=e.collection;if("Just"===t.$){var n=t.a,r=si(n)?Zl:zi,i=function(){var e=n.logo;if("Just"===e.$){var t=e.a;return l(os,W([ss(60),cs(l(Gl,Qc(60),t)),as("logo")]),z)}return zi}();return h(Zi,0,W([Gc,Di]),W([h(ho,5,B(Xi,W([Di,l(Ji,"font-size","24px")])),W([i,Bi(Gh(n)),r])),h(ho,5,W([Di,l(Ji,"justify-content","flex-end")]),W([l(Mi,Xi,Bi(h(jl,wr(n.manifests),"manifest - ","manifests - "))),l(Mi,z,ls(n.id))])),l(Mi,W([l(Ji,"padding-top",lo(10)),l(Ji,"padding-bottom",lo(15)),Gc,Di]),Bh.view(e))]))}return h(Zi,0,W([Gc,Di]),z)},Jh={emptyModel:Vo,init:function(e){return l(Ho,Bh.init(e),H(Vo,Lr,z))},subscriptions:function(e){return Bh.subscriptions(e)},update:qh,view:function(e){return l(Ro,Zh,e)}},Xh=n(function(e,t){return{$:"CanvasSelected",a:e,b:t}}),Yh=No({component:Jh,outEvaluator:n(function(e,t){switch(e.$){case"LoadManifest":var n=e.a;return H(t,Lr,W([Do(n)]));case"LoadCollection":n=e.a;return H(t,Lr,W([Mo(n)]));case"ManifestSelected":n=e.a;return H(t,Lr,W([function(e){return{$:"ManifestSelected",a:e}}(n)]));default:var r=e.a,i=e.b;return H(t,Lr,W([l(Xh,r,i)]))}}),unwrapModel:function(e){return e.collectionViewModel},wrapModel:n(function(e,t){return Fo(t.errors)?I(e,{collectionViewModel:t}):I(e,{collectionViewModel:I(t,{errors:z}),errors:B(e.errors,t.errors)})}),wrapMsg:function(e){return{$:"CollectionViewMsg",a:e}}}),Kh={$:"Browser"},Qh={containerId:sr,manifest:sr,selectedCanvas:sr,sequence:sr},ef={$:"TabInfo"},tf={canvas:sr,manifest:sr},nf={canvas:sr,manifest:sr,open:!1,structuresViewModel:tf,tabState:ef},rf={annotation:sr,canvas:sr,canvasListModel:Qh,manifest:sr,menuModel:nf,osdElemId:"manifest_view_osd"},of={deflate:function(e){return""},inflate:function(e){return""}},af=n(function(e,t){return{collectionTreeModel:On,collectionViewModel:Vo,errors:z,iiif:vn,key:t,manifestViewModel:rf,screen:Kh,uriMapper:of,url:e}}),sf=n(function(e,t){return{$:"CanvasOpened",a:e,b:t}}),uf={$:"CloseViewer"},cf=function(e){return{$:"ManifestViewMsg",a:e}},lf=n(function(e,t){return I(t,{containerId:ar(e)})}),hf=function(e){return{$:"IiifNotification",a:e}},ff=n(function(e,t){return{$:"ScrollToView",a:e,b:t}}),df=function(e){return{$:"SelectCanvas",a:e}},gf=function(e){return{$:"SetManifest",a:e}},pf=n(function(e,t){return l(yo,"",e.containerId)+"_canvas_button_"+function(e){var t=l(yo,kh,Rh("[^a-z0-9]+"));return h(Oh,t,function(e){return"_"},e)}(t)}),vf=et("outPortScrollToView",mn),mf=Se,bf=function(e){return Se(h(Gn,n(function(e,t){var n=e.a,r=e.b;return h(_e,n,r,t)}),{},e))},wf=r(function(e,t,n){var r=l(Fc,"scrollToView",n.containerId);if("Nothing"===r.$)return H(n,Lr,z);var i=r.a,o=l(pf,n,e);return H(n,vf(bf(W([D("container",ki("#"+i)),D("item",ki("#"+o)),D("axis",ki("x")),D("animate",mf(t))]))),z)}),yf=n(function(e,t){switch(e.$){case"SetManifest":return H(I(t,{manifest:e.a,selectedCanvas:sr}),Lr,z);case"SelectCanvas":return H(I(t,{selectedCanvas:n=e.a}),Lr,z);case"CanvasClicked":var n=e.a;return H(I(t,{selectedCanvas:ar(n)}),Lr,W([function(e){return{$:"CanvasOpened",a:e}}(n)]));case"IiifNotification":var r=e.a;if("ManifestLoaded"===r.$){var i=r.a,o=r.b;return R(ar(o),l(wo,function(e){return e.id},t.manifest))?H(I(t,{manifest:ar(l(ts,i,o))}),Lr,z):H(t,Lr,z)}return H(t,Lr,z);default:n=e.a;var a=e.b;return h(wf,n,a,t)}}),xf=n(function(e,t){return I(t,{attributes:e})}),Tf=n(function(e,t){return I(t,{selected:e})}),Sf=Oi("id"),Ef=function(e){var t=function(){var t=e.containerId;if("Just"===t.$){var n=t.a;return W([Sf(n)])}return z}(),n=e.manifest;if("Just"===n.$){var r=n.a,i=mo(r.sequences),o=l(wo,function(e){return e.canvases},i),a=l(yo,z,o);return si(r)?h(ho,10,W([fs(lo(10)),Di,l(Ji,"overflow-x","scroll")]),W([Cl])):h(ho,10,B(W([fs(lo(10)),Di,l(Ji,"overflow-x","scroll")]),t),l(xi,function(t){return Sl(l(Tf,R(ar(t.id),e.selectedCanvas),l(xf,W([Sf(l(pf,e,t.id))]),l(_l,function(e){return{$:"CanvasClicked",a:e}}(t.id),function(e){return I(e,{includeLabel:!0})}(l(Kc,t,El))))))},a))}return h(ho,10,B(W([fs(lo(10)),Di,l(Ji,"overflow-x","scroll")]),t),z)},_f={emptyModel:Qh,init:function(e){return H(Qh,Lr,z)},subscriptions:function(e){return Oo},update:yf,view:function(e){return l(Ro,Ef,e)}},Cf=n(function(e,t){return mo(l(wc,mn,l(xi,l(fo,function(e){for(;;){if(!e.b)return sr;var n=e.a,r=e.b;if(R(n.id,t))return ar(n);e=r}},function(e){return e.canvases}),e.sequences)))}),Pf=function(e){return{annotations:z,id:e,label:sr,status:ii}},Rf=n(function(e,t){return h(ri,t,r(function(e,t,n){return Pf(e)}),e.annotationLists)}),kf=n(function(e,t){return l(xi,Rf(e),t)}),Of=function(e){return l(xi,function(e){return e.id},l(ws,function(e){return R(e.contentType,ar("sc:AnnotationList"))},e.otherContent))},$f=r(function(e,t,n){return l(ol,function(e){return R(e.id,ar(n))},po(l(xi,function(e){return e.annotations},l(kf,e,Of(t)))))}),Mf=n(function(e,t){return function(e){for(;;){if(!e.b)return sr;var n=e.a,r=e.b;if(R(n.id,t))return ar(n);e=r}}(e.structures)}),Df={$:"ResetMenu"},Hf=function(e){return{$:"SetCanvas",a:e}},Lf=function(e){return{$:"SetManifest",a:e}},If=function(e){return{$:"SetMenuOpen",a:e}},Af=n(function(e,t){switch(e.$){case"SetManifest":var n=e.a;return H(I(t,{canvas:sr,manifest:n}),Lr,z);case"SetCanvas":return H(I(t,{canvas:e.a}),Lr,z);case"RangeClicked":var r=e.a;return H(t,Lr,W([function(e){return{$:"RangeSelected",a:e}}(r)]));default:var i=e.a;if("ManifestLoaded"===i.$){var o=i.a,a=i.b;return R(ar(a),l(wo,function(e){return e.id},t.manifest))?H(I(t,{manifest:ar(l(ts,o,a))}),Lr,z):H(t,Lr,z)}return H(t,Lr,z)}}),Bf=n(function(e,t){return l(wc,mn,l(xi,Mf(e),t))}),zf=function(e){return{$:"RangeClicked",a:e}},Nf=function(e){var t=e.manifest;if("Nothing"===t.$)return zi;var n=t.a;return _o(l(ji,l(fo,l(fo,ar,zf),function(e){return e.id}),l(Gi,l(fo,ys(function(t){return R(e.canvas,ar(t))}),function(e){return e.canvases}),l(Ai,l(fo,Bf(n),function(e){return e.ranges}),l(Wi,l(fo,l(fo,Bi,yo("unnamed")),function(e){return e.label}),l(qi,function(e){if(wr(e.structures)){var t=l(ws,function(e){return R(e.viewingHint,ar("top"))},e.structures);return wr(t)>0?t:e.structures}return z}(n),l(Ii,W([Di]),Ni)))))))},Ff=No({component:{emptyModel:tf,init:function(e){return H(tf,Lr,z)},subscriptions:function(e){return Oo},update:Af,view:function(e){return l(Ro,Nf,e)}},outEvaluator:n(function(e,t){var n=e.a;return H(t,Lr,W([function(e){return{$:"RangeSelected",a:e}}(n)]))}),unwrapModel:function(e){return e.structuresViewModel},wrapModel:n(function(e,t){return I(e,{structuresViewModel:t})}),wrapMsg:function(e){return{$:"StructuresViewMsg",a:e}}}),Wf=n(function(e,t){switch(e.$){case"ResetMenu":return H(I(t,{open:!1,tabState:ef}),Lr,z);case"SetManifest":var n=e.a;return l(Ho,Ff.updater(function(e){return{$:"SetManifest",a:e}}(n)),H(I(t,{canvas:sr,manifest:n}),Lr,z));case"SetCanvas":var r=e.a;return l(Ho,Ff.updater(function(e){return{$:"SetCanvas",a:e}}(r)),H(I(t,{canvas:r}),Lr,z));case"SetMenuOpen":return H(I(t,{open:e.a}),Lr,z);case"SelectTab":return H(I(t,{tabState:e.a}),Lr,z);case"StructuresViewMsg":var i=e.a;return l(Ff.updater,i,t);default:var o=e.a;if("ManifestLoaded"===o.$){var a=o.a,s=o.b;return R(ar(s),l(wo,function(e){return e.id},t.manifest))?H(I(t,{manifest:ar(l(ts,a,s))}),Lr,z):H(t,Lr,z)}return H(t,Lr,z)}}),jf=function(e){return{$:"SelectTab",a:e}},Vf={$:"TabStructures"},Uf=h(Ki,1,1,1),qf=function(e){return l(Ji,"background-color",e)},Gf=n(function(e,t){return I(t,{tabs:e})}),Zf={attributes:z,baseColor:"Link",onPress:sr,paddingH:15,paddingV:10,selected:sr,tabs:z},Jf=n(function(e,t){return I(t,{onPress:ar(e)})}),Xf=n(function(e,t){return I(t,{selected:ar(e)})}),Yf=r(function(e,t,n){var r=W([$i("spacing"+_r(e))]);return l(Ri,B(W([$i("row"),$i("wrap")]),B(r,t)),n)}),Kf=function(e){var t=l(Mi,W([Di,l(Ji,"align-self","flex-end"),f(so,lo(0),lo(0),lo(1),lo(0)),ao("solid"),oo(no(Qi))]),zi);return h(Yf,0,W([Di]),B(l(xi,function(t){var n=t.a,r=t.b,i=function(){var t=function(t){var n=e.onPress;if("Just"===n.$){var r=n.a;return ar(r(t))}return sr}(n);if("Just"===t.$){var r=t.a;return W([So(r)])}return z}();return R(e.selected,ar(n))?l(io,B(Xi,B(W([f(co,lo(e.paddingV),lo(e.paddingH),lo(e.paddingV+1),lo(e.paddingH)),$i("text"+e.baseColor+" textDarken"),f(so,lo(1),lo(1),lo(0),lo(1)),ao("solid"),f(lh,lo(5),lo(5),lo(0),lo(0)),oo(no(Qi))]),i)),r):l(io,B(Xi,B(W([f(co,lo(e.paddingV+1),lo(e.paddingH+1),lo(e.paddingV),lo(e.paddingH+1)),$i("text"+e.baseColor+" textHover bg"+e.baseColor+" bgHoverOnly bgAlphaHigh"),f(so,lo(0),lo(0),lo(1),lo(0)),ao("solid"),f(lh,lo(5),lo(5),lo(0),lo(0)),oo(no(Qi)),l(Ji,"cursor","pointer")]),i)),r)},e.tabs),W([t])))},Qf=function(e){e.open;var t=e.manifest,n=function(){switch(e.tabState.$){case"TabInfo":if("Just"===t.$){var n=t.a;return l(Mi,W([fs(lo(5)),Di,Gc]),Tc(function(e){return I(e,{includeIiifLink:!0})}(l(rs,n,ns))))}return zi;case"TabStructures":return Ff.view(e);default:return Bi("Layers tab")}}();return h(Zi,0,W([Di,Gc,qf(no(Uf))]),W([Kf(l(Jf,jf,l(Xf,e.tabState,l(Gf,W([D(ef,Bi("Info")),D(Vf,Bi("Structures"))]),Zf)))),l(Mi,W([Di,Gc,l(Ji,"overflow-y","scroll"),l(Ji,"overflow-x","hidden"),l(Ji,"flex-shrink","1"),l(Ji,"word-break","break-word"),l(Ji,"border-left","1px solid "+no(Qi)),l(Ji,"border-bottom","1px solid "+no(Qi))]),n)]))},ed=function(e){return e.open?Qf(e):zi},td={emptyModel:nf,init:function(e){return l(Ho,Ff.init(e),H(nf,Lr,z))},subscriptions:function(e){return Oo},update:Wf,view:function(e){return l(Ro,ed,e)}},nd=function(e){return{$:"CanvasListMsg",a:e}},rd={$:"CloseViewer"},id=function(e){return{$:"LoadManifest",a:e}},od=function(e){return{$:"ManifestMenuMsg",a:e}},ad=function(e){return{$:"RequestIiif",a:e}},sd=function(e){return{$:"SetCanvas",a:e}},ud=function(e){return{$:"SetManifest",a:e}},cd=n(function(e,t){return{$:"SetManifestAndCanvas",a:e,b:t}}),ld=function(e){return{$:"SetOverlayInOsd",a:e}},hd=function(e){return{$:"LoadAnnotationList",a:e}},fd=function(e){var t=D(e.manifest,e.canvas);if("Just"===t.a.$&&"Just"===t.b.$){var n=t.a.a,r=t.b.a,i=l(xi,hd,l(yo,z,l(wo,Of,l(Cf,n,r))));return H(e,Lr,i)}return H(e,Lr,z)},dd=function(e){var t=e.resource.service;return"Just"===t.$?t.a.id+"/info.json":l(yo,"",e.resource.id)},gd=function(e){return l(wo,dd,mo(e.images))},pd=n(function(e,t){return{$:"CanvasOpened",a:e,b:t}}),vd=et("outPortOsdCmd",mn),md=function(e){var t=l(yo,sr,h(xc,Cf,e.manifest,e.canvas)),n=l(yc,gd,t),r=H(l(wo,function(t){return vd(bf(W([D("type",ki("setSource")),D("for",ki(e.osdElemId)),D("value",ki(t))])))},n),l(wo,function(e){return e.id},e.manifest),e.canvas);if("Just"===r.a.$&&"Just"===r.b.$&&"Just"===r.c.$){var i=r.a.a,o=r.b.a,a=r.c.a;return H(e,i,W([l(pd,o,a)]))}return H(e,Lr,z)},bd=i(function(e,t,n,r){return l(En,D(e,n(t)),r)}),wd=n(function(e,t){return Se(h(Gn,function(e){return n(function(t,n){return n.push(Ee(e(t))),n})}(e),[],t))}),yd=function(e){switch(e.$){case"ChoiceSelector":var t=e.a;return bf(f(bd,"item",t.items,wd(yd),f(bd,"default",t._default,yd,f(bd,"@type","oa:Choice",ki,z))));case"FragmentSelector":t=e.a;return bf(f(bd,"value",t.value,ki,f(bd,"@type","oa:FragmentSelector",ki,z)));default:t=e.a;return bf(f(bd,"value",t.value,ki,f(bd,"@type","oa:SvgSelector",ki,z)))}},xd=i(function(e,t,n,r){if("Just"===t.$){var i=t.a;return f(bd,e,i,n,r)}return r}),Td=function(e){return bf(f(xd,"selector",e.selector,yd,f(bd,"full",e.full,ki,z)))},Sd=function(e){return Fo(e)?sr:ar(e)},Ed=Se,_d=function(e){var t=e.a,n=e.b;return bf(f(bd,"height",n,Ed,f(bd,"width",t,Ed,z)))},Cd=function(e){return bf(f(xd,"sizes",Sd(e.sizes),wd(_d),f(xd,"height",e.height,Ed,f(xd,"width",e.width,Ed,f(xd,"profile",Sd(e.profile),wd(ki),f(bd,"@id",e.id,ki,z))))))},Pd=function(e){return bf(f(xd,"label",e.label,ki,f(xd,"chars",e.chars,ki,f(xd,"service",e.service,Cd,f(xd,"height",e.height,Ed,f(xd,"width",e.width,Ed,f(xd,"@type",e.resourceType,ki,f(xd,"@id",e.id,ki,z))))))))},Rd=function(e){return bf(f(xd,"on",e.on,Td,f(bd,"resource",e.resource,Pd,f(xd,"motivation",e.motivation,ki,f(xd,"@id",e.id,ki,z)))))},kd=function(e){return bf(f(xd,"label",e.label,ki,f(xd,"@type",e.contentType,ki,f(bd,"@id",e.id,ki,z))))},Od=et("outPortSetAnnotationsCmd",mn),$d=Ce,Md=n(function(e,t){var r=l(yo,sr,h(xc,Cf,t.manifest,t.canvas)),i=l(ws,function(e){return!R(sr,l(wo,function(e){return e.selector},e.on))},l(vo,function(e){return e.annotations},l(ws,l(fo,qs,si),l(yo,z,l(wo,kf(e),l(wo,Of,r)))))),o=n(function(e,t){var n=l(wd,Rd,i);if("Just"===e.$){var r=e.a;return bf(W([D("canvas",function(e){return bf(f(xd,"otherContent",Sd(e.otherContent),wd(kd),f(xd,"thumbnail",e.thumbnail,Pd,f(xd,"images",Sd(e.images),wd(Rd),f(bd,"height",e.height,Ed,f(bd,"width",e.width,Ed,f(xd,"label",e.label,ki,f(bd,"@id",e.id,ki,z))))))))}(r)),D("annotations",n)]))}return bf(W([D("canvas",$d),D("annotations",n)]))});return H(t,Od(l(o,r,i)),z)}),Dd=r(function(e,t,n){return e?l(Ho,t,n):n}),Hd=r(function(e,t,n){return l(e,n,t)}),Ld=n(function(e,t){var n=t.manifest;if("Just"!==n.$)return H(t,Lr,z);var r=n.a;switch(e.$){case"ManifestLoaded":var i=e.a,o=e.b;if(R(o,r.id)){var a=l(ts,i,o),s=t.canvas;if("Nothing"===s.$)return l(Ad,ud(ar(a)),t);var u=s.a;return l(Ad,l(cd,ar(a),ar(u)),t)}return H(t,Lr,z);case"AnnotationListLoaded":i=e.a,e.b;return l(Ho,Md(i),H(t,Lr,z));default:return H(t,Lr,z)}}),Id=n(function(e,t){var n=t.canvas;if("Nothing"===n.$)return H(t,Lr,z);var r=n.a;return l(Bd().updater,l(ff,r,e),t)}),Ad=n(function(e,t){e:for(;;)switch(e.$){case"SetManifest":var n=e.a,r=l(wo,function(e){return e.id},l(yc,mo,l(wo,function(e){return e.canvases},l(yc,mo,l(wo,function(e){return e.sequences},n)))));e=l(cd,n,r),t=t;continue e;case"SetCanvas":var i=e.a;e=l(cd,t.manifest,i),t=t;continue e;case"SetManifestAndCanvas":n=e.a,i=e.b;var o=l(yo,!1,l(wo,si,n)),a=l(wo,function(e){return e.id},n),s=!R(l(wo,function(e){return e.id},t.manifest),a),u=o?W([id(l(yo,"",l(wo,function(e){return e.id},n)))]):z;return l(Ho,Id(!s),l(Ho,fd,l(Dn,W([ad(ld)]),l(Ho,md,l(Ho,zd().updater(If(t.menuModel.open&&!s)),l(Ho,zd().updater(Hf(i)),l(Ho,zd().updater(Lf(n)),h(Dd,s,zd().updater(Df),l(Ho,Bd().updater(df(i)),l(Ho,Bd().updater(gf(n)),H(I(t,{canvas:i,manifest:n}),Lr,u)))))))))));case"CanvasListMsg":var c=e.a;return l(Bd().updater,c,t);case"ManifestMenuMsg":var f=e.a;return l(zd().updater,f,t);case"IiifNotification":var d=e.a;return l(Ho,Bd().updater(hf(d)),l(Ho,Ld(d),H(t,Lr,z)));case"CloseClicked":return H(t,Lr,W([rd]));case"SetMenuOpen":var g=e.a;return H(I(t,{menuModel:I(t.menuModel,{open:g})}),Lr,z);case"ShowAnnotationPort":var p=e.a,v=e.b,m=l(yo,sr,h(xc,Cf,t.manifest,t.canvas));return H(I(t,{annotation:l(yo,sr,h(xc,$f(p),m,v))}),Lr,z);default:p=e.a;return l(Md,p,t)}});function Bd(){return No({component:_f,outEvaluator:n(function(e,t){var n=e.a,r=t.manifest;if("Nothing"===r.$)return H(t,Lr,z);r.a;return l(Ad,sd(ar(n)),t)}),unwrapModel:function(e){return e.canvasListModel},wrapModel:n(function(e,t){return I(e,{canvasListModel:t})}),wrapMsg:nd})}function zd(){return No({component:td,outEvaluator:n(function(e,t){var n=e.a,r=l(yc,l(Hd,Mf,n),t.manifest),i=l(yc,mo,l(wo,function(e){return e.canvases},r));if("Just"===i.$){var o=i.a;return l(Ad,sd(ar(o)),t)}return H(t,Lr,z)}),unwrapModel:function(e){return e.menuModel},wrapModel:n(function(e,t){return I(e,{menuModel:t})}),wrapMsg:od})}try{var Nd=Bd();Bd=function(){return Nd};var Fd=zd();zd=function(){return Fd}}catch(e){throw"Some top-level definitions from `ManifestView` are causing infinite recursion:\n\n  \n      canvasList\n       \n      checkIiifNotification\n       \n      manifestMenu\n       \n      scrollCanvasLine\n       \n      update\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var Wd=n(function(e,t){return I(t,{sections:W([Ec(e)])})}),jd=ah(W([l(Ji,"box-shadow","0.0 0.0 3.0px 2.0px "+no(f(fl,0,0,0,.5)))])),Vd=l(n(function(e,t){return I(t,{endBackgroundColor:ar(e)})}),"White",l(_c,"Dim",Cc)),Ud=n(function(e,t){if("Just"===t.$){var n=t.a,r=vc(l(yo,"",n.resource.chars));return fh(l(ah,W([qf(no(Uf))]),jd(l(Wd,l(Ri,W([Di,l(Ji,"overflow-wrap","break-word")]),r),l(ah,e,Vd)))))}return zi}),qd=function(e){return l(Ri,W([Sf(e),$i("osd_container"),l(Ji,"width","100%"),l(Ji,"height","100%"),l(Ji,"position","absolute")]),z)},Gd=n(function(e,t){return I(t,{attributes:e})}),Zd={$:"CloseClicked"},Jd=n(function(e,t){return I(t,{attributes:B(t.attributes,e)})}),Xd=h(Ki,.2,.2,.2),Yd=l(Jd,W([uo(no(Xd))]),l(Dl,"Light",Il)),Kd=n(function(e,t){return I(t,{icon:ar(e)})}),Qd=function(e){return Ql(l(Kd,l(Li,e,z),Yl))},eg=No({component:{emptyModel:rf,init:function(e){return l(Ho,Fd.init(e),l(Hn,function(e){return I(e,{canvasListModel:l(lf,"manifest_view_canvas_list",e.canvasListModel)})},l(Ho,Nd.init(e),H(rf,Lr,z))))},subscriptions:function(e){return Oo},update:Ad,view:function(e){var t=e.menuModel.open?l(Mi,W([l(Ji,"position","absolute"),l(Ji,"top","0"),l(Ji,"bottom","0"),l(Ji,"right","0"),bl(lo(500)),Gc]),Fd.view(e)):l(Ri,W([$i("hide")]),z),n="Just"===e.annotation.$?l(Mi,W([l(Ji,"position","absolute"),l(Ji,"top","0"),l(Ji,"right","0"),l(Ji,"width",lo(500)),fs(lo(15))]),l(Ud,W([Di]),e.annotation)):l(Ri,W([$i("hide")]),z);return h(Zi,0,W([Di,Gc]),W([function(e){var t=e.manifest;if("Just"===t.$){var n=t.a;return h(ho,5,W([Di]),W([Ml(l(Bl,0,l(Jd,W([l(Ji,"width",lo(16))]),l(Ll,Zd,l(Hl,Qd("arrow-left"),Yd))))),h(Zi,0,W([Di,l(Ji,"flex-shrink","1")]),W([th(l(Gd,W([l(Ji,"align-self","center")]),l(ql,n,Ul)))])),Ml(l(Bl,0,l(Jd,W([l(Ji,"width",lo(16))]),l(Ll,function(e){return{$:"SetMenuOpen",a:e}}(!e.menuModel.open),l(Hl,Qd("info"),Yd)))))]))}return zi}(e),h(ho,0,W([Di,Gc,l(Ji,"flex-shrink","1")]),W([l(Mi,W([Di,Gc]),l(Ro,qd,e.osdElemId)),t,n])),Nd.view(e)]))}},outEvaluator:n(function(e,t){switch(e.$){case"LoadManifest":var n=e.a;return H(t,Lr,W([Do(n)]));case"LoadCollection":n=e.a;return H(t,Lr,W([Mo(n)]));case"LoadAnnotationList":n=e.a;return H(t,Lr,W([function(e){return{$:"LoadAnnotationList",a:e}}(n)]));case"CanvasOpened":var r=e.a,i=e.b;return H(t,Lr,W([l(sf,r,i)]));case"CloseViewer":return H(t,Lr,W([uf]));default:var o=e.a;return H(t,Lr,W([function(e){return{$:"RequestIiif",a:e}}(l(fo,cf,o))]))}}),unwrapModel:function(e){return e.manifestViewModel},wrapModel:n(function(e,t){return I(e,{manifestViewModel:t})}),wrapMsg:cf}),tg=function(e){return{$:"IiifNotification",a:e}},ng=function(e){return{$:"IiifNotification",a:e}},rg=n(function(e,t){return{$:"SetCollectionMaybe",a:e,b:t}}),ig=_i(Ln),og=l(In,Ci,ig),ag=he,sg=function(e){return{$:1,a:e}},ug=function(e){return{$:9,c:e}},cg=function(e){return{$:15,g:e}},lg={$:5},hg=r(function(e,t,n){return l(ag,function(r){var i=l(Ir,e,r);if("Ok"===i.$){var o=i.a,a=l(Ir,function(e){return cg(W([e,ug(n)]))}(t),o);if("Ok"===a.$){var s=a.a;return Ci(s)}var u=a.a;return sg(Mr(u))}return Ci(n)},lg)}),fg=i(function(e,t,n,r){return l(ig,h(hg,l(Ar,e,lg),t,n),r)}),dg=r(function(e,t,n){return l(ig,l(Ar,e,t),n)}),gg=function(e){return{$:7,b:e}},pg=function(e){return cg(W([l(Ei,bo,e),gg(e)]))},vg=r(function(e,t,n){return{language:t,value:e,valueType:n}}),mg=function(e){return cg(W([ug(sr),l(Ei,ar,e)]))},bg=function(e){return cg(W([l(Ei,function(e){return h(vg,e,sr,sr)},e),f(fg,"@type",mg(Br),sr,f(fg,"@language",mg(Br),sr,h(dg,"@value",e,Ci(vg))))]))},wg=function(e){return cg(W([l(Ei,bo,bg(e)),gg(bg(e))]))},yg=l(Ei,wo(function(e){return e.value}),l(Ei,mo,wg(Br))),xg=n(function(e,t){return l(ag,function(t){return R(t,e)?Ci(t):sg("Expected value "+e)},t)}),Tg=function(e){return{$:"ChoiceSelector",a:e}},Sg=function(e){return{$:"FragmentSelector",a:e}},Eg=function(e){return{$:"SvgSelector",a:e}},_g=function(e){return l(ag,e,Ci(M))};function Cg(){return cg(W([f(fg,"item",_g(function(e){return pg(Cg())}),z,h(dg,"default",_g(function(e){return Cg()}),h(dg,"@type",l(Ei,ar,l(xg,"oa:Choice",Br)),Ci(r(function(e,t,n){return Tg({_default:t,items:n})}))))),h(dg,"value",l(Ei,yo(""),yg),h(dg,"@type",l(xg,"oa:FragmentSelector",Br),Ci(n(function(e,t){return Sg({value:t})})))),h(dg,"value",l(Ei,yo(""),yg),h(dg,"@type",l(xg,"oa:SvgSelector",Br),Ci(n(function(e,t){return Eg({value:t})}))))]))}try{var Pg=Cg();Cg=function(){return Pg}}catch(e){throw"Some top-level definitions from `Iiif.Decoders` are causing infinite recursion:\n\n  \n      annotationSelectorDecoder\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var Rg=n(function(e,t){return{full:e,selector:t}}),kg=cg(W([l(Ei,function(e){return l(Rg,e,sr)},Br),f(fg,"selector",l(Ei,ar,Pg),sr,h(dg,"full",Br,Ci(Rg)))])),Og={$:2},$g=h(_i,n(function(e,t){return D(e,t)}),l(Ar,"width",Og),l(Ar,"height",Og)),Mg=o(function(e,t,n,r,i){return{height:r,id:e,profile:t,sizes:i,width:n}}),Dg=f(fg,"sizes",gg($g),z,f(fg,"height",mg(Og),sr,f(fg,"width",mg(Og),sr,h(dg,"profile",pg(Br),h(dg,"@id",Br,Ci(Mg)))))),Hg=u(function(e,t,n,r,i,o,a,s){return{chars:a,format:n,height:i,id:e,label:s,resourceType:t,service:o,width:r}}),Lg=cg(W([l(Ei,function(e){return v(Hg,ar(e),sr,sr,sr,sr,sr,sr,sr)},Br),f(fg,"label",yg,sr,f(fg,"chars",yg,sr,f(fg,"service",mg(Dg),sr,f(fg,"height",mg(Og),sr,f(fg,"width",mg(Og),sr,f(fg,"format",yg,sr,f(fg,"@type",mg(Br),sr,f(fg,"@id",mg(Br),sr,Ci(Hg)))))))))])),Ig=i(function(e,t,n,r){return{id:e,motivation:t,on:r,resource:n}}),Ag=f(fg,"on",l(Ei,mo,function(e){return cg(W([pg(e),ug(z)]))}(kg)),sr,h(dg,"resource",Lg,f(fg,"motivation",yg,sr,f(fg,"@id",mg(Br),sr,Ci(Ig))))),Bg=i(function(e,t,n,r){return{annotations:n,id:e,label:t,status:r}}),zg={$:"Full"},Ng=r(function(e,t,n){return{annotationLists:n,collections:e,manifests:t}}),Fg=n(function(e,t){return d(Nr,zr,e,t,gn,gn)}),Wg=n(function(e,t){return D(e,t)}),jg=function(){var e=l(og,zg,f(fg,"resources",gg(Ag),z,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(Bg))))),t=l(Ei,function(e){return e.id},e),n=h(_i,Fg,t,e),r=l(Ei,l(Ng,pn,pn),n);return h(_i,Wg,t,r)}(),Vg=n(function(e,t){var n=l(ni,e.id,t),r=D(e.status,l(wo,function(e){return e.status},n));e:for(;;){t:for(;;){if("Nothing"===r.b.$){if("Full"===r.a.$)break e;r.b;return h(Ur,e.id,e,t)}switch(r.a.$){case"Full":break e;case"Loading":if("Stub"===r.b.a.$){r.a,r.b.a;return h(Ur,e.id,e,t)}break t;default:break t}}return t}r.a;return h(Ur,e.id,e,t)}),Ug=n(function(e,t){return I(t,{annotationLists:l(Vg,e,t.annotationLists)})}),qg=n(function(e,t){return{$:"AnnotationListLoadedInt",a:e,b:t}}),Gg={$:"Loading"},Zg={$:"EmptyBody"},Jg=r(function(e,t,n){var r=t(l(ni,e,n));if("Just"===r.$){var i=r.a;return h(Ur,e,i,n)}return l(Qr,e,n)}),Xg=function(e){return"Just"===e.$},Yg=n(function(e,t){return{$:"BadPayload",a:e,b:t}}),Kg=function(e){return{$:"BadStatus",a:e}},Qg=function(e){return{$:"BadUrl",a:e}},ep={$:"NetworkError"},tp={$:"Timeout"},np=function(e){return"StringBody"===e.$},rp=function(e){return{$:0,b:"text",a:e}},ip=ge,op=function(e){return{$:"Request",a:e}},ap=n(function(e,t){return op({body:Zg,expect:function(e){return rp(function(t){var n=l(ip,e,t.body);if("Err"===n.$){var r=n.a;return ur(Mr(r))}var i=n.a;return cr(i)})}(t),headers:z,method:"GET",timeout:sr,url:e,withCredentials:!1})}),sp=n(function(e,t){return l(Vc,e,function(e){var t=e.a;return l(dn,t,sr)}(t))}),up=n(function(e,t){var n=l(ni,e,t.annotationLists),r=l(sp,qg(e),l(ap,e,jg));if("Nothing"===n.$){var i=Pf(e);return D(l(Ug,I(i,{status:Gg}),t),r)}var o=n.a;switch(o.status.$){case"Stub":var a=I(o,{status:Gg});return D(l(Ug,a,t),r);case"Loading":default:return D(t,Lr)}}),cp=function(e){return{$:"JustCollection",a:e}},lp=function(e){return{$:"JustManifest",a:e}},hp=f(fg,"logo",mg(Lg),sr,f(fg,"label",yg,sr,h(dg,"@id",Br,h(dg,"@type",l(xg,"sc:Collection",Br),Ci(function(e){return oi}))))),fp=f(fg,"logo",mg(Lg),sr,f(fg,"label",yg,sr,h(dg,"@id",Br,h(dg,"@type",l(xg,"sc:Manifest",Br),Ci(function(e){return es}))))),dp=function(e){return cg(B(W([l(Ei,cp,hp),l(Ei,lp,fp)]),l(yo,z,l(wo,bo,e))))},gp=f(fg,"logo",mg(Lg),sr,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(oi)))),pp=f(fg,"logo",mg(Lg),sr,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(es)))),vp=a(function(e,t,n,r,i,o){return{collections:r,id:e,label:t,logo:n,manifests:i,status:o}}),mp=function(){var e=f(fg,"members",gg(dp(sr)),z,f(fg,"manifests",gg(dp(ar(l(Ei,lp,pp)))),z,f(fg,"collections",gg(dp(ar(l(Ei,cp,gp)))),z,Ci(r(function(e,t,n){return B(e,B(t,n))}))))),t=l(Ei,wc(function(e){if("JustManifest"===e.$){var t=e.a;return ar(t)}return sr}),e),i=l(Ei,Iu,l(Ei,xi(function(e){return D(e.id,e)}),t)),o=l(Ei,wc(function(e){if("JustCollection"===e.$){var t=e.a;return ar(t)}return sr}),e),a=l(Ei,Iu,l(Ei,xi(function(e){return D(e.id,e)}),o)),s=l(og,zg,l(ig,l(Ei,xi(function(e){return e.id}),t),l(ig,l(Ei,xi(function(e){return e.id}),o),f(fg,"logo",mg(Lg),sr,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(vp))))))),u=l(Ei,function(e){return e.id},s),c=h(_i,n(function(e,t){return h(Ur,e.id,e,t)}),s,a),d=h(_i,n(function(e,t){return h(Ng,e,t,pn)}),c,i);return h(_i,Wg,u,d)}(),bp=n(function(e,t){return I(t,{collections:l(Vg,e,t.collections)})}),wp=n(function(e,t){return{$:"CollectionLoadedInt",a:e,b:t}}),yp=n(function(e,t){var n=l(ni,e,t.collections),r=l(sp,wp(e),l(ap,e,mp));if("Nothing"===n.$){var i=h(oi,e,sr,sr);return D(l(bp,I(i,{status:Gg}),t),r)}var o=n.a;switch(o.status.$){case"Stub":var a=I(o,{status:Gg});return D(l(bp,a,t),r);case"Loading":default:return D(t,Lr)}}),xp=i(function(e,t,n,r){return{format:n,id:e,label:t,profile:r}}),Tp=function(){var e=l(Ei,function(e){return{format:sr,id:e,label:sr,profile:sr}},Br),t=f(fg,"profile",yg,sr,f(fg,"format",yg,sr,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(xp)))));return cg(W([l(Ei,bo,t),l(Ei,bo,e),gg(t),gg(e)]))}(),Sp=l(Ei,xi(function(e){return e.value}),wg(Br)),Ep=function(){var e=n(function(e,t){return D(e,t)});return l(Ei,Iu,gg(h(dg,"value",Sp,h(dg,"label",l(Ei,yo(""),yg),Ci(e)))))}(),_p=i(function(e,t,n,r){return{charsProcessed:r,hash:n,seed:t,shift:e}}),Cp=n(function(e,t){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}),Pp=n(function(e,t){return t<<e|t>>>32-e}),Rp=n(function(e,t){return l(Cp,5,l(Pp,13,e^l(Cp,461845907,l(Pp,15,l(Cp,3432918353,t)))))+3864292196}),kp=n(function(e,t){var n=t.hash|(255&gr(e))<<t.shift;return 24===t.shift?{charsProcessed:t.charsProcessed+1,hash:0,seed:l(Rp,t.seed,n),shift:0}:{charsProcessed:t.charsProcessed+1,hash:n,seed:t.seed,shift:t.shift+8}}),Op=Q,$p=n(function(e,t){return function(e){var t=(e.hash?e.seed^l(Cp,461845907,l(Pp,15,l(Cp,3432918353,e.hash))):e.seed)^e.charsProcessed,n=l(Cp,2246822507,t^t>>>16),r=l(Cp,3266489909,n^n>>>13);return(r^r>>>16)>>>0}(h(Op,kp,f(_p,0,e,0,0),t))}),Mp=o(function(e,t,n,r,i){return{canvases:r,id:e,label:n,ranges:i,viewingHint:t}}),Dp=function(){var e=o(function(e,t,n,r,i){if("Just"===e.$){var o=e.a;return d(Mp,o,t,n,r,i)}o=_r(l($p,0,l(Cr,"",l(go,i,l(En,l(yo,"",n),r)))));return d(Mp,o,t,n,r,i)});return f(fg,"ranges",gg(Br),z,f(fg,"canvases",gg(Br),z,f(fg,"label",yg,sr,f(fg,"viewingHint",yg,sr,f(fg,"@id",mg(Br),sr,Ci(e))))))}(),Hp=r(function(e,t,n){return{contentType:t,id:e,label:n}}),Lp=f(fg,"label",yg,sr,f(fg,"@type",mg(Br),sr,h(dg,"@id",Br,Ci(Hp)))),Ip=s(function(e,t,n,r,i,o,a){return{height:r,id:e,images:i,label:t,otherContent:a,thumbnail:o,width:n}}),Ap=f(fg,"otherContent",pg(Lp),z,f(fg,"thumbnail",mg(Lg),sr,f(fg,"images",gg(Ag),z,h(dg,"height",Og,h(dg,"width",Og,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(Ip)))))))),Bp=o(function(e,t,n,r,i){return{canvases:i,id:e,label:t,viewingDirection:n,viewingHint:r}}),zp=f(fg,"canvases",gg(Ap),z,f(fg,"viewingHint",yg,sr,f(fg,"viewingDirection",yg,sr,f(fg,"label",yg,sr,f(fg,"@id",mg(Br),sr,Ci(Bp)))))),Np=function(e){return function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return function(u){return function(c){return function(l){return function(h){return{attribution:o,description:n,id:e,label:t,license:i,logo:r,metadata:a,related:s,seeAlso:u,sequences:c,status:h,structures:l}}}}}}}}}}}}},Fp=function(){var e=l(og,zg,f(fg,"structures",gg(Dp),z,f(fg,"sequences",cg(W([gg(zp),l(Ei,bo,zp)])),z,f(fg,"seeAlso",Tp,z,f(fg,"related",Tp,z,f(fg,"metadata",Ep,pn,f(fg,"attribution",yg,sr,f(fg,"license",yg,sr,f(fg,"logo",mg(Lg),sr,f(fg,"description",yg,sr,f(fg,"label",yg,sr,h(dg,"@id",Br,Ci(Np))))))))))))),t=l(Ei,function(e){return e.id},e),n=h(_i,Fg,t,e),r=l(Ei,function(e){return h(Ng,pn,e,pn)},n);return h(_i,Wg,t,r)}(),Wp=n(function(e,t){return I(t,{manifests:l(Vg,e,t.manifests)})}),jp=n(function(e,t){return{$:"ManifestLoadedInt",a:e,b:t}}),Vp=n(function(e,t){var n=l(ni,e,t.manifests),r=l(sp,jp(e),l(ap,e,Fp));if("Nothing"===n.$){var i=h(es,e,sr,sr);return D(l(Wp,I(i,{status:Gg}),t),r)}var o=n.a;switch(o.status.$){case"Stub":var a=I(o,{status:Gg});return D(l(Wp,a,t),r);case"Loading":default:return D(t,Lr)}}),Up=r(function(e,t,n){return l(Ug,I(e,{id:t}),n)}),qp=r(function(e,t,n){return l(bp,I(e,{id:t}),n)}),Gp=r(function(e,t,n){return l(Wp,I(e,{id:t}),n)}),Zp=n(function(e,t){return{$:"AnnotationListLoaded",a:e,b:t}}),Jp=n(function(e,t){return{$:"CollectionLoaded",a:e,b:t}}),Xp=n(function(e,t){return{$:"ManifestLoaded",a:e,b:t}}),Yp=n(function(e,t){return I(e,{annotationLists:h(mc,function(e){return Vg},e.annotationLists,t.annotationLists),collections:h(mc,function(e){return Vg},e.collections,t.collections),manifests:h(mc,function(e){return Vg},e.manifests,t.manifests)})}),Kp=n(function(e,t){return l(Yp,t,e)}),Qp=Kp,ev=Kp,tv=function(e){switch(e.$){case"BadUrl":return"Bad url "+e.a;case"Timeout":return"Timeout";case"NetworkError":return"Network error";case"BadPayload":e.a;return"Error parsing response";default:return"Bad response code"}},nv=n(function(e,t){switch(e.$){case"ManifestLoadedInt":var n=e.a;if("Ok"===(c=e.b).$){var r=c.a,i=r.a,o=r.b;return function(e){return D(e,ar(l(Xp,e.iiif,n)))}(function(e){return R(i,n)?e:I(e,{iiif:h(Gp,l(ts,e.iiif,i),n,e.iiif)})}(I(t,{iiif:l(Kp,o,t.iiif)})))}var a=c.a;return D(I(t,{errors:B(t.errors,W(["Error loading manifest "+n+". "+tv(a)]))}),sr);case"CollectionLoadedInt":var s=e.a;if("Ok"===(c=e.b).$){var u=c.a;i=u.a,o=u.b;return function(e){return D(e,ar(l(Jp,e.iiif,s)))}(function(e){return R(i,s)?e:I(e,{iiif:h(qp,l(ai,e.iiif,i),s,e.iiif)})}(I(t,{iiif:l(ev,o,t.iiif)})))}a=c.a;return D(I(t,{errors:B(t.errors,W(["Error loading collection "+s+". "+tv(a)]))}),sr);default:var c,f=e.a;if("Ok"===(c=e.b).$){var d=c.a;i=d.a,o=d.b;return function(e){return D(e,ar(l(Zp,e.iiif,f)))}(function(e){return R(i,f)?e:I(e,{iiif:h(Up,l(Rf,e.iiif,i),f,e.iiif)})}(I(t,{iiif:l(Qp,o,t.iiif)})))}a=c.a;return D(I(t,{errors:B(t.errors,W(["Error loading annotationList "+f+". "+tv(a)]))}),sr)}}),rv=function(e){return{$:"IiifMsg",a:e}},iv=function(e){return{$:"IiifNotification",a:e}},ov={$:"Viewer"},av=n(function(e,t){var n=function(){var t=l(wo,Rr("!"),e.fragment);if("Nothing"===t.$)return D(sr,sr);if(t.a.b){if(t.a.b.b){var n=t.a,r=(o=n.a,n.b),i=r.a;r.b;return D(ar(o),ar(i))}var o=t.a.a;return D(ar(o),sr)}return D(sr,sr)}(),r=n.a,i=n.b,o=function(){if("Nothing"===r.$)return z;var e=r.a;return Zn(l(xi,t.uriMapper.inflate,l(Rr,"/",e)))}(),a=l(wo,ai(t.iiif),mo(o)),s=function(){var e=l(wo,Rr("/"),i);if("Nothing"===e.$)return D(sr,sr);if(e.a.b){if(e.a.b.b){var n=e.a,r=(a=n.a,n.b),o=r.a;r.b;return D(ar(t.uriMapper.inflate(a)),ar(t.uriMapper.inflate(o)))}var a=e.a.a;return D(ar(t.uriMapper.inflate(a)),sr)}return D(sr,sr)}(),u=s.a,c=s.b,h=function(){if("Nothing"===u.$)return Kh;u.a;return ov}(),f=I(t,{screen:h,url:e});return l(Ho,eg.updater(l(cd,l(wo,ts(t.iiif),u),c)),l(Ho,Yh.updater(l(rg,t.iiif,a)),l(Wo.updater,function(e){return{$:"SelectPath",a:e}}(o),f)))}),sv=en,uv=n(function(e,t){if("Nothing"===e.$)return t;var n=e.a;return t+":"+_r(n)}),cv=r(function(e,t,n){return"Nothing"===t.$?n:B(n,B(e,t.a))}),lv=function(e){var t="Http"===e.protocol.$?"http://":"https://";return h(cv,"#",e.fragment,h(cv,"?",e.query,B(l(uv,e.port_,B(t,e.host)),e.path)))},hv=function(e){var t=l(Cr,"/",l(xi,e.uriMapper.deflate,l(wc,mn,W([l(wo,function(e){return e.id},e.manifestViewModel.manifest),e.manifestViewModel.canvas])))),n=l(Cr,"/",l(xi,e.uriMapper.deflate,Zn(e.collectionTreeModel.selectedCollection))),r=e.url,i="Browser"===e.screen.$?n:n+"!"+t,o=I(r,{fragment:ar(i)});return D(I(e,{url:o}),l(sv,e.key,lv(o)))},fv=function(e){return{$:"IiifNotification",a:e}},dv=n(function(e,t){return{$:"ShowAnnotationPort",a:e,b:t}}),gv=n(function(e,t){var n=t.a,r=t.b,i=t.c,o=e(n),a=o.a,s=o.b;return H(a,l(ci,r,s),i)}),pv=n(function(e,t){var n=t.a,r=t.b,i=t.c;if(i.b){var o=i.a,a=i.b;return l(pv,e,l(gv,e(o),H(n,r,a)))}return D(n,r)}),vv=function(e){var t=e.a,n=e.b;e.c;return D(t,n)},mv=n(function(e,t){var n=D(e,t);if(n.b.b){if(n.a){var r=n.b;a=r.a,i=r.b;return l(En,a,l(mv,e-1,i))}var i,o=n.b,a=o.a;return i=o.b}return z}),bv=function(e){return l(Sa,la,ke(function(t){try{rn.location=e}catch(e){st.location.reload(!1)}}))},wv=n(function(e,t){switch(e.$){case"LoadManifest":var n=e.a;return vv(l(Ao,rv,l(Hn,function(e){return I(t,{iiif:e})},l(gv,Vp(n),H(t.iiif,Lr,z)))));case"LoadCollection":var r=e.a;return vv(l(Ao,rv,l(Hn,function(e){return I(t,{iiif:e})},l(gv,yp(r),H(t.iiif,Lr,z)))));case"LoadAnnotationList":var i=e.a;return vv(l(Ao,rv,l(Hn,function(e){return I(t,{iiif:e})},l(gv,up(i),H(t.iiif,Lr,z)))));case"CollectionSelected":var o=e.a,a=mo(o),s=l(wo,ai(t.iiif),a);return l(pv,wv,l(gv,hv,l(Yh.updater,l(rg,t.iiif,s),t)));case"ManifestSelected":var u=e.a;return l(pv,wv,l(gv,hv,l(eg.updater,ud(ar(l(ts,t.iiif,u))),I(t,{screen:ov}))));case"CanvasSelected":n=e.a;var c=e.b;return l(pv,wv,l(gv,hv,l(eg.updater,l(cd,ar(l(ts,t.iiif,n)),ar(c)),I(t,{screen:ov}))));case"CloseViewer":return l(pv,wv,l(gv,hv,H(I(t,{screen:Kh}),Lr,z)));case"CanvasOpened":n=e.a,c=e.b;return l(pv,wv,l(gv,hv,H(t,Lr,z)));default:var h=e.a;return l(yv,h(t.iiif),t)}}),yv=n(function(e,t){e:for(;;)switch(e.$){case"LazyLoadManifest":var n=e.a;return l(pv,wv,H(t,Lr,W([Do(n)])));case"LinkClicked":var r=e.a;if("Internal"===r.$){var i=r.a;return D(t,l(sv,t.key,lv(i)))}var o=r.a;return D(t,bv(o));case"UrlChanged":return R(i=e.a,t.url)?D(t,Lr):l(pv,wv,l(av,i,t));case"CloseError":var a=e.a;return D(I(t,{errors:l(mv,a,t.errors)}),Lr);case"CollectionTreeMsg":var s=e.a;return l(pv,wv,l(Ho,Wo.updater(s),H(t,Lr,z)));case"CollectionViewMsg":var u=e.a;return l(pv,wv,l(Ho,Yh.updater(u),H(t,Lr,z)));case"ManifestViewMsg":var c=e.a;return l(pv,wv,l(Ho,eg.updater(c),H(t,Lr,z)));case"ShowAnnotation":var h=e.a;return l(pv,wv,l(Ho,eg.updater(l(dv,t.iiif,h)),H(t,Lr,z)));case"IiifMsg":var f=e.a,d=l(nv,f,t),g=d.a,p=d.b;if("Just"===p.$){var v=p.a;e=iv(v),t=g;continue e}return D(g,Lr);default:v=e.a;return l(pv,wv,l(Ho,eg.updater(fv(v)),l(Ho,Yh.updater(ng(v)),l(Ho,Wo.updater(tg(v)),H(t,Lr,z)))))}}),xv=function(e){try{return ar(decodeURIComponent(e))}catch(e){return sr}},Tv=function(e){return encodeURIComponent(e)},Sv=function(){var e=l(yo,kh,Rh("!"));return{deflate:function(t){return h(Oh,e,function(e){return"%21"},Tv(t))},inflate:function(e){var t=xv(e);return"Just"===t.$?t.a:""}}}(),Ev=n(function(e,t){var n=l(yo,kh,Rh("\\$(\\d+|\\$)"));return h(Oh,n,function(e){if("$$"===e.match)return"$";var n=e.submatches;if(n.b&&"Just"===n.a.$&&!n.b.b){var r=n.a.a,i=l(yo,0,Ha(r));return l(yo,"",l(yo,sr,l(wh,i-1,t.submatches)))}return""},e)}),_v=hn,Cv=n(function(e,t){var r=n(function(e,t){return l(ol,function(e){var n=e.a;e.b;return wr(h(_v,1,n,t))>0},e)});return{deflate:function(t){return l(wo,function(e){var n=e.a,r=e.b;return h(Oh,n,Ev(r),t)},l(r,e,t))},inflate:function(e){return l(wo,function(t){var n=t.a,r=t.b;return h(Oh,n,Ev(r),e)},l(r,t,e))}}}),Pv=l(ag,function(e){var t=Rh(e);if("Just"===t.$){var n=t.a;return Ci(n)}return sg("Error compiling regular expression")},Br),Rv=h(_i,n(function(e,t){return D(e,t)}),l(Ar,"regex",Pv),l(Ar,"pattern",Br)),kv=n(function(e,t){return{deflate:function(n){var r=t.deflate(n);return"Just"===r.$?r.a:e.deflate(n)},inflate:function(n){var r=t.inflate(n);return"Just"===r.$?r.a:e.inflate(n)}}}),Ov=r(function(e,t,n){var r=l(Ir,l(Ar,"uriMapper",l(Ei,kv(Sv),h(_i,Cv,l(Ar,"deflaters",gg(Rv)),l(Ar,"inflaters",gg(Rv))))),e),i=function(){if("Ok"===r.$){var e=r.a;return Hn(function(t){return I(t,{uriMapper:e})})}var t=r.a;return Hn(function(e){return I(e,{errors:B(e.errors,W([Mr(t)]))})})}();return l(pv,wv,l(Ho,av(t),l(Ho,eg.init(e),l(Ho,Yh.init(e),l(Ho,Wo.init(e),i(H(l(af,t,n),Lr,z)))))))}),$v=function(e){return{$:"LazyLoadManifest",a:e}},Mv=function(e){return{$:"ShowAnnotation",a:e}},Dv=rt("inPortLazyLoadManifest",Br),Hv=rt("inPortShowAnnotation",cg(W([ug(sr),l(Ei,ar,Br)]))),Lv=n(function(e,t){return I(t,{content:e})}),Iv=l(n(function(e,t){return I(t,{baseColor:e})}),"Error",{attributes:z,baseColor:"Primary",content:zi,onClose:sr,round:5}),Av=n(function(e,t){return I(t,{onClose:ar(e)})}),Bv=n(function(e,t){return I(t,{onPress:e})}),zv=function(e){var t=n(function(e,t){return function(e){return h(ho,5,B(Xi,B(W([Di,fs(lo(15)),$l(lo(e.round)),$i("bg"+e.baseColor+" bgDesat border"+e.baseColor+" text"+e.baseColor+" textDarken"),ch(lo(1)),ao("solid")]),e.attributes)),W([l(Mi,W([Di]),e.content),Ml(l(Hl,Qd("times"),l(Dl,e.baseColor,l(Bv,e.onClose,zl))))]))}(l(Av,function(e){return{$:"CloseError",a:e}}(e),l(Lv,function(e){return Ql(l(Xl,Bi(e),Yl))}(t),Iv)))});return wr(e.errors)>0?h(Zi,15,W([f(co,lo(15),lo(15),lo(0),lo(15)),l(Ji,"position","absolute"),l(Ji,"top","0"),l(Ji,"left","0"),l(Ji,"right","0")]),l(Sr,t,e.errors)):zi},Nv=n(function(e,t){var n=e?z:W([$i("hide")]);return l(Ri,B(W([$i("screen")]),n),W([t]))});!function(t){e.Elm?function e(t,n,r){for(var i in r)i in n?"init"==i?C(6,t):e(t+"."+i,n[i],r[i]):n[i]=r[i]}("Elm",e.Elm,t):e.Elm=t}({Main:{init:function(e){var t=e.onUrlChange,r=e.onUrlRequest,i=function(){i.a(t(Qt()))};return Jt({setup:function(e){return i.a=e,rn.addEventListener("popstate",i),rn.navigator.userAgent.indexOf("Trident")<0||rn.addEventListener("hashchange",i),n(function(t,n){if(!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&n.button<1&&!t.target&&!t.hasAttribute("download")){n.preventDefault();var i=t.href,o=Qt(),a=Na(i).a;e(r(a&&o.protocol===a.protocol&&o.host===a.host&&o.port_.a===a.port_.a?ua(a):sa(i)))}})},init:function(t){return h(e.init,t,Qt(),i)},view:e.view,update:e.update,subscriptions:e.subscriptions})}({init:Ov,onUrlChange:function(e){return{$:"UrlChanged",a:e}},onUrlRequest:function(e){return{$:"LinkClicked",a:e}},subscriptions:function(e){return ko(W([Dv($v),Hv(Mv),Wo.subscriptions(e),Yh.subscriptions(e),eg.subscriptions(e)]))},update:yv,view:function(e){return{body:W([l(Nv,R(e.screen,Kh),function(e){return h(ho,0,W([Di,Gc]),W([l(Mi,W([l(Ji,"flex-grow","1"),Gc,l(Ji,"flex-shrink","0"),l(Ji,"flex-basis","0"),l(Ji,"overflow","scroll")]),Wo.view(e)),l(Mi,W([l(Ji,"flex-grow","2"),Gc,l(Ji,"flex-shrink","0"),l(Ji,"flex-basis","0"),fs(lo(10)),l(Ji,"overflow-y","scroll")]),Yh.view(e))]))}(e)),l(Nv,R(e.screen,ov),eg.view(e)),zv(e),l(Ri,W([l(Ji,"display","none")]),W([l(Ri,W([Sf("annotation_overlay_wrapper")]),W([l(Ri,W([Sf("annotation_overlay")]),z)]))]))]),title:"Elm IIIF"}}})(lg)(0)}})}(this)},function(e,t){!function(e){"use strict";function t(e,t,n){return n.a=e,n.f=t,n}function n(e){return t(2,e,function(t){return function(n){return e(t,n)}})}function r(e){return t(3,e,function(t){return function(n){return function(r){return e(t,n,r)}}})}function i(e){return t(4,e,function(t){return function(n){return function(r){return function(i){return e(t,n,r,i)}}}})}function o(e){return t(5,e,function(t){return function(n){return function(r){return function(i){return function(o){return e(t,n,r,i,o)}}}}})}function a(e){return t(6,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return e(t,n,r,i,o,a)}}}}}})}function s(e){return t(7,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return e(t,n,r,i,o,a,s)}}}}}}})}function u(e){return t(8,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return function(u){return e(t,n,r,i,o,a,s,u)}}}}}}}})}function c(e){return t(9,e,function(t){return function(n){return function(r){return function(i){return function(o){return function(a){return function(s){return function(u){return function(c){return e(t,n,r,i,o,a,s,u,c)}}}}}}}}})}function l(e,t,n){return 2===e.a?e.f(t,n):e(t)(n)}function h(e,t,n,r){return 3===e.a?e.f(t,n,r):e(t)(n)(r)}function f(e,t,n,r,i){return 4===e.a?e.f(t,n,r,i):e(t)(n)(r)(i)}function d(e,t,n,r,i,o){return 5===e.a?e.f(t,n,r,i,o):e(t)(n)(r)(i)(o)}function g(e,t,n,r,i,o,a){return 6===e.a?e.f(t,n,r,i,o,a):e(t)(n)(r)(i)(o)(a)}function p(e,t,n,r,i,o,a,s,u){return 8===e.a?e.f(t,n,r,i,o,a,s,u):e(t)(n)(r)(i)(o)(a)(s)(u)}console.warn("Compiled in DEV mode. Follow the advice at https://elm-lang.org/0.19.0/optimize for better performance and smaller assets.");var v=r(function(e,t,n){for(var r=new Array(e),i=0;i<e;i++)r[i]=n(t+i);return r}),m=n(function(e,t){for(var n=new Array(e),r=0;r<e&&t.b;r++)n[r]=t.a,t=t.b;return n.length=r,$(n,t)}),b=(n(function(e,t){return t[e]}),r(function(e,t,n){for(var r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=n[o];return i[e]=t,i}),n(function(e,t){for(var n=t.length,r=new Array(n+1),i=0;i<n;i++)r[i]=t[i];return r[n]=e,r}),r(function(e,t,n){for(var r=n.length,i=0;i<r;i++)t=l(e,n[i],t);return t}),r(function(e,t,n){for(var r=n.length-1;r>=0;r--)t=l(e,n[r],t);return t}));n(function(e,t){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=e(t[i]);return r}),r(function(e,t,n){for(var r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=l(e,t+o,n[o]);return i}),r(function(e,t,n){return n.slice(e,t)}),r(function(e,t,n){var r=t.length,i=e-r;i>n.length&&(i=n.length);for(var o=new Array(r+i),a=0;a<r;a++)o[a]=t[a];for(a=0;a<i;a++)o[a+r]=n[a];return o}),n(function(e,t){return t}),n(function(e,t){return console.log(e+": "+w(t)),t});function w(e){return function e(t,n){if("function"==typeof n)return S(t,"<function>");if("boolean"==typeof n)return x(t,n?"True":"False");if("number"==typeof n)return function(e,t){return e?"[95m"+t+"[0m":t}(t,n+"");if(n instanceof String)return function(e,t){return e?"[92m"+t+"[0m":t}(t,"'"+y(n,!0)+"'");if("string"==typeof n)return function(e,t){return e?"[93m"+t+"[0m":t}(t,'"'+y(n,!1)+'"');if("object"==typeof n&&"$"in n){var r=n.$;if("number"==typeof r)return S(t,"<internals>");if("#"===r[0]){var i=[];for(var o in n)"$"!==o&&i.push(e(t,n[o]));return"("+i.join(",")+")"}if("Set_elm_builtin"===r)return x(t,"Set")+T(t,".fromList")+" "+e(t,Vt(n));if("RBNode_elm_builtin"===r||"RBEmpty_elm_builtin"===r)return x(t,"Dict")+T(t,".fromList")+" "+e(t,jt(n));if("Array_elm_builtin"===r)return x(t,"Array")+T(t,".fromList")+" "+e(t,Nt(n));if("::"===r||"[]"===r){var i="[";for(n.b&&(i+=e(t,n.a),n=n.b);n.b;n=n.b)i+=","+e(t,n.a);return i+"]"}var i="";for(var a in n)if("$"!==a){var s=e(t,n[a]),u=s[0],c="{"===u||"("===u||"["===u||"<"===u||'"'===u||s.indexOf(" ")<0;i+=" "+(c?s:"("+s+")")}return x(t,r)+i}if("object"==typeof n){var i=[];for(var l in n){var h="_"===l[0]?l.slice(1):l;i.push(T(t,h)+" = "+e(t,n[l]))}return 0===i.length?"{}":"{ "+i.join(", ")+" }"}return S(t,"<internals>")}(!1,e)}function y(e,t){var n=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return t?n.replace(/\'/g,"\\'"):n.replace(/\"/g,'\\"')}function x(e,t){return e?"[96m"+t+"[0m":t}function T(e,t){return e?"[37m"+t+"[0m":t}function S(e,t){return e?"[94m"+t+"[0m":t}function E(e,t,n,r,i){switch(e){case 0:throw new Error('What node should I take over? In JavaScript I need something like:\n\n    Elm.Main.init({\n        node: document.getElementById("elm-node")\n    })\n\nYou need to do this with any Browser.sandbox or Browser.element program.');case 1:throw new Error("Browser.application programs cannot handle URLs like this:\n\n    "+document.location.href+"\n\nWhat is the root? The root of your file system? Try looking at this program with `elm reactor` or some other server.");case 2:throw new Error("Problem with the flags given to your Elm program on initialization.\n\n"+t);case 3:var o=t;throw new Error("There can only be one port named `"+o+"`, but your program has multiple.");case 4:o=t;throw new Error("Trying to send an unexpected type of value through port `"+o+"`:\n"+n);case 5:throw new Error('Trying to use `(==)` on functions.\nThere is no way to know if functions are "the same" in the Elm sense.\nRead more about this at https://package.elm-lang.org/packages/elm/core/latest/Basics#== which describes why it is this way and what the better version will look like.');case 6:var a=t;throw new Error("Your page is loading multiple Elm scripts with a module named "+a+". Maybe a duplicate script is getting loaded accidentally? If not, rename one of them so I know which is which!");case 8:a=t;var s=n,u=r;throw new Error("TODO in module `"+a+"` "+_(s)+"\n\n"+u);case 9:a=t,s=n;var c=r;u=i;throw new Error("TODO in module `"+a+"` from the `case` expression "+_(s)+"\n\nIt received the following value:\n\n    "+w(c).replace("\n","\n    ")+"\n\nBut the branch that handles it says:\n\n    "+u.replace("\n","\n    "));case 10:throw new Error("Bug in https://github.com/elm/virtual-dom/issues");case 11:throw new Error("Cannot perform mod 0. Division by zero error.")}}function _(e){return e.start.line===e.end.line?"on line "+e.start.line:"on lines "+e.start.line+" through "+e.end.line}function C(e,t){for(var n,r=[],i=P(e,t,0,r);i&&(n=r.pop());i=P(n.a,n.b,0,r));return i}function P(e,t,n,r){if(n>100)return r.push($(e,t)),!0;if(e===t)return!0;if("object"!=typeof e||null===e||null===t)return"function"==typeof e&&E(5),!1;for(var i in"Set_elm_builtin"===e.$&&(e=Vt(e),t=Vt(t)),"RBNode_elm_builtin"!==e.$&&"RBEmpty_elm_builtin"!==e.$||(e=jt(e),t=jt(t)),e)if(!P(e[i],t[i],n+1,r))return!1;return!0}n(C),n(function(e,t){return!C(e,t)});function R(e,t,n){if("object"!=typeof e)return e===t?0:e<t?-1:1;if(e instanceof String){var r=e.valueOf(),i=t.valueOf();return r===i?0:r<i?-1:1}if("#"===e.$[0])return(n=R(e.a,t.a))?n:(n=R(e.b,t.b))?n:R(e.c,t.c);for(;e.b&&t.b&&!(n=R(e.a,t.a));e=e.b,t=t.b);return n||(e.b?1:t.b?-1:0)}n(function(e,t){return R(e,t)<0}),n(function(e,t){return R(e,t)<1}),n(function(e,t){return R(e,t)>0}),n(function(e,t){return R(e,t)>=0});var k=n(function(e,t){var n=R(e,t);return n<0?It:n?Ft:Lt}),O={$:"#0"};function $(e,t){return{$:"#2",a:e,b:t}}function M(e,t,n){return{$:"#3",a:e,b:t,c:n}}function D(e){return new String(e)}var H=n(L);function L(e,t){if("string"==typeof e)return e+t;if(!e.b)return t;var n=A(e.a,t);e=e.b;for(var r=n;e.b;e=e.b)r=r.b=A(e.a,t);return n}var I={$:"[]"};function A(e,t){return{$:"::",a:e,b:t}}var B=n(A);function z(e){for(var t=I,n=e.length;n--;)t=A(e[n],t);return t}function N(e){for(var t=[];e.b;e=e.b)t.push(e.a);return t}var F=r(function(e,t,n){for(var r=[];t.b&&n.b;t=t.b,n=n.b)r.push(l(e,t.a,n.a));return z(r)}),W=(i(function(e,t,n,r){for(var i=[];t.b&&n.b&&r.b;t=t.b,n=n.b,r=r.b)i.push(h(e,t.a,n.a,r.a));return z(i)}),o(function(e,t,n,r,i){for(var o=[];t.b&&n.b&&r.b&&i.b;t=t.b,n=n.b,r=r.b,i=i.b)o.push(f(e,t.a,n.a,r.a,i.a));return z(o)}),a(function(e,t,n,r,i,o){for(var a=[];t.b&&n.b&&r.b&&i.b&&o.b;t=t.b,n=n.b,r=r.b,i=i.b,o=o.b)a.push(d(e,t.a,n.a,r.a,i.a,o.a));return z(a)}),n(function(e,t){return z(N(t).sort(function(t,n){return R(e(t),e(n))}))}),n(function(e,t){return z(N(t).sort(function(t,n){var r=l(e,t,n);return r===Lt?0:r===It?-1:1}))}),n(function(e,t){return e+t}),n(function(e,t){return e-t}),n(function(e,t){return e*t}),n(function(e,t){return e/t}),n(function(e,t){return e/t|0}),n(Math.pow));n(function(e,t){return t%e}),n(function(e,t){var n=t%e;return 0===e?E(11):n>0&&e<0||n<0&&e>0?n+e:n}),Math.PI,Math.E,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,n(Math.atan2);var j=Math.ceil,V=Math.floor,U=(Math.round,Math.sqrt,Math.log);isNaN;n(function(e,t){return e&&t}),n(function(e,t){return e||t}),n(function(e,t){return e!==t});var q=n(function(e,t){return e+t});n(function(e,t){return e+t});n(function(e,t){for(var n=t.length,r=new Array(n),i=0;i<n;){var o=t.charCodeAt(i);55296<=o&&o<=56319?(r[i]=e(D(t[i]+t[i+1])),i+=2):(r[i]=e(D(t[i])),i++)}return r.join("")}),n(function(e,t){for(var n=[],r=t.length,i=0;i<r;){var o=t[i],a=t.charCodeAt(i);i++,55296<=a&&a<=56319&&(o+=t[i],i++),e(D(o))&&n.push(o)}return n.join("")});r(function(e,t,n){for(var r=n.length,i=0;i<r;){var o=n[i],a=n.charCodeAt(i);i++,55296<=a&&a<=56319&&(o+=n[i],i++),t=l(e,D(o),t)}return t});var G=r(function(e,t,n){for(var r=n.length;r--;){var i=n[r],o=n.charCodeAt(r);56320<=o&&o<=57343&&(i=n[--r]+i),t=l(e,D(i),t)}return t}),Z=n(function(e,t){return t.split(e)}),J=n(function(e,t){return t.join(e)}),X=r(function(e,t,n){return n.slice(e,t)});n(function(e,t){for(var n=t.length;n--;){var r=t[n],i=t.charCodeAt(n);if(56320<=i&&i<=57343&&(r=t[--n]+r),e(D(r)))return!0}return!1});var Y=n(function(e,t){for(var n=t.length;n--;){var r=t[n],i=t.charCodeAt(n);if(56320<=i&&i<=57343&&(r=t[--n]+r),!e(D(r)))return!1}return!0}),K=n(function(e,t){return t.indexOf(e)>-1}),Q=n(function(e,t){return 0===t.indexOf(e)}),ee=(n(function(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}),n(function(e,t){var n=e.length;if(n<1)return I;for(var r=0,i=[];(r=t.indexOf(e,r))>-1;)i.push(r),r+=n;return z(i)}));var te=n(function(e,t){return{$:10,d:e,b:t}});n(function(e,t){return{$:11,e:e,b:t}});function ne(e,t){return{$:13,f:e,g:t}}var re=n(function(e,t){return{$:14,b:t,h:e}});var ie=n(function(e,t){return ne(e,[t])}),oe=r(function(e,t,n){return ne(e,[t,n])}),ae=(i(function(e,t,n,r){return ne(e,[t,n,r])}),o(function(e,t,n,r,i){return ne(e,[t,n,r,i])}),a(function(e,t,n,r,i,o){return ne(e,[t,n,r,i,o])}),s(function(e,t,n,r,i,o,a){return ne(e,[t,n,r,i,o,a])}),u(function(e,t,n,r,i,o,a,s){return ne(e,[t,n,r,i,o,a,s])}),c(function(e,t,n,r,i,o,a,s,u){return ne(e,[t,n,r,i,o,a,s,u])}),n(function(e,t){try{return se(e,JSON.parse(t))}catch(e){return mn(l(wn,"This is not valid JSON! "+e.message,ge(t)))}}),n(function(e,t){return se(e,pe(t))}));function se(e,t){switch(e.$){case 3:return"boolean"==typeof t?bn(t):le("a BOOL",t);case 2:return"number"!=typeof t?le("an INT",t):-2147483647<t&&t<2147483647&&(0|t)===t?bn(t):!isFinite(t)||t%1?le("an INT",t):bn(t);case 4:return"number"==typeof t?bn(t):le("a FLOAT",t);case 6:return"string"==typeof t?bn(t):t instanceof String?bn(t+""):le("a STRING",t);case 9:return null===t?bn(e.c):le("null",t);case 5:return bn(ge(t));case 7:return Array.isArray(t)?ue(e.b,t,z):le("a LIST",t);case 8:return Array.isArray(t)?ue(e.b,t,ce):le("an ARRAY",t);case 10:var n=e.d;if("object"!=typeof t||null===t||!(n in t))return le("an OBJECT with a field named `"+n+"`",t);var r=se(e.b,t[n]);return qt(r)?r:mn(l(yn,n,r.a));case 11:var i=e.e;if(!Array.isArray(t))return le("an ARRAY",t);if(i>=t.length)return le("a LONGER array. Need index "+i+" but only see "+t.length+" entries",t);r=se(e.b,t[i]);return qt(r)?r:mn(l(xn,i,r.a));case 12:if("object"!=typeof t||null===t||Array.isArray(t))return le("an OBJECT",t);var o=I;for(var a in t)if(t.hasOwnProperty(a)){r=se(e.b,t[a]);if(!qt(r))return mn(l(yn,a,r.a));o=A($(a,r.a),o)}return bn(rn(o));case 13:for(var s=e.f,u=e.g,c=0;c<u.length;c++){r=se(u[c],t);if(!qt(r))return r;s=s(r.a)}return bn(s);case 14:r=se(e.b,t);return qt(r)?se(e.h(r.a),t):r;case 15:for(var h=I,f=e.g;f.b;f=f.b){r=se(f.a,t);if(qt(r))return r;h=A(r.a,h)}return mn(Tn(rn(h)));case 1:return mn(l(wn,e.a,ge(t)));case 0:return bn(e.a)}}function ue(e,t,n){for(var r=t.length,i=new Array(r),o=0;o<r;o++){var a=se(e,t[o]);if(!qt(a))return mn(l(xn,o,a.a));i[o]=a.a}return bn(n(i))}function ce(e){return l(pn,e.length,function(t){return e[t]})}function le(e,t){return mn(l(wn,"Expecting "+e,ge(t)))}function he(e,t){if(e===t)return!0;if(e.$!==t.$)return!1;switch(e.$){case 0:case 1:return e.a===t.a;case 3:case 2:case 4:case 6:case 5:return!0;case 9:return e.c===t.c;case 7:case 8:case 12:return he(e.b,t.b);case 10:return e.d===t.d&&he(e.b,t.b);case 11:return e.e===t.e&&he(e.b,t.b);case 13:return e.f===t.f&&fe(e.g,t.g);case 14:return e.h===t.h&&he(e.b,t.b);case 15:return fe(e.g,t.g)}}function fe(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(!he(e[r],t[r]))return!1;return!0}var de=n(function(e,t){return JSON.stringify(pe(t),null,e)+""});function ge(e){return{$:0,a:e}}function pe(e){return e.a}r(function(e,t,n){return n[e]=pe(t),n});var ve=ge(null);function me(e){return{$:0,a:e}}function be(e){return{$:2,b:e,c:null}}var we=n(function(e,t){return{$:3,b:e,d:t}});n(function(e,t){return{$:4,b:e,d:t}});var ye=0;function xe(e){var t={$:0,e:ye++,f:e,g:null,h:[]};return Pe(t),t}function Te(e){return be(function(t){t(me(xe(e)))})}function Se(e,t){e.h.push(t),Pe(e)}var Ee=n(function(e,t){return be(function(n){Se(e,t),n(me(O))})});var _e=!1,Ce=[];function Pe(e){if(Ce.push(e),!_e){for(_e=!0;e=Ce.shift();)Re(e);_e=!1}}function Re(e){for(;e.f;){var t=e.f.$;if(0===t||1===t){for(;e.g&&e.g.$!==t;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else{if(2===t)return void(e.f.c=e.f.b(function(t){e.f=t,Pe(e)}));if(5===t){if(0===e.h.length)return;e.f=e.f.b(e.h.shift())}else e.g={$:3===t?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}}i(function(e,t,n,r){return ke(t,r,e.init,e.update,e.subscriptions,function(){return function(){}})});function ke(e,t,n,r,i,o){var a=l(ae,e,ge(t?t.flags:void 0));qt(a)||E(2,function(e){return Wn(e)}(a.a));var s={},u=(a=n(a.a)).a,c=o(f,u),h=function(e,t){var n;for(var r in Oe){var i=Oe[r];i.a&&((n=n||{})[r]=i.a(r,t)),e[r]=$e(i,t)}return n}(s,f);function f(e,t){a=l(r,e,u),c(u=a.a,t),He(s,a.b,i(u))}return He(s,a.b,i(u)),h?{ports:h}:{}}var Oe={};function $e(e,t){var n={g:t,h:void 0},r=e.c,i=e.d,o=e.e,a=e.f;return n.h=xe(l(we,function e(t){return l(we,e,function(e){return{$:5,b:e}}(function(e){var s=e.a;return 0===e.$?h(i,n,s,t):o&&a?f(r,n,s.i,s.j,t):h(r,n,o?s.i:s.j,t)}))},e.b))}var Me=n(function(e,t){return be(function(n){e.g(t),n(me(O))})});n(function(e,t){return l(Ee,e.h,{$:0,a:t})});function De(e){return function(t){return{$:1,k:e,l:t}}}n(function(e,t){return{$:3,n:e,o:t}});function He(e,t,n){var r={};for(var i in Le(!0,t,r,null),Le(!1,n,r,null),e)Se(e[i],{$:"fx",a:r[i]||{i:I,j:I}})}function Le(e,t,n,r){switch(t.$){case 1:var i=t.k,o=function(e,t,n,r){return l(e?Oe[t].e:Oe[t].f,function(e){for(var t=n;t;t=t.q)e=t.p(e);return e},r)}(e,i,r,t.l);return void(n[i]=function(e,t,n){return n=n||{i:I,j:I},e?n.i=A(t,n.i):n.j=A(t,n.j),n}(e,o,n[i]));case 2:for(var a=t.m;a.b;a=a.b)Le(e,a.a,n,r);return;case 3:return void Le(e,t.o,n,{p:t.n,q:r})}}function Ie(e){Oe[e]&&E(3,e)}var Ae=n(function(e,t){return t});function Be(e){var t=[],n=Oe[e].r,i=function(e){return be(function(t){var n=setTimeout(function(){t(me(O))},e);return function(){clearTimeout(n)}})}(0);return Oe[e].b=i,Oe[e].c=r(function(e,r,o){for(;r.b;r=r.b)for(var a=t,s=pe(n(r.a)),u=0;u<a.length;u++)a[u](s);return i}),{subscribe:function(e){t.push(e)},unsubscribe:function(e){var n=(t=t.slice()).indexOf(e);n>=0&&t.splice(n,1)}}}var ze,Ne=n(function(e,t){return function(n){return e(t(n))}});function Fe(e,t){var n=I,i=Oe[e].r,o=me(null);return Oe[e].b=o,Oe[e].c=r(function(e,t,r){return n=t,o}),{send:function(r){var o=l(ae,i,ge(r));qt(o)||E(4,e,o.a);for(var a=o.a,s=n;s.b;s=s.b)t(s.a(a))}}}var We="undefined"!=typeof document?document:{};function je(e,t){e.appendChild(t)}i(function(e,t,n,r){var i=r&&r.node?r.node:E(0);return i.parentNode.replaceChild(nt(e,function(){}),i),{}});function Ve(e){return{$:0,a:e}}var Ue=n(function(e,t){return n(function(n,r){for(var i=[],o=0;r.b;r=r.b){var a=r.a;o+=a.b||0,i.push(a)}return o+=i.length,{$:1,c:t,d:et(n),e:i,f:e,b:o}})}),qe=Ue(void 0);n(function(e,t){return n(function(n,r){for(var i=[],o=0;r.b;r=r.b){var a=r.a;o+=a.b.b||0,i.push(a)}return o+=i.length,{$:2,c:t,d:et(n),e:i,f:e,b:o}})})(void 0);n(function(e,t){return{$:4,j:e,k:t,b:1+(t.b||0)}});function Ge(e,t){return{$:5,l:e,m:t,k:void 0}}n(function(e,t){return Ge([e,t],function(){return e(t)})}),r(function(e,t,n){return Ge([e,t,n],function(){return l(e,t,n)})}),i(function(e,t,n,r){return Ge([e,t,n,r],function(){return h(e,t,n,r)})}),o(function(e,t,n,r,i){return Ge([e,t,n,r,i],function(){return f(e,t,n,r,i)})}),a(function(e,t,n,r,i,o){return Ge([e,t,n,r,i,o],function(){return d(e,t,n,r,i,o)})}),s(function(e,t,n,r,i,o,a){return Ge([e,t,n,r,i,o,a],function(){return g(e,t,n,r,i,o,a)})}),u(function(e,t,n,r,i,o,a,s){return Ge([e,t,n,r,i,o,a,s],function(){return function(e,t,n,r,i,o,a,s){return 7===e.a?e.f(t,n,r,i,o,a,s):e(t)(n)(r)(i)(o)(a)(s)}(e,t,n,r,i,o,a,s)})}),c(function(e,t,n,r,i,o,a,s,u){return Ge([e,t,n,r,i,o,a,s,u],function(){return p(e,t,n,r,i,o,a,s,u)})});var Ze=n(function(e,t){return{$:"a0",n:e,o:t}}),Je=(n(function(e,t){return{$:"a1",n:e,o:t}}),n(function(e,t){return{$:"a2",n:e,o:t}})),Xe=n(function(e,t){return{$:"a3",n:e,o:t}});r(function(e,t,n){return{$:"a4",n:t,o:{f:e,o:n}}});n(function(e,t){return"a0"===t.$?l(Ze,t.n,function(e,t){var n=Zr(t);return{$:t.$,a:n?h(qn,n<3?Ke:Qe,Qn(e),t.a):l(sr,e,t.a)}}(e,t.o)):t});var Ye,Ke=n(function(e,t){return $(e(t.a),t.b)}),Qe=n(function(e,t){return{message:e(t.message),stopPropagation:t.stopPropagation,preventDefault:t.preventDefault}});function et(e){for(var t={};e.b;e=e.b){var n=e.a,r=n.$,i=n.n,o=n.o;if("a2"!==r){var a=t[r]||(t[r]={});"a3"===r&&"class"===i?tt(a,i,o):a[i]=o}else"className"===i?tt(t,i,pe(o)):t[i]=pe(o)}return t}function tt(e,t,n){var r=e[t];e[t]=r?r+" "+n:n}function nt(e,t){var n=e.$;if(5===n)return nt(e.k||(e.k=e.m()),t);if(0===n)return We.createTextNode(e.a);if(4===n){for(var r=e.k,i=e.j;4===r.$;)"object"!=typeof i?i=[i,r.j]:i.push(r.j),r=r.k;var o={j:i,p:t};return(a=nt(r,o)).elm_event_node_ref=o,a}if(3===n)return rt(a=e.h(e.g),t,e.d),a;var a=e.f?We.createElementNS(e.f,e.c):We.createElement(e.c);ze&&"a"==e.c&&a.addEventListener("click",ze(a)),rt(a,t,e.d);for(var s=e.e,u=0;u<s.length;u++)je(a,nt(1===n?s[u]:s[u].b,t));return a}function rt(e,t,n){for(var r in n){var i=n[r];"a1"===r?it(e,i):"a0"===r?st(e,t,i):"a3"===r?ot(e,i):"a4"===r?at(e,i):("value"!==r&&"checked"!==r||e[r]!==i)&&(e[r]=i)}}function it(e,t){var n=e.style;for(var r in t)n[r]=t[r]}function ot(e,t){for(var n in t){var r=t[n];void 0!==r?e.setAttribute(n,r):e.removeAttribute(n)}}function at(e,t){for(var n in t){var r=t[n],i=r.f,o=r.o;void 0!==o?e.setAttributeNS(i,n,o):e.removeAttributeNS(i,n)}}function st(e,t,n){var r=e.elmFs||(e.elmFs={});for(var i in n){var o=n[i],a=r[i];if(o){if(a){if(a.q.$===o.$){a.q=o;continue}e.removeEventListener(i,a)}a=ut(t,o),e.addEventListener(i,a,Ye&&{passive:Zr(o)<2}),r[i]=a}else e.removeEventListener(i,a),r[i]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){Ye=!0}}))}catch(e){}function ut(e,t){function n(t){var r=n.q,i=se(r.a,t);if(qt(i)){for(var o,a=Zr(r),s=i.a,u=a?a<3?s.a:s.message:s,c=1==a?s.b:3==a&&s.stopPropagation,l=(c&&t.stopPropagation(),(2==a?s.b:3==a&&s.preventDefault)&&t.preventDefault(),e);o=l.j;){if("function"==typeof o)u=o(u);else for(var h=o.length;h--;)u=o[h](u);l=l.p}l(u,c)}}return n.q=t,n}function ct(e,t){return e.$==t.$&&he(e.a,t.a)}function lt(e,t){var n=[];return ft(e,t,n,0),n}function ht(e,t,n,r){var i={$:t,r:n,s:r,t:void 0,u:void 0};return e.push(i),i}function ft(e,t,n,r){if(e!==t){var i=e.$,o=t.$;if(i!==o){if(1!==i||2!==o)return void ht(n,0,r,t);t=function(e){for(var t=e.e,n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=t[i].b;return{$:1,c:e.c,d:e.d,e:r,f:e.f,b:e.b}}(t),o=1}switch(o){case 5:for(var a=e.l,s=t.l,u=a.length,c=u===s.length;c&&u--;)c=a[u]===s[u];if(c)return void(t.k=e.k);t.k=t.m();var l=[];return ft(e.k,t.k,l,0),void(l.length>0&&ht(n,1,r,l));case 4:for(var h=e.j,f=t.j,d=!1,g=e.k;4===g.$;)d=!0,"object"!=typeof h?h=[h,g.j]:h.push(g.j),g=g.k;for(var p=t.k;4===p.$;)d=!0,"object"!=typeof f?f=[f,p.j]:f.push(p.j),p=p.k;return d&&h.length!==f.length?void ht(n,0,r,t):((d?function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(h,f):h===f)||ht(n,2,r,f),void ft(g,p,n,r+1));case 0:return void(e.a!==t.a&&ht(n,3,r,t.a));case 1:return void dt(e,t,n,r,pt);case 2:return void dt(e,t,n,r,vt);case 3:if(e.h!==t.h)return void ht(n,0,r,t);var v=gt(e.d,t.d);v&&ht(n,4,r,v);var m=t.i(e.g,t.g);return void(m&&ht(n,5,r,m))}}}function dt(e,t,n,r,i){if(e.c===t.c&&e.f===t.f){var o=gt(e.d,t.d);o&&ht(n,4,r,o),i(e,t,n,r)}else ht(n,0,r,t)}function gt(e,t,n){var r;for(var i in e)if("a1"!==i&&"a0"!==i&&"a3"!==i&&"a4"!==i)if(i in t){var o=e[i],a=t[i];o===a&&"value"!==i&&"checked"!==i||"a0"===n&&ct(o,a)||((r=r||{})[i]=a)}else(r=r||{})[i]=n?"a1"===n?"":"a0"===n||"a3"===n?void 0:{f:e[i].f,o:void 0}:"string"==typeof e[i]?"":null;else{var s=gt(e[i],t[i]||{},i);s&&((r=r||{})[i]=s)}for(var u in t)u in e||((r=r||{})[u]=t[u]);return r}function pt(e,t,n,r){var i=e.e,o=t.e,a=i.length,s=o.length;a>s?ht(n,6,r,{v:s,i:a-s}):a<s&&ht(n,7,r,{v:a,e:o});for(var u=a<s?a:s,c=0;c<u;c++){var l=i[c];ft(l,o[c],n,++r),r+=l.b||0}}function vt(e,t,n,r){for(var i=[],o={},a=[],s=e.e,u=t.e,c=s.length,l=u.length,h=0,f=0,d=r;h<c&&f<l;){var g=s[h],p=u[f],v=g.a,m=p.a,b=g.b,w=p.b,y=void 0,x=void 0;if(v!==m){var T=s[h+1],S=u[f+1];if(T){var E=T.a,_=T.b;x=m===E}if(S){var C=S.a,P=S.b;y=v===C}if(y&&x)ft(b,P,i,++d),bt(o,i,v,w,f,a),d+=b.b||0,wt(o,i,v,_,++d),d+=_.b||0,h+=2,f+=2;else if(y)d++,bt(o,i,m,w,f,a),ft(b,P,i,d),d+=b.b||0,h+=1,f+=2;else if(x)wt(o,i,v,b,++d),d+=b.b||0,ft(_,w,i,++d),d+=_.b||0,h+=2,f+=1;else{if(!T||E!==C)break;wt(o,i,v,b,++d),bt(o,i,m,w,f,a),d+=b.b||0,ft(_,P,i,++d),d+=_.b||0,h+=2,f+=2}}else ft(b,w,i,++d),d+=b.b||0,h++,f++}for(;h<c;){d++;b=(g=s[h]).b;wt(o,i,g.a,b,d),d+=b.b||0,h++}for(;f<l;){var R=R||[];bt(o,i,(p=u[f]).a,p.b,void 0,R),f++}(i.length>0||a.length>0||R)&&ht(n,8,r,{w:i,x:a,y:R})}var mt="_elmW6BL";function bt(e,t,n,r,i,o){var a=e[n];if(!a)return a={c:0,z:r,r:i,s:void 0},o.push({r:i,A:a}),void(e[n]=a);if(1===a.c){o.push({r:i,A:a}),a.c=2;var s=[];return ft(a.z,r,s,a.r),a.r=i,void(a.s.s={w:s,A:a})}bt(e,t,n+mt,r,i,o)}function wt(e,t,n,r,i){var o=e[n];if(o){if(0===o.c){o.c=2;var a=[];return ft(r,o.z,a,i),void ht(t,9,i,{w:a,A:o})}wt(e,t,n+mt,r,i)}else{var s=ht(t,9,i,void 0);e[n]={c:1,z:r,r:i,s:s}}}function yt(e,t,n,r){!function e(t,n,r,i,o,a,s){var u=r[i];var c=u.r;for(;c===o;){var l=u.$;if(1===l)yt(t,n.k,u.s,s);else if(8===l){u.t=t,u.u=s;var h=u.s.w;h.length>0&&e(t,n,h,0,o,a,s)}else if(9===l){u.t=t,u.u=s;var f=u.s;if(f){f.A.s=t;var h=f.w;h.length>0&&e(t,n,h,0,o,a,s)}}else u.t=t,u.u=s;if(!(u=r[++i])||(c=u.r)>a)return i}var d=n.$;if(4===d){for(var g=n.k;4===g.$;)g=g.k;return e(t,g,r,i,o+1,a,t.elm_event_node_ref)}var p=n.e;var v=t.childNodes;for(var m=0;m<p.length;m++){o++;var b=1===d?p[m]:p[m].b,w=o+(b.b||0);if(o<=c&&c<=w&&(i=e(v[m],b,r,i,o,w,s),!(u=r[i])||(c=u.r)>a))return i;o=w}return i}(e,t,n,0,0,t.b,r)}function xt(e,t,n,r){return 0===n.length?e:(yt(e,t,n,r),Tt(e,n))}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.t,o=St(i,r);i===e&&(e=o)}return e}function St(e,t){switch(t.$){case 0:return function(e,t,n){var r=e.parentNode,i=nt(t,n);i.elm_event_node_ref||(i.elm_event_node_ref=e.elm_event_node_ref);r&&i!==e&&r.replaceChild(i,e);return i}(e,t.s,t.u);case 4:return rt(e,t.u,t.s),e;case 3:return e.replaceData(0,e.length,t.s),e;case 1:return Tt(e,t.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=t.s:e.elm_event_node_ref={j:t.s,p:t.u},e;case 6:for(var n=t.s,r=0;r<n.i;r++)e.removeChild(e.childNodes[n.v]);return e;case 7:for(var i=(n=t.s).e,o=(r=n.v,e.childNodes[r]);r<i.length;r++)e.insertBefore(nt(i[r],t.u),o);return e;case 9:if(!(n=t.s))return e.parentNode.removeChild(e),e;var a=n.A;return void 0!==a.r&&e.parentNode.removeChild(e),a.s=Tt(e,n.w),e;case 8:return function(e,t){var n=t.s,r=function(e,t){if(!e)return;for(var n=We.createDocumentFragment(),r=0;r<e.length;r++){var i=e[r],o=i.A;je(n,2===o.c?o.s:nt(o.z,t.u))}return n}(n.y,t);e=Tt(e,n.w);for(var i=n.x,o=0;o<i.length;o++){var a=i[o],s=a.A,u=2===s.c?s.s:nt(s.z,t.u);e.insertBefore(u,e.childNodes[a.r])}r&&je(e,r);return e}(e,t);case 5:return t.s(e);default:E(10)}}function Et(e){if(3===e.nodeType)return Ve(e.textContent);if(1!==e.nodeType)return Ve("");for(var t=I,n=e.attributes,r=n.length;r--;){var i=n[r],o=i.name,a=i.value;t=A(l(Xe,o,a),t)}var s=e.tagName.toLowerCase(),u=I,c=e.childNodes;for(r=c.length;r--;)u=A(Et(c[r]),u);return h(qe,s,t,u)}var _t=o(function(e,t,n,r,i){for(var o=e.length,a=t+o<=i.length,s=0;a&&s<o;){var u=i.charCodeAt(t);a=e[s++]===i[t++]&&(10===u?(n++,r=1):(r++,55296==(63488&u)?e[s++]===i[t++]:1))}return M(a?t:-1,n,r)}),Ct=r(function(e,t,n){return n.length<=t?-1:55296==(63488&n.charCodeAt(t))?e(D(n.substr(t,2)))?t+2:-1:e(D(n[t]))?"\n"===n[t]?-2:t+1:-1}),Pt=(r(function(e,t,n){return n.charCodeAt(t)===e}),n(function(e,t){for(;e<t.length;e++){var n=t.charCodeAt(e);if(n<48||57<n)return e}return e}),r(function(e,t,n){for(var r=0;t<n.length;t++){var i=n.charCodeAt(t)-48;if(i<0||e<=i)break;r=e*r+i}return $(t,r)}),n(function(e,t){for(var n=0;e<t.length;e++){var r=t.charCodeAt(e);if(48<=r&&r<=57)n=16*n+r-48;else if(65<=r&&r<=70)n=16*n+r-55;else{if(!(97<=r&&r<=102))break;n=16*n+r-87}}return $(e,n)}),o(function(e,t,n,r,i){for(var o=i.indexOf(e,t),a=o<0?i.length:o+e.length;t<a;){var s=i.charCodeAt(t++);10===s?(r=1,n++):(r++,55296==(63488&s)&&t++)}return M(o,n,r)})),Rt=i(function(e,t,n,r){return ke(t,r,e.init,e.update,e.subscriptions,function(t,n){var i=e.view,o=r&&r.node?r.node:E(0),a=Et(o);return Ot(n,function(e){var n=i(e),r=lt(a,n);o=xt(o,a,r,t),a=n})})}),kt=(i(function(e,t,n,r){return ke(t,r,e.init,e.update,e.subscriptions,function(t,n){var r=e.setup&&e.setup(t),i=e.view,o=We.title,a=We.body,s=Et(a);return Ot(n,function(e){ze=r;var n=i(e),u=qe("body")(I)(n.body),c=lt(s,u);a=xt(a,s,c,t),s=u,ze=0,o!==n.title&&(We.title=o=n.title)})})}),"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)});function Ot(e,t){t(e);var n=0;function r(){n=1===n?0:(kt(r),t(e),1)}return function(i,o){e=i,o?(t(e),2===n&&(n=1)):(0===n&&kt(r),n=2)}}n(function(e,t){return l(ja,Oa,be(function(){t&&history.go(t),e()}))}),n(function(e,t){return l(ja,Oa,be(function(){history.pushState({},"",t),e()}))}),n(function(e,t){return l(ja,Oa,be(function(){history.replaceState({},"",t),e()}))});var $t={addEventListener:function(){},removeEventListener:function(){}},Mt=("undefined"!=typeof document&&document,"undefined"!=typeof window?window:$t);r(function(e,t,n){return Te(be(function(r){function i(e){xe(n(e))}return e.addEventListener(t,i,Ye&&{passive:!0}),function(){e.removeEventListener(t,i)}}))}),n(function(e,t){var n=se(e,t);return qt(n)?vn(n.a):Ht});function Dt(e,t){return be(function(n){kt(function(){var r=document.getElementById(e);n(r?me(t(r)):function(e){return{$:1,a:e}}(ka(e)))})})}n(function(e,t){return Dt(t,function(t){return t[e](),O})});n(function(e,t){return function(e){return be(function(t){kt(function(){t(me(e()))})})}(function(){return Mt.scroll(e,t),O})});r(function(e,t,n){return Dt(e,function(e){return e.scrollLeft=t,e.scrollTop=n,O})});var Ht={$:"Nothing"},Lt={$:"EQ"},It={$:"LT"},At=b,Bt=r(function(e,t,r){var i=r.c,o=r.d,a=n(function(t,n){if("SubTree"===t.$){var r=t.a;return h(At,a,n,r)}var i=t.a;return h(At,e,n,i)});return h(At,a,h(At,e,t,o),i)}),zt=B,Nt=function(e){return h(Bt,zt,I,e)},Ft={$:"GT"},Wt=r(function(e,t,n){for(;;){if("RBEmpty_elm_builtin"===n.$)return t;var r=n.b,i=n.c,o=n.d,a=n.e,s=e,u=h(e,r,i,h(Wt,e,t,a));e=s,t=u,n=o}}),jt=function(e){return h(Wt,r(function(e,t,n){return l(zt,$(e,t),n)}),I,e)},Vt=function(e){return function(e){return h(Wt,r(function(e,t,n){return l(zt,e,n)}),I,e)}(e.a)},Ut={annotations:I,canvas:Ht},qt=function(e){return"Ok"===e.$},Gt=i(function(e,t,n,r){return{$:"Array_elm_builtin",a:e,b:t,c:n,d:r}}),Zt=j,Jt=n(function(e,t){return U(t)/U(e)}),Xt=Zt(l(Jt,2,32)),Yt=[],Kt=f(Gt,0,Xt,Yt,Yt),Qt=function(e){return{$:"Leaf",a:e}},en=function(e){return{$:"SubTree",a:e}},tn=m,nn=r(function(e,t,n){for(;;){if(!n.b)return t;var r=n.a,i=n.b,o=e,a=l(e,r,t);e=o,t=a,n=i}}),rn=function(e){return h(nn,zt,I,e)},on=n(function(e,t){for(;;){var n=l(tn,32,e),r=n.a,i=n.b,o=l(zt,en(r),t);if(!i.b)return rn(o);e=i,t=o}}),an=n(function(e,t){return t(e)}),sn=n(function(e,t){for(;;){var n=Zt(t/32);if(1===n)return l(tn,32,e).a;e=l(on,e,I),t=n}}),un=n(function(e,t){return e(t)}),cn=V,ln=n(function(e,t){return R(e,t)>0?e:t}),hn=function(e){return e.length},fn=n(function(e,t){if(t.nodeListSize){var n=32*t.nodeListSize,r=cn(l(Jt,32,n-1)),i=e?rn(t.nodeList):t.nodeList,o=l(sn,i,t.nodeListSize);return f(Gt,hn(t.tail)+n,l(ln,5,r*Xt),o,t.tail)}return f(Gt,hn(t.tail),Xt,Yt,t.tail)}),dn=v,gn=o(function(e,t,n,r,i){for(;;){if(t<0)return l(fn,!1,{nodeList:r,nodeListSize:n/32|0,tail:i});var o=Qt(h(dn,32,t,e));e=e,t=t-32,n=n,r=l(zt,o,r),i=i}}),pn=n(function(e,t){if(e<=0)return Kt;var n=e%32,r=h(dn,n,e-n,t);return d(gn,t,e-n-32,e,I,r)}),vn=function(e){return{$:"Just",a:e}},mn=function(e){return{$:"Err",a:e}},bn=function(e){return{$:"Ok",a:e}},wn=n(function(e,t){return{$:"Failure",a:e,b:t}}),yn=n(function(e,t){return{$:"Field",a:e,b:t}}),xn=n(function(e,t){return{$:"Index",a:e,b:t}}),Tn=function(e){return{$:"OneOf",a:e}},Sn=H,En=function(e){var t=e.charCodeAt(0);return 55296<=t&&t<=56319?1024*(t-55296)+e.charCodeAt(1)-56320+65536:t},_n=function(e){var t=En(e);return 97<=t&&t<=122},Cn=function(e){var t=En(e);return t<=90&&65<=t},Pn=function(e){return _n(e)||Cn(e)},Rn=function(e){return _n(e)||Cn(e)||function(e){var t=En(e);return t<=57&&48<=t}(e)},kn=function(e){return h(nn,n(function(e,t){return t+1}),0,e)},On=F,$n=r(function(e,t,n){for(;;){if(!(R(e,t)<1))return n;var r=e,i=t-1,o=l(zt,t,n);e=r,t=i,n=o}}),Mn=n(function(e,t){return h($n,e,t,I)}),Dn=n(function(e,t){return h(On,e,l(Mn,0,kn(t)-1),t)}),Hn=Y,Ln=function(e){return e+""},In=n(function(e,t){return l(J,e,N(t))}),An=function(e){var t=e.charCodeAt(0);return t?vn(55296<=t&&t<=56319?$(D(e[0]+e[1]),e.slice(2)):$(D(e[0]),e.slice(1))):Ht},Bn=n(function(e,t){return z(l(Z,e,t))}),zn=function(e){return l(In,"\n    ",l(Bn,"\n",e))},Nn=de,Fn=n(function(e,t){return"\n\n("+Ln(e+1)+") "+zn(Wn(t))}),Wn=function(e){return l(jn,e,I)},jn=n(function(e,t){e:for(;;)switch(e.$){case"Field":var n=e.a,r=e.b,i=function(){var e=An(n);if("Nothing"===e.$)return!1;var t=e.a,r=t.a,i=t.b;return Pn(r)&&l(Hn,Rn,i)}(),o=r,a=l(zt,i?"."+n:"['"+n+"']",t);e=o,t=a;continue e;case"Index":var s=e.a,u=(r=e.b,"["+Ln(s)+"]");o=r,a=l(zt,u,t);e=o,t=a;continue e;case"OneOf":var c=e.a;if(c.b){if(c.b.b){var h=(t.b?"The Json.Decode.oneOf at json"+l(In,"",rn(t)):"Json.Decode.oneOf")+" failed in the following "+Ln(kn(c))+" ways:";return l(In,"\n\n",l(zt,h,l(Dn,Fn,c)))}e=o=r=c.a,t=a=t;continue e}return"Ran into a Json.Decode.oneOf with no possibilities"+(t.b?" at json"+l(In,"",rn(t)):"!");default:var f=e.a,d=e.b;return(h=t.b?"Problem with the value at json"+l(In,"",rn(t))+":\n\n    ":"Problem with the given value:\n\n")+(zn(l(Nn,4,d))+"\n\n")+f}}),Vn=function(e){return{$:2,m:e}}(I),Un=n(function(e,t){return{$:"SetAnnotations",a:e,b:t}}),qn=oe,Gn=qn(an),Zn=re,Jn=ae,Xn=function(e){return{$:1,a:e}},Yn=function(e){return{$:9,c:e}},Kn=function(e){return{$:15,g:e}},Qn=function(e){return{$:0,a:e}},er={$:5},tr=r(function(e,t,n){return l(Zn,function(r){var i=l(Jn,e,r);if("Ok"===i.$){var o=i.a,a=l(Jn,function(e){return Kn(z([e,Yn(n)]))}(t),o);if("Ok"===a.$){var s=a.a;return Qn(s)}var u=a.a;return Xn(Wn(u))}return Qn(n)},er)}),nr=te,rr=i(function(e,t,n,r){return l(Gn,h(tr,l(nr,e,er),t,n),r)}),ir=r(function(e,t,n){return l(Gn,l(nr,e,t),n)}),or=function(e){return z([e])},ar=function(e){return{$:7,b:e}},sr=ie,ur=function(e){return Kn(z([l(sr,or,e),ar(e)]))},cr=r(function(e,t,n){return{language:t,value:e,valueType:n}}),lr=function(e){return Kn(z([Yn(Ht),l(sr,vn,e)]))},hr={$:6},fr=function(e){return Kn(z([l(sr,function(e){return h(cr,e,Ht,Ht)},e),f(rr,"@type",lr(hr),Ht,f(rr,"@language",lr(hr),Ht,h(ir,"@value",e,Qn(cr))))]))},dr=function(e){if(e.b){var t=e.a;e.b;return vn(t)}return Ht},gr=n(function(e,t){if("Just"===t.$){var n=t.a;return vn(e(n))}return Ht}),pr=l(sr,gr(function(e){return e.value}),l(sr,dr,function(e){return Kn(z([l(sr,or,fr(e)),ar(fr(e))]))}(hr))),vr=n(function(e,t){return l(Zn,function(t){return C(t,e)?Qn(t):Xn("Expected value "+e)},t)}),mr=function(e){return{$:"ChoiceSelector",a:e}},br=function(e){return{$:"FragmentSelector",a:e}},wr=function(e){return{$:"SvgSelector",a:e}},yr=n(function(e,t){return"Just"===t.$?t.a:e}),xr=function(e){return l(Zn,e,Qn(O))};function Tr(){return Kn(z([f(rr,"item",xr(function(e){return ur(Tr())}),I,h(ir,"default",xr(function(e){return Tr()}),h(ir,"@type",l(sr,vn,l(vr,"oa:Choice",hr)),Qn(r(function(e,t,n){return mr({_default:t,items:n})}))))),h(ir,"value",l(sr,yr(""),pr),h(ir,"@type",l(vr,"oa:FragmentSelector",hr),Qn(n(function(e,t){return br({value:t})})))),h(ir,"value",l(sr,yr(""),pr),h(ir,"@type",l(vr,"oa:SvgSelector",hr),Qn(n(function(e,t){return wr({value:t})}))))]))}try{var Sr=Tr();Tr=function(){return Sr}}catch(e){throw"Some top-level definitions from `Iiif.Decoders` are causing infinite recursion:\n\n  \n      annotationSelectorDecoder\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var Er=n(function(e,t){return{full:e,selector:t}}),_r=Kn(z([l(sr,function(e){return l(Er,e,Ht)},hr),f(rr,"selector",l(sr,vn,Sr),Ht,h(ir,"full",hr,Qn(Er)))])),Cr={$:2},Pr=h(qn,n(function(e,t){return $(e,t)}),l(nr,"width",Cr),l(nr,"height",Cr)),Rr=o(function(e,t,n,r,i){return{height:r,id:e,profile:t,sizes:i,width:n}}),kr=f(rr,"sizes",ar(Pr),I,f(rr,"height",lr(Cr),Ht,f(rr,"width",lr(Cr),Ht,h(ir,"profile",ur(hr),h(ir,"@id",hr,Qn(Rr)))))),Or=u(function(e,t,n,r,i,o,a,s){return{chars:a,format:n,height:i,id:e,label:s,resourceType:t,service:o,width:r}}),$r=Kn(z([l(sr,function(e){return p(Or,vn(e),Ht,Ht,Ht,Ht,Ht,Ht,Ht)},hr),f(rr,"label",pr,Ht,f(rr,"chars",pr,Ht,f(rr,"service",lr(kr),Ht,f(rr,"height",lr(Cr),Ht,f(rr,"width",lr(Cr),Ht,f(rr,"format",pr,Ht,f(rr,"@type",lr(hr),Ht,f(rr,"@id",lr(hr),Ht,Qn(Or)))))))))])),Mr=i(function(e,t,n,r){return{id:e,motivation:t,on:r,resource:n}}),Dr=f(rr,"on",l(sr,dr,function(e){return Kn(z([ur(e),Yn(I)]))}(_r)),Ht,h(ir,"resource",$r,f(rr,"motivation",pr,Ht,f(rr,"@id",lr(hr),Ht,Qn(Mr))))),Hr=r(function(e,t,n){return{contentType:t,id:e,label:n}}),Lr=f(rr,"label",pr,Ht,f(rr,"@type",lr(hr),Ht,h(ir,"@id",hr,Qn(Hr)))),Ir=s(function(e,t,n,r,i,o,a){return{height:r,id:e,images:i,label:t,otherContent:a,thumbnail:o,width:n}}),Ar=f(rr,"otherContent",ur(Lr),I,f(rr,"thumbnail",lr($r),Ht,f(rr,"images",ar(Dr),I,h(ir,"height",Cr,h(ir,"width",Cr,f(rr,"label",pr,Ht,h(ir,"@id",hr,Qn(Ir)))))))),Br=h(ir,"annotations",ar(Dr),f(rr,"canvas",lr(Ar),Ht,Qn(Un))),zr=function(e){var t=l(Jn,Br,e);if("Ok"===t.$)return t.a;t.a;return l(Un,Ht,I)},Nr=function(e,t){return Ie(e),Oe[e]={f:Ne,r:t,a:Fe},De(e)}("inPortSetAnnotations",er),Fr=r(function(e,t,n){return"Just"===n.$?t(n.a):e}),Wr=ve,jr=ge,Vr=function(e,t){return Ie(e),Oe[e]={e:Ae,r:t,a:Be},De(e)}("outPortShowAnnotation",function(e){return h(Fr,Wr,jr,e)}),Ur=n(function(e,t){switch(e.$){case"SetAnnotations":var n=e.a;return $(function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}(t,{annotations:e.b,canvas:n}),Vn);case"OnMouseOver":var r=e.a;return $(t,Vr(vn(r)));default:r=e.a;return $(t,Vr(Ht))}}),qr=function(e){for(;;){if(!e.b)return Ht;if("SvgSelector"===e.a.$){var t=e.a.a;e.b;return vn(t.value)}e.a;e=e.b}},Gr=function(e){return e},Zr=function(e){switch(e.$){case"Normal":return 0;case"MayStopPropagation":return 1;case"MayPreventDefault":return 2;default:return 3}},Jr=Ze,Xr=n(function(e,t){return l(Jr,e,function(e){return{$:"Normal",a:e}}(t))}),Yr=n(function(e,t){return t(z([l(Xr,"mouseover",Qn(function(e){return{$:"OnMouseOver",a:e}}(e))),l(Xr,"mouseout",Qn(function(e){return{$:"OnMouseOut",a:e}}(e)))]))}),Kr=i(function(e,t,n,r){if(r.b){var i=r.a,o=r.b;if(o.b){var a=o.a,s=o.b;if(s.b){var u=s.a,c=s.b;if(c.b){var d=c.a,g=c.b;return l(e,i,l(e,a,l(e,u,l(e,d,n>500?h(nn,e,t,rn(g)):f(Kr,e,t,n+1,g)))))}return l(e,i,l(e,a,l(e,u,t)))}return l(e,i,l(e,a,t))}return l(e,i,t)}return t}),Qr=r(function(e,t,n){return f(Kr,e,t,0,n)}),ei=n(function(e,t){return t.b?h(Qr,zt,t,e):e}),ti=n(function(e,t){return h(Qr,n(function(t,n){return l(zt,e(t),n)}),I,t)}),ni=n(function(e,t){return function(e){return h(Qr,ei,I,e)}(l(ti,e,t))}),ri=Ue("http://www.w3.org/2000/svg"),ii=ri("path"),oi=n(function(e,t){return l(Xe,function(e){return/^(on|formAction$)/i.test(e)?"data-"+e:e}(e),function(e){return/^\s*(javascript:|data:text\/html)/i.test(e)?'javascript:alert("This is an XSS vector. Please use ports or web components instead.")':e}(t))}),ai=n(function(e,t){if("Element"!==t.$)return I;var n=t.a,r=t.b,i=t.c;switch(n){case"svg":return l(ni,ai(e),i);case"path":return z([l(Yr,e,function(e){return l(ii,L(l(ti,function(e){return l(oi,e.name,e.value)},r),e),I)})]);default:return I}}),si=n(function(e,t){return l(ai,e,t.root)}),ui=n(function(e,t){e:for(;;)switch(e.$){case"Empty":return t;case"AddRight":var n=e.a,r=e.b;e=n,t=l(zt,r,t);continue e;default:n=e.a;var i=e.b;e=n,t=l(ui,i,t);continue e}}),ci=n(function(e,t){var n=(0,e.a)({col:1,context:I,indent:1,offset:0,row:1,src:t});if("Good"===n.$){var r=n.b;return bn(r)}var i=n.b;return mn(l(ui,i,I))}),li=n(function(e,t){return e}),hi=n(function(e,t){return{$:"Bad",a:e,b:t}}),fi=r(function(e,t,n){return{$:"Good",a:e,b:t,c:n}}),di=function(e){return{$:"Parser",a:e}},gi=r(function(e,t,n){var r=t.a,i=n.a;return di(function(t){var n=r(t);if("Bad"===n.$){var o=n.a,a=n.b;return l(hi,o,a)}var s=n.a,u=n.b,c=n.c,f=i(c);if("Bad"===f.$){var d=f.a;a=f.b;return l(hi,s||d,a)}d=f.a;var g=f.b,p=f.c;return h(fi,s||d,l(e,u,g),p)})}),pi=n(function(e,t){return h(gi,li,e,t)}),vi=r(function(e,t,n){return{col:t,context:n,row:e}}),mi=n(function(e,t){return{col:t.col,context:e,indent:t.indent,offset:t.offset,row:t.row,src:t.src}}),bi=n(function(e,t){var n=t.a;return di(function(t){var r=n(l(mi,l(zt,h(vi,t.row,t.col,e),t.context),t));if("Good"===r.$){var i=r.a,o=r.b,a=r.c;return h(fi,i,o,l(mi,t.context,a))}return r})}),wi=n(function(e,t){return h(gi,un,e,t)}),yi={$:"Empty"},xi=n(function(e,t){return{$:"Append",a:e,b:t}}),Ti=r(function(e,t,n){for(;;){if(!n.b)return l(hi,!1,t);var r=n.a.a,i=n.b,o=r(e);if("Good"===o.$)return a=o;var a,s=(a=o).a,u=a.b;if(s)return a;e=e,t=l(xi,t,u),n=i}}),Si=function(e){return di(function(t){return h(Ti,t,yi,e)})},Ei=function(e){return di(function(t){return h(fi,!1,e,t)})},_i=r(function(e,t,n){return{docType:t,processingInstructions:e,root:n}}),Ci=function(e){return-e},Pi=Pt,Ri=n(function(e,t){return{$:"AddRight",a:e,b:t}}),ki=i(function(e,t,n,r){return{col:t,contextStack:r,problem:n,row:e}}),Oi=i(function(e,t,n,r){return l(Ri,yi,f(ki,e,t,n,r))}),$i=function(e){return""===e},Mi=n(function(e,t){return l(Ri,yi,f(ki,e.row,e.col,t,e.context))}),Di=_t,Hi=function(e){var t=e.a,n=e.b,r=!$i(t);return di(function(e){var i=d(Di,t,e.offset,e.row,e.col,e.src),o=i.a,a=i.b,s=i.c;return C(o,-1)?l(hi,!1,l(Mi,e,n)):h(fi,r,O,{col:s,context:e.context,indent:e.indent,offset:o,row:a,src:e.src})})},Li=n(function(e,t){return{$:"Token",a:e,b:t}}),Ii=function(e){return l(Li,e,function(e){return{$:"Expecting",a:e}}(e))},Ai=l(pi,l(pi,l(pi,Ei(O),Hi(Ii("\x3c!--"))),function(e){var t=e.a,n=e.b;return di(function(e){var r=d(Pi,t,e.offset,e.row,e.col,e.src),i=r.a,o=r.b,a=r.c;return C(i,-1)?l(hi,!1,f(Oi,o,a,n,e.context)):h(fi,R(e.offset,i)<0,O,{col:a,context:e.context,indent:e.indent,offset:i,row:o,src:e.src})})}(Ii("--\x3e"))),Hi(Ii("--\x3e"))),Bi=n(function(e,t){return{definition:t,rootElementName:e}}),zi=r(function(e,t,n){return{$:"Public",a:e,b:t,c:n}}),Ni=n(function(e,t){return{$:"System",a:e,b:t}}),Fi=function(e){return e.length},Wi={$:"BadRepeat"},ji=n(function(e,t){var n=t.a;return di(function(t){var r=n(t);if("Bad"===r.$){var i=r.a,o=r.b;return l(hi,i,o)}var a=r.a,s=r.b,u=r.c,c=(0,e(s).a)(u);if("Bad"===c.$){var f=c.a;o=c.b;return l(hi,a||f,o)}f=c.a;var d=c.b,g=c.c;return h(fi,a||f,d,g)})}),Vi=Ct,Ui=o(function(e,t,n,r,i){for(;;){var o=h(Vi,e,t,i.src);if(C(o,-1))return h(fi,R(i.offset,t)<0,O,{col:r,context:i.context,indent:i.indent,offset:t,row:n,src:i.src});if(C(o,-2))e=e,t=t+1,n=n+1,r=1,i=i;else e=e,t=o,n=n,r=r+1,i=i}}),qi=X,Gi=n(function(e,t){var n=t.a;return di(function(t){var r=n(t);if("Bad"===r.$){var i=r.a,o=r.b;return l(hi,i,o)}i=r.a;var a=r.b,s=r.c;return h(fi,i,l(e,h(qi,t.offset,s.offset,t.src),a),s)})}),Zi=function(e){return di(function(t){return l(hi,!1,l(Mi,t,e))})},Ji=n(function(e,t){var n=e.a;return l(ji,function(e){return R(n,Fi(e))<1?Ei(e):Zi(Wi)},function(e){return l(Gi,li,e)}(l(pi,Ei(O),function(e){return di(function(t){return d(Ui,e,t.offset,t.row,t.col,t)})}(t))))}),Xi=Hi,Yi=function(e){return Xi(l(Li,e,function(e){return{$:"ExpectingSymbol",a:e}}(e)))},Ki=function(e){return{$:"AtLeast",a:e}},Qi=Ki(0),eo=l(bi,"docTypeExternalSubset",l(wi,l(pi,Ei(Gr),Yi('"')),l(pi,l(Ji,Qi,function(e){return!C(e,D('"'))}),Yi('"')))),to=l(bi,"docTypeInternalSubset",l(wi,l(pi,Ei(Gr),Yi("[")),l(pi,l(Ji,Qi,function(e){return!C(e,D("]"))}),Yi("]")))),no=function(e){return function(e){var t=e.a,n=e.b,r=!$i(t);return di(function(e){var i=d(Di,t,e.offset,e.row,e.col,e.src),o=i.a,a=i.b,s=i.c;return C(o,-1)||0<=h(Vi,function(e){return Rn(e)||C(e,D("_"))},o,e.src)?l(hi,!1,l(Mi,e,n)):h(fi,r,O,{col:s,context:e.context,indent:e.indent,offset:o,row:a,src:e.src})})}(l(Li,e,function(e){return{$:"ExpectingKeyword",a:e}}(e)))},ro=n(function(e,t){var n=t.a;return di(function(t){var r=n(t);if("Good"===r.$){var i=r.a,o=r.b,a=r.c;return h(fi,i,e(o),a)}i=r.a;var s=r.b;return l(hi,i,s)})}),io=function(e){return Si(z([l(ro,vn,e),Ei(Ht)]))},oo=l(bi,"publicIdentifier",l(wi,l(pi,Ei(Gr),Yi('"')),l(pi,l(Ji,Qi,function(e){return!C(e,D('"'))}),Yi('"')))),ao=n(function(e,t){return l(ro,function(e){return O},l(Ji,e,t))}),so=function(e){return C(e,D(" "))||C(e,D("\r"))||C(e,D("\n"))||C(e,D("\t"))},uo=l(ao,Qi,so),co=l(bi,"docTypeDefinition",Si(z([l(wi,l(wi,l(wi,l(pi,l(pi,Ei(zi),no("PUBLIC")),uo),l(pi,oo,uo)),l(pi,eo,uo)),io(to)),l(wi,l(wi,l(pi,l(pi,Ei(Ni),no("SYSTEM")),uo),l(pi,eo,uo)),io(to)),l(wi,Ei(function(e){return{$:"Custom",a:e}}),to)]))),lo=Ki(1),ho=l(bi,"tagName",l(Ji,lo,function(e){return!(so(e)||C(e,D("/"))||C(e,D("<"))||C(e,D(">"))||C(e,D('"'))||C(e,D("'"))||C(e,D("=")))})),fo=l(bi,"docType",l(wi,l(wi,l(pi,l(pi,Ei(Bi),Yi("<!DOCTYPE")),uo),l(pi,ho,uo)),l(pi,l(pi,co,uo),Yi(">")))),go={$:"RBEmpty_elm_builtin"},po=go,vo=function(e){return{$:"Set_elm_builtin",a:e}},mo=vo(po),bo=function(e){return di(function(t){return(0,e(O).a)(t)})},wo=r(function(e,t,n){return{$:"Element",a:e,b:t,c:n}}),yo={$:"Black"},xo=o(function(e,t,n,r,i){return{$:"RBNode_elm_builtin",a:e,b:t,c:n,d:r,e:i}}),To=k,So={$:"Red"},Eo=o(function(e,t,n,r,i){if("RBNode_elm_builtin"===i.$&&"Red"===i.a.$){i.a;var o=i.b,a=i.c,s=i.d,u=i.e;if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$){r.a;var c=r.b,l=r.c,h=r.d,f=r.e;return d(xo,So,t,n,d(xo,yo,c,l,h,f),d(xo,yo,o,a,s,u))}return d(xo,e,o,a,d(xo,So,t,n,r,s),u)}if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$&&"RBNode_elm_builtin"===r.d.$&&"Red"===r.d.a.$){r.a,c=r.b,l=r.c;var g=r.d,p=(g.a,g.b),v=g.c,m=g.d,b=g.e;f=r.e;return d(xo,So,c,l,d(xo,yo,p,v,m,b),d(xo,yo,t,n,f,i))}return d(xo,e,t,n,r,i)}),_o=r(function(e,t,n){if("RBEmpty_elm_builtin"===n.$)return d(xo,So,e,t,go,go);var r=n.a,i=n.b,o=n.c,a=n.d,s=n.e;switch(l(To,e,i).$){case"LT":return d(Eo,r,i,o,h(_o,e,t,a),s);case"EQ":return d(xo,r,i,t,a,s);default:return d(Eo,r,i,o,a,h(_o,e,t,s))}}),Co=r(function(e,t,n){var r=h(_o,e,t,n);if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$){r.a;var i=r.b,o=r.c,a=r.d,s=r.e;return d(xo,yo,i,o,a,s)}return r}),Po=n(function(e,t){var n=t.a;return vo(h(Co,e,O,n))}),Ro=n(function(e,t){e:for(;;){if("RBEmpty_elm_builtin"===t.$)return Ht;var n=t.b,r=t.c,i=t.d,o=t.e;switch(l(To,e,n).$){case"LT":e=e,t=i;continue e;case"EQ":return vn(r);default:e=e,t=o;continue e}}}),ko=n(function(e,t){return"Just"===l(Ro,e,t).$}),Oo=n(function(e,t){var n=t.a;return l(ko,e,n)}),$o=n(function(e,t){return{name:e,value:t}}),Mo=l(bi,"attributeName",l(Ji,lo,function(e){return!(so(e)||C(e,D("/"))||C(e,D("<"))||C(e,D(">"))||C(e,D('"'))||C(e,D("'"))||C(e,D("=")))})),Do=q,Ho=function(e){return D(e<0||1114111<e?"":e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(Math.floor(e/1024)+55296)+String.fromCharCode(e%1024+56320)))},Lo=n(function(e,t){if("Just"===t.$){var n=t.a;return bn(n)}return mn(e)}),Io=n(function(e,t){if("Ok"===t.$){var n=t.a;return bn(e(n))}var r=t.a;return mn(r)}),Ao=n(function(e,t){if("Ok"===t.$){var n=t.a;return bn(n)}var r=t.a;return mn(e(r))}),Bo=n(function(e,t){return e<1?t:h(qi,e,Fi(t),t)}),zo=Q,No=function(e){for(var t=0,n=e.charCodeAt(0),r=43==n||45==n?1:0,i=r;i<e.length;++i){var o=e.charCodeAt(i);if(o<48||57<o)return Ht;t=10*t+o-48}return i==r?Ht:vn(45==n?-t:t)},Fo=function(e){return{$:"Problem",a:e}},Wo=function(e){return h(nn,n(function(e,t){var n=e.a,r=e.b;return h(Co,n,r,t)}),po,e)}(z([$("amp",D("&")),$("lt",D("<")),$("gt",D(">")),$("apos",D("'")),$("quot",D('"'))])),jo=G,Vo=function(e){return h(jo,zt,I,e)},Uo=W,qo=function(e){return l(Do,e,"")},Go=r(function(e,t,n){e:for(;;){if(!t.b)return bn(n);var r=t.a,i=t.b;switch(r.valueOf()){case"0":e=o=e-1,t=a=i,n=s=n;continue e;case"1":var o=e-1,a=i,s=n+l(Uo,16,e);e=o,t=a,n=s;continue e;case"2":o=e-1,a=i,s=n+2*l(Uo,16,e);e=o,t=a,n=s;continue e;case"3":o=e-1,a=i,s=n+3*l(Uo,16,e);e=o,t=a,n=s;continue e;case"4":o=e-1,a=i,s=n+4*l(Uo,16,e);e=o,t=a,n=s;continue e;case"5":o=e-1,a=i,s=n+5*l(Uo,16,e);e=o,t=a,n=s;continue e;case"6":o=e-1,a=i,s=n+6*l(Uo,16,e);e=o,t=a,n=s;continue e;case"7":o=e-1,a=i,s=n+7*l(Uo,16,e);e=o,t=a,n=s;continue e;case"8":o=e-1,a=i,s=n+8*l(Uo,16,e);e=o,t=a,n=s;continue e;case"9":o=e-1,a=i,s=n+9*l(Uo,16,e);e=o,t=a,n=s;continue e;case"a":o=e-1,a=i,s=n+10*l(Uo,16,e);e=o,t=a,n=s;continue e;case"b":o=e-1,a=i,s=n+11*l(Uo,16,e);e=o,t=a,n=s;continue e;case"c":o=e-1,a=i,s=n+12*l(Uo,16,e);e=o,t=a,n=s;continue e;case"d":o=e-1,a=i,s=n+13*l(Uo,16,e);e=o,t=a,n=s;continue e;case"e":o=e-1,a=i,s=n+14*l(Uo,16,e);e=o,t=a,n=s;continue e;case"f":o=e-1,a=i,s=n+15*l(Uo,16,e);e=o,t=a,n=s;continue e;default:return mn(qo(r)+" is not a valid hexadecimal character.")}}}),Zo=function(e){if($i(e))return mn("Empty strings are not valid hexadecimal strings.");var t=function(){if(l(zo,"-",e)){var t=l(yr,I,function(e){if(e.b){e.a;var t=e.b;return vn(t)}return Ht}(Vo(e)));return l(Io,Ci,h(Go,kn(t)-1,t,0))}return h(Go,Fi(e)-1,Vo(e),0)}();return l(Ao,function(t){return l(In," ",z(['"'+e+'"',"is not a valid hexadecimal string because",t]))},t)},Jo=function(e){return Zi(Fo(e))},Xo=function(e){return l(bi,"escapedChar",l(ji,function(e){return Si(z([l(ji,function(t){var n=function(e){return l(zo,"#x",e)?l(Ao,Fo,l(Io,Ho,Zo(l(Bo,2,e)))):l(zo,"#",e)?l(Lo,Fo("Invalid escaped charactor: "+e),l(gr,Ho,No(l(Bo,1,e)))):l(Lo,Fo('No entity named "&'+e+';" found.'),l(Ro,e,Wo))}(e);if("Ok"===n.$){var r=n.a;return Ei(r)}var i=n.a;return Zi(i)},Yi(";")),Jo('Entities must end_ with ";": &'+e)]))},l(wi,l(pi,Ei(Gr),Yi("&")),l(Ji,lo,function(t){return!C(t,e)&&!C(t,D(";"))}))))},Yo=function(e){return l(bi,"textString",l(ji,function(t){return Si(z([l(wi,l(wi,Ei(Do),Xo(e)),bo(function(t){return Yo(e)})),Ei(t)]))},l(Ji,Qi,function(t){return!C(t,e)&&!C(t,D("&"))})))},Ko=l(bi,"attributeValue",Si(z([l(wi,l(pi,Ei(Gr),Yi('"')),l(pi,Yo(D('"')),Yi('"'))),l(wi,l(pi,Ei(Gr),Yi("'")),l(pi,Yo(D("'")),Yi("'")))]))),Qo=l(bi,"attribute",l(wi,l(wi,Ei($o),l(pi,l(pi,l(pi,Mo,uo),Yi("=")),uo)),Ko)),ea=function(e){return l(bi,"attributes",Si(z([l(ji,function(t){return l(Oo,t.name,e)?Jo("attribute "+t.name+" is duplicated"):l(wi,l(pi,Ei(zt(t)),uo),ea(l(Po,t.name,e)))},Qo),Ei(I)])))},ta=function(e){return l(bi,"closingTag",l(pi,l(pi,l(pi,l(pi,l(pi,Ei(O),Yi("</")),uo),l(ji,function(t){return C(e,t)?Ei(O):Jo("tag name mismatch: "+e+" and "+t)},ho)),uo),Yi(">")))};function na(){return l(bi,"cdataContent",Si(z([l(pi,Ei(""),Yi("]]>")),l(ji,function(e){return l(ro,function(e){return"]]"+e},na())},Yi("]]")),l(ji,function(e){return l(ro,function(e){return"]"+e},na())},Yi("]")),l(wi,l(wi,Ei(Sn),l(Ji,Qi,function(e){return!C(e,D("]"))})),bo(function(e){return na()}))])))}try{var ra=na();na=function(){return ra}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      cdataContent\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var ia=l(bi,"cdata",l(wi,l(pi,Ei(Gr),Yi("<![CDATA[")),ra));function oa(){return l(bi,"textNodeString",Si(z([l(wi,l(wi,Ei(n(function(e,t){return vn(L(e,l(yr,"",t)))})),l(Ji,lo,function(e){return!C(e,D("<"))&&!C(e,D("&"))})),bo(function(e){return oa()})),l(wi,l(wi,Ei(n(function(e,t){return vn(l(Do,e,l(yr,"",t)))})),Xo(D("<"))),bo(function(e){return oa()})),l(wi,l(wi,Ei(n(function(e,t){var n=L(e,l(yr,"",t));return""!==n?vn(n):Ht})),ia),bo(function(e){return oa()})),l(wi,l(pi,Ei(function(e){var t=l(yr,"",e);return""!==t?vn(t):Ht}),Ai),bo(function(e){return oa()})),Ei(Ht)])))}try{var aa=oa();oa=function(){return aa}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      textNodeString\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var sa=function(e){return l(bi,"children",Si(z([l(pi,Ei(I),ta(e)),l(ji,function(t){if("Just"===t.$){var n=t.a;return l(wi,Ei(function(e){return l(zt,function(e){return{$:"Text",a:e}}(n),e)}),sa(e))}return l(pi,Ei(I),ta(e))},aa),bo(function(t){return l(wi,l(wi,Ei(zt),ua()),sa(e))})])))};function ua(){return l(bi,"element",l(wi,l(pi,Ei(Gr),Yi("<")),l(ji,function(e){return l(wi,l(wi,l(pi,Ei(wo(e)),uo),l(pi,ea(mo),uo)),Si(z([l(pi,Ei(I),Yi("/>")),l(wi,l(pi,Ei(Gr),Yi(">")),bo(function(t){return sa(e)}))])))},ho)))}try{var ca=ua();ua=function(){return ca}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      children\n       \n      element\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var la=function(e){return di(function(t){return C(Fi(t.src),t.offset)?h(fi,!1,O,t):l(hi,!1,l(Mi,t,e))})}({$:"ExpectingEnd"}),ha=n(function(e,t){return{name:e,value:t}}),fa=l(bi,"processingInstructionName",l(Ji,lo,function(e){return!C(e,D(" "))}));function da(){return l(bi,"processingInstructionValue",Si(z([l(pi,Ei(""),Yi("?>")),l(ji,function(e){return l(ro,function(e){return"?"+e},da())},Yi("?")),l(wi,l(wi,Ei(Sn),l(Ji,Qi,function(e){return!C(e,D("?"))})),bo(function(e){return da()}))])))}try{var ga=da();da=function(){return ga}}catch(e){throw"Some top-level definitions from `XmlParser` are causing infinite recursion:\n\n  \n      processingInstructionValue\n  \n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var pa=l(bi,"processingInstruction",l(wi,l(wi,l(pi,Ei(ha),Yi("<?")),l(pi,fa,Yi(" "))),ga)),va=i(function(e,t,n,r){e:for(;;){var i=(0,n(t).a)(r);if("Good"===i.$){var o=i.a,a=i.b,s=i.c;if("Loop"===a.$){var u=a.a;e=e||o,t=u,n=n,r=s;continue e}var c=a.a;return h(fi,e||o,c,s)}o=i.a;var f=i.b;return l(hi,e||o,f)}}),ma=n(function(e,t){return di(function(n){return f(va,!1,e,t,n)})}),ba=n(function(e,t){var n=e.a;return l(ji,function(e){return R(n,kn(e))<1?Ei(e):Zi(Wi)},l(ma,I,function(e){return Si(z([l(ro,function(t){return function(e){return{$:"Loop",a:e}}(l(ei,e,z([t])))},t),l(ro,li(function(e){return{$:"Done",a:e}}(e)),Ei(O))]))}))}),wa=l(ao,lo,so),ya=l(bi,"xml",l(wi,l(wi,l(wi,l(pi,Ei(_i),uo),l(pi,l(ba,Qi,l(wi,Ei(Gr),l(pi,pa,uo))),l(ba,Qi,Si(z([wa,Ai]))))),l(pi,io(fo),l(ba,Qi,Si(z([wa,Ai]))))),l(pi,l(pi,ca,l(ba,Qi,Si(z([wa,Ai])))),la))),xa=function(e){return l(ci,ya,e)},Ta=n(function(e,t){e:for(;;)switch(t.$){case"SvgSelector":var n=t.a,r=xa(n.value);if("Ok"===r.$){var i=r.a;return l(si,e,i)}r.a;return I;case"ChoiceSelector":n=t.a;var o=qr(n.items);if("Just"===o.$){var a=o.a;e=e,t=wr({value:a});continue e}e=e,t=n._default;continue e;default:n=t.a;return I}}),Sa=n(function(e,t){return"Just"===t.$?e(t.a):Ht}),Ea=function(e){var t=l(Sa,function(e){return e.selector},e.on),n=(l(yr,"",e.resource.chars),$(t,e.id));if("Just"===n.a.$&&"Just"===n.b.$){var r=n.a.a,i=n.b.a;return l(Ta,i,r)}return I},_a=qe("div"),Ca=n(function(e,t){return l(Je,e,jr(t))})("id"),Pa=ri("svg"),Ra=Xe("viewBox"),ka=function(e){return{$:"NotFound",a:e}},Oa=function(e){for(;;){e=e.a}},$a=function(e){return{$:"Perform",a:e}},Ma=me,Da=Ma(O),Ha=we,La=n(function(e,t){return l(Ha,function(t){return Ma(e(t))},t)}),Ia=r(function(e,t,n){return l(Ha,function(t){return l(Ha,function(n){return Ma(l(e,t,n))},n)},t)}),Aa=Me,Ba=n(function(e,t){var n=t.a;return Te(l(Ha,Aa(e),n))}),za=r(function(e,t,n){return l(La,function(e){return O},function(e){return h(Qr,Ia(zt),Ma(I),e)}(l(ti,Ba(e),t)))}),Na=r(function(e,t,n){return Ma(O)}),Fa=n(function(e,t){var n=t.a;return $a(l(La,e,n))});Oe.Task=function(e,t,n,r,i){return{b:e,c:t,d:n,e:r,f:i}}(Da,za,Na,Fa);var Wa=De("Task"),ja=n(function(e,t){return Wa($a(l(La,e,t)))}),Va=ee,Ua=n(function(e,t){return e<1?"":h(qi,0,e,t)}),qa=K,Ga=a(function(e,t,n,r,i,o){return{fragment:o,host:t,path:r,port_:n,protocol:e,query:i}}),Za=o(function(e,t,n,r,i){if($i(i)||l(qa,"@",i))return Ht;var o=l(Va,":",i);if(o.b){if(o.b.b)return Ht;var a=o.a,s=No(l(Bo,a+1,i));if("Nothing"===s.$)return Ht;var u=s;return vn(g(Ga,e,l(Ua,a,i),u,t,n,r))}return vn(g(Ga,e,i,Ht,t,n,r))}),Ja=i(function(e,t,n,r){if($i(r))return Ht;var i=l(Va,"/",r);if(i.b){var o=i.a;return d(Za,e,l(Bo,o,r),t,n,l(Ua,o,r))}return d(Za,e,"/",t,n,r)}),Xa=r(function(e,t,n){if($i(n))return Ht;var r=l(Va,"?",n);if(r.b){var i=r.a;return f(Ja,e,vn(l(Bo,i+1,n)),t,l(Ua,i,n))}return f(Ja,e,Ht,t,n)});n(function(e,t){if($i(t))return Ht;var n=l(Va,"#",t);if(n.b){var r=n.a;return h(Xa,e,vn(l(Bo,r+1,t)),l(Ua,r,t))}return h(Xa,e,Ht,t)});!function(t){e.Elm?function e(t,n,r){for(var i in r)i in n?"init"==i?E(6,t):e(t+"."+i,n[i],r[i]):n[i]=r[i]}("Elm",e.Elm,t):e.Elm=t}({AnnotationOverlay:{init:Rt({init:function(e){return $(Ut,Vn)},subscriptions:function(e){return Nr(zr)},update:Ur,view:function(e){var t=Ln(l(yr,1e3,l(gr,function(e){return e.width},e.canvas))),n=Ln(l(yr,1e3,l(gr,function(e){return e.height},e.canvas)));return l(_a,z([Ca("annotation_overlay")]),z([l(Pa,z([Ra("0 0 "+t+" "+n)]),l(ni,Ea,e.annotations))]))}})(er)(0)}})}(this)}]);